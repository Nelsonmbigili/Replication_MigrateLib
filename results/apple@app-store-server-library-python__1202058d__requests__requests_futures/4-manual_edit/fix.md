- merge skipped code blocks (resolves collection errors, 17/56 tests still fail)
- undo unnecessary changes in tests (resolves all failures)
 