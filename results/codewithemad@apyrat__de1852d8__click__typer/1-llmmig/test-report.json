{
  "exitcode": 1,
  "summary": {
    "failed": 4,
    "passed": 4,
    "total": 8,
    "collected": 8
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": ".",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "apyrat",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "apyrat.egg-info",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "tests/cli_test.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/cli_test.py::test_main_download_video_with_quality",
          "type": "Function",
          "lineno": 7
        },
        {
          "nodeid": "tests/cli_test.py::test_main_download_video_without_quality",
          "type": "Function",
          "lineno": 25
        },
        {
          "nodeid": "tests/cli_test.py::test_get_quality_available",
          "type": "Function",
          "lineno": 35
        },
        {
          "nodeid": "tests/cli_test.py::test_get_quality_not_available",
          "type": "Function",
          "lineno": 42
        },
        {
          "nodeid": "tests/cli_test.py::test_get_quality_not_available_no_confirm",
          "type": "Function",
          "lineno": 49
        }
      ]
    },
    {
      "nodeid": "tests/test_apyrat.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_apyrat.py::test_get_available_videos_single_video",
          "type": "Function",
          "lineno": 4
        },
        {
          "nodeid": "tests/test_apyrat.py::test_default_quality",
          "type": "Function",
          "lineno": 23
        },
        {
          "nodeid": "tests/test_apyrat.py::test_download_when_file_exists",
          "type": "Function",
          "lineno": 29
        }
      ]
    },
    {
      "nodeid": "tests",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/cli_test.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_apyrat.py",
          "type": "Module"
        }
      ]
    },
    {
      "nodeid": ".",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "apyrat",
          "type": "Package"
        },
        {
          "nodeid": "apyrat.egg-info",
          "type": "Dir"
        },
        {
          "nodeid": "tests",
          "type": "Package"
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/cli_test.py::test_main_download_video_with_quality",
      "lineno": 7,
      "outcome": "failed",
      "keywords": [
        "test_main_download_video_with_quality",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__click__typer",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__click__typer\\.venv\\Lib\\site-packages\\typer\\main.py",
          "lineno": 352,
          "message": "AttributeError: 'function' object has no attribute '_add_completion'"
        },
        "traceback": [
          {
            "path": "tests\\cli_test.py",
            "lineno": 14,
            "message": ""
          },
          {
            "path": ".venv\\Lib\\site-packages\\typer\\testing.py",
            "lineno": 20,
            "message": "in invoke"
          },
          {
            "path": ".venv\\Lib\\site-packages\\typer\\main.py",
            "lineno": 352,
            "message": "AttributeError"
          }
        ],
        "longrepr": "def test_main_download_video_with_quality():\n        runner = CliRunner()\n        with patch(\n            \"apyrat.apyrat.Downloader._get_available_qualities\",\n            return_value=[\"480\", \"720\", \"1080\"],\n        ) as mock_qualities:\n>           result = runner.invoke(\n                main,\n                [\n                    \"https://www.aparat.com/v/qur3I\",\n                    \"-q\",\n                    \"720\",\n                ],\n            )\n\ntests\\cli_test.py:14: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv\\Lib\\site-packages\\typer\\testing.py:20: in invoke\n    use_cli = _get_command(app)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ntyper_instance = <function main at 0x0000024781176C00>\n\n    def get_command(typer_instance: Typer) -> click.Command:\n>       if typer_instance._add_completion:\nE       AttributeError: 'function' object has no attribute '_add_completion'\n\n.venv\\Lib\\site-packages\\typer\\main.py:352: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/cli_test.py::test_main_download_video_without_quality",
      "lineno": 25,
      "outcome": "failed",
      "keywords": [
        "test_main_download_video_without_quality",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__click__typer",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__click__typer\\.venv\\Lib\\site-packages\\typer\\main.py",
          "lineno": 352,
          "message": "AttributeError: 'function' object has no attribute '_add_completion'"
        },
        "traceback": [
          {
            "path": "tests\\cli_test.py",
            "lineno": 32,
            "message": ""
          },
          {
            "path": ".venv\\Lib\\site-packages\\typer\\testing.py",
            "lineno": 20,
            "message": "in invoke"
          },
          {
            "path": ".venv\\Lib\\site-packages\\typer\\main.py",
            "lineno": 352,
            "message": "AttributeError"
          }
        ],
        "longrepr": "def test_main_download_video_without_quality():\n        runner = CliRunner()\n        with patch(\n            \"apyrat.apyrat.Downloader._get_available_qualities\",\n            return_value=[\"480\", \"720\", \"1080\"],\n        ), patch(\"typer.prompt\", return_value=\"720\"):\n>           result = runner.invoke(main, [\"https://www.aparat.com/v/qur3I\"])\n\ntests\\cli_test.py:32: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n.venv\\Lib\\site-packages\\typer\\testing.py:20: in invoke\n    use_cli = _get_command(app)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ntyper_instance = <function main at 0x0000024781176C00>\n\n    def get_command(typer_instance: Typer) -> click.Command:\n>       if typer_instance._add_completion:\nE       AttributeError: 'function' object has no attribute '_add_completion'\n\n.venv\\Lib\\site-packages\\typer\\main.py:352: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/cli_test.py::test_get_quality_available",
      "lineno": 35,
      "outcome": "passed",
      "keywords": [
        "test_get_quality_available",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__click__typer",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/cli_test.py::test_get_quality_not_available",
      "lineno": 42,
      "outcome": "failed",
      "keywords": [
        "test_get_quality_not_available",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__click__typer",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__click__typer\\apyrat\\cli.py",
          "lineno": 65,
          "message": "AttributeError: module 'typer' has no attribute 'Choice'"
        },
        "traceback": [
          {
            "path": "tests\\cli_test.py",
            "lineno": 47,
            "message": ""
          },
          {
            "path": "apyrat\\cli.py",
            "lineno": 65,
            "message": "AttributeError"
          }
        ],
        "stderr": "Quality 240 is not available\n",
        "longrepr": "def test_get_quality_not_available():\n        downloader = Downloader(\"https://www.aparat.com/v/qur3I\")\n        downloader.qualities = [\"480\", \"720\", \"1080\"]\n        with patch(\"typer.prompt\", return_value=\"720\"):\n>           assert get_quality(downloader, \"240\") == \"720\"\n\ntests\\cli_test.py:47: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndownloader = <apyrat.apyrat.Downloader object at 0x00000247811EA5D0>\nquality = None\n\n    def get_quality(downloader: Downloader, quality: VideoQuality):\n        if quality and quality not in downloader.qualities:\n            typer.echo(f\"Quality {quality} is not available\", err=True)\n            quality = None\n    \n        if not quality:\n            quality_choice = typer.prompt(\n                \"Enter the quality you want to download\",\n>               type=typer.Choice(downloader._get_available_qualities()),\n                default=downloader.default_quality(),\n            )\nE           AttributeError: module 'typer' has no attribute 'Choice'\n\napyrat\\cli.py:65: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/cli_test.py::test_get_quality_not_available_no_confirm",
      "lineno": 49,
      "outcome": "failed",
      "keywords": [
        "test_get_quality_not_available_no_confirm",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__click__typer",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__click__typer\\apyrat\\cli.py",
          "lineno": 65,
          "message": "AttributeError: module 'typer' has no attribute 'Choice'"
        },
        "traceback": [
          {
            "path": "tests\\cli_test.py",
            "lineno": 54,
            "message": ""
          },
          {
            "path": "apyrat\\cli.py",
            "lineno": 65,
            "message": "AttributeError"
          }
        ],
        "stderr": "Quality 240 is not available\n",
        "longrepr": "def test_get_quality_not_available_no_confirm():\n        downloader = Downloader(\"https://www.aparat.com/v/qur3I\")\n        downloader.qualities = [\"480\", \"720\", \"1080\"]\n        with patch(\"typer.prompt\", return_value=\"480\"):\n>           assert get_quality(downloader, \"240\") == \"480\"\n\ntests\\cli_test.py:54: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndownloader = <apyrat.apyrat.Downloader object at 0x00000247811EB0B0>\nquality = None\n\n    def get_quality(downloader: Downloader, quality: VideoQuality):\n        if quality and quality not in downloader.qualities:\n            typer.echo(f\"Quality {quality} is not available\", err=True)\n            quality = None\n    \n        if not quality:\n            quality_choice = typer.prompt(\n                \"Enter the quality you want to download\",\n>               type=typer.Choice(downloader._get_available_qualities()),\n                default=downloader.default_quality(),\n            )\nE           AttributeError: module 'typer' has no attribute 'Choice'\n\napyrat\\cli.py:65: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_apyrat.py::test_get_available_videos_single_video",
      "lineno": 4,
      "outcome": "passed",
      "keywords": [
        "test_get_available_videos_single_video",
        "__wrapped__",
        "patchings",
        "test_apyrat.py",
        "tests",
        "codewithemad@apyrat__de1852d8__click__typer",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_apyrat.py::test_default_quality",
      "lineno": 23,
      "outcome": "passed",
      "keywords": [
        "test_default_quality",
        "test_apyrat.py",
        "tests",
        "codewithemad@apyrat__de1852d8__click__typer",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_apyrat.py::test_download_when_file_exists",
      "lineno": 29,
      "outcome": "passed",
      "keywords": [
        "test_download_when_file_exists",
        "__wrapped__",
        "patchings",
        "test_apyrat.py",
        "tests",
        "codewithemad@apyrat__de1852d8__click__typer",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed",
        "stdout": "My Video Title\nhttps://link-to-video\n"
      },
      "teardown": {
        "outcome": "passed"
      }
    }
  ]
}