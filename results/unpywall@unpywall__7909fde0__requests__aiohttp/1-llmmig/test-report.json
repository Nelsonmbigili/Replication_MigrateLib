{
  "exitcode": 1,
  "summary": {
    "passed": 10,
    "failed": 16,
    "total": 26,
    "collected": 26
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": ".",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "docs/_static/css",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "docs/_static",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs/_static/css",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "docs/_templates",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "docs",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs/_static",
          "type": "Dir"
        },
        {
          "nodeid": "docs/_templates",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "test_dir",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_reset_cache",
          "type": "Function",
          "lineno": 41
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_delete",
          "type": "Function",
          "lineno": 46
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_timeout",
          "type": "Function",
          "lineno": 54
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_get",
          "type": "Function",
          "lineno": 64
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_save_load",
          "type": "Function",
          "lineno": 80
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_download",
          "type": "Function",
          "lineno": 102
        }
      ]
    },
    {
      "nodeid": "tests/test_cache.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_main",
          "type": "Function",
          "lineno": 10
        },
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_view",
          "type": "Function",
          "lineno": 21
        },
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_download",
          "type": "Function",
          "lineno": 31
        },
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_link",
          "type": "Function",
          "lineno": 43
        }
      ]
    },
    {
      "nodeid": "tests/test_cli.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_init_cache",
          "type": "Function",
          "lineno": 24
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_validate_dois",
          "type": "Function",
          "lineno": 39
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_df",
          "type": "Coroutine",
          "lineno": 58
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_doi",
          "type": "Coroutine",
          "lineno": 83
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_query",
          "type": "Coroutine",
          "lineno": 102
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_json",
          "type": "Coroutine",
          "lineno": 111
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_pdf_link",
          "type": "Coroutine",
          "lineno": 134
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_doc_link",
          "type": "Coroutine",
          "lineno": 139
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_all_links",
          "type": "Coroutine",
          "lineno": 145
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_handle",
          "type": "Coroutine",
          "lineno": 151
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_progress",
          "type": "Function",
          "lineno": 157
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_view_pdf",
          "type": "Coroutine",
          "lineno": 162
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_file",
          "type": "Coroutine",
          "lineno": 166
        }
      ]
    },
    {
      "nodeid": "tests/test_unpywall.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallCredentials",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::TestUnpywallCredentials::test_validate_email",
          "type": "Function",
          "lineno": 7
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallURL",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::TestUnpywallURL::test_doi_url",
          "type": "Function",
          "lineno": 36
        },
        {
          "nodeid": "tests/test_utils.py::TestUnpywallURL::test_query_url",
          "type": "Function",
          "lineno": 44
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::TestUnpywallCredentials",
          "type": "Class"
        },
        {
          "nodeid": "tests/test_utils.py::TestUnpywallURL",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cache.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_cli.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_unpywall.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_utils.py",
          "type": "Module"
        }
      ]
    },
    {
      "nodeid": "unpywall",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "unpywall.egg-info",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": ".",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs",
          "type": "Dir"
        },
        {
          "nodeid": "test_dir",
          "type": "Dir"
        },
        {
          "nodeid": "tests",
          "type": "Package"
        },
        {
          "nodeid": "unpywall",
          "type": "Package"
        },
        {
          "nodeid": "unpywall.egg-info",
          "type": "Dir"
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_reset_cache",
      "lineno": 41,
      "outcome": "passed",
      "keywords": [
        "test_reset_cache",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_delete",
      "lineno": 46,
      "outcome": "passed",
      "keywords": [
        "test_delete",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_timeout",
      "lineno": 54,
      "outcome": "failed",
      "keywords": [
        "test_timeout",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\unpywall\\cache.py",
          "lineno": 88,
          "message": "KeyError: '10.1016/j.jns.2020.116832'"
        },
        "traceback": [
          {
            "path": "tests\\test_cache.py",
            "lineno": 63,
            "message": ""
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 88,
            "message": "KeyError"
          }
        ],
        "longrepr": "self = <tests.test_cache.TestUnpywallCache object at 0x0000025F706DC710>\nexample_cache = <unpywall.cache.UnpywallCache object at 0x0000025F708C7EC0>\n\n    def test_timeout(self, example_cache):\n        timeout = 1\n        doi = '10.1016/j.jns.2020.116832'\n        example_cache.timeout = timeout\n        example_cache.delete(doi)\n        assert doi not in example_cache.content\n        example_cache.get(doi)\n        time.sleep(timeout)\n>       assert example_cache.timed_out(doi)\n\ntests\\test_cache.py:63: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <unpywall.cache.UnpywallCache object at 0x0000025F708C7EC0>\ndoi = '10.1016/j.jns.2020.116832'\n\n    def timed_out(self, doi: str) -> bool:\n        \"\"\"\n        Return whether the record for the given doi has expired.\n    \n        Parameters\n        ----------\n        doi : str\n            The DOI to be removed from the cache.\n    \n        Returns\n        -------\n        is_timed_out : bool\n            Whether the given entry has timed out.\n        \"\"\"\n        if not self.timeout:\n            is_timed_out = False\n        else:\n>           is_timed_out = time.time() > self.access_times[doi] + self.timeout\nE           KeyError: '10.1016/j.jns.2020.116832'\n\nunpywall\\cache.py:88: KeyError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_get",
      "lineno": 64,
      "outcome": "failed",
      "keywords": [
        "test_get",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_cache.py",
          "lineno": 74,
          "message": "TypeError: UnpywallCache.get() got an unexpected keyword argument 'session'"
        },
        "traceback": [
          {
            "path": "tests\\test_cache.py",
            "lineno": 79,
            "message": ""
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py",
            "lineno": 194,
            "message": "in run"
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py",
            "lineno": 118,
            "message": "in run"
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\base_events.py",
            "lineno": 687,
            "message": "in run_until_complete"
          },
          {
            "path": "tests\\test_cache.py",
            "lineno": 74,
            "message": "TypeError"
          }
        ],
        "longrepr": "self = <tests.test_cache.TestUnpywallCache object at 0x0000025F706DCB60>\nexample_cache = <unpywall.cache.UnpywallCache object at 0x0000025F7091B500>\nbackup_cache = <unpywall.cache.UnpywallCache object at 0x0000025F7091B830>\n\n    def test_get(self, example_cache, backup_cache):\n        doi = '10.1016/j.jns.2020.116832'\n        example_cache.delete(doi)\n        assert doi not in example_cache.content\n        assert doi not in example_cache.access_times\n    \n        # Use asyncio to run the asynchronous get method\n        async def async_test_get():\n            async with ClientSession() as session:\n                response = await backup_cache.get(doi, session=session)\n                assert isinstance(response, ClientResponse)\n                response = await example_cache.get(doi, ignore_cache=True, session=session)\n                assert isinstance(response, ClientResponse)\n    \n>       asyncio.run(async_test_get())\n\ntests\\test_cache.py:79: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py:194: in run\n    return runner.run(main)\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py:118: in run\n    return self._loop.run_until_complete(task)\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\base_events.py:687: in run_until_complete\n    return future.result()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    async def async_test_get():\n        async with ClientSession() as session:\n>           response = await backup_cache.get(doi, session=session)\nE           TypeError: UnpywallCache.get() got an unexpected keyword argument 'session'\n\ntests\\test_cache.py:74: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_save_load",
      "lineno": 80,
      "outcome": "failed",
      "keywords": [
        "test_save_load",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_cache.py",
          "lineno": 90,
          "message": "TypeError: UnpywallCache.get() got an unexpected keyword argument 'session'"
        },
        "traceback": [
          {
            "path": "tests\\test_cache.py",
            "lineno": 101,
            "message": ""
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py",
            "lineno": 194,
            "message": "in run"
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py",
            "lineno": 118,
            "message": "in run"
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\base_events.py",
            "lineno": 687,
            "message": "in run_until_complete"
          },
          {
            "path": "tests\\test_cache.py",
            "lineno": 90,
            "message": "TypeError"
          }
        ],
        "longrepr": "self = <tests.test_cache.TestUnpywallCache object at 0x0000025F706DCD10>\nexample_cache = <unpywall.cache.UnpywallCache object at 0x0000025F7097ABD0>\nbackup_cache = <unpywall.cache.UnpywallCache object at 0x0000025F7097B1D0>\n\n    def test_save_load(self, example_cache, backup_cache):\n        doi = '10.1016/j.jns.2020.116832'\n        example_cache.delete(doi)\n        assert doi not in example_cache.content\n        assert doi not in example_cache.access_times\n    \n        # Use asyncio to run the asynchronous get method\n        async def async_test_save_load():\n            async with ClientSession() as session:\n                await backup_cache.get(doi, session=session)\n                saved_cache_name = str(uuid.uuid4().hex)\n                example_cache.save(saved_cache_name)\n                UnpywallCache(saved_cache_name)\n                os.remove(saved_cache_name)\n                path = os.path.join(os.getcwd(), 'unpaywall_cache')\n                assert UnpywallCache().name == path\n                os.remove(path)\n                assert doi in backup_cache.content\n                assert doi in backup_cache.access_times\n    \n>       asyncio.run(async_test_save_load())\n\ntests\\test_cache.py:101: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py:194: in run\n    return runner.run(main)\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py:118: in run\n    return self._loop.run_until_complete(task)\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\base_events.py:687: in run_until_complete\n    return future.result()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    async def async_test_save_load():\n        async with ClientSession() as session:\n>           await backup_cache.get(doi, session=session)\nE           TypeError: UnpywallCache.get() got an unexpected keyword argument 'session'\n\ntests\\test_cache.py:90: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_download",
      "lineno": 102,
      "outcome": "failed",
      "keywords": [
        "test_download",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_cache.py",
          "lineno": 109,
          "message": "TypeError: UnpywallCache.download() got an unexpected keyword argument 'session'"
        },
        "traceback": [
          {
            "path": "tests\\test_cache.py",
            "lineno": 112,
            "message": ""
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py",
            "lineno": 194,
            "message": "in run"
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py",
            "lineno": 118,
            "message": "in run"
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\base_events.py",
            "lineno": 687,
            "message": "in run_until_complete"
          },
          {
            "path": "tests\\test_cache.py",
            "lineno": 109,
            "message": "TypeError"
          }
        ],
        "longrepr": "self = <tests.test_cache.TestUnpywallCache object at 0x0000025F706DCFE0>\nexample_cache = <unpywall.cache.UnpywallCache object at 0x0000025F7097A1E0>\n\n    def test_download(self, example_cache):\n        doi = '10.1016/j.jns.2020.116832'\n    \n        # Use asyncio to run the asynchronous download method\n        async def async_test_download():\n            async with ClientSession() as session:\n                response = await example_cache.download(doi, 'raise', session=session)\n                assert isinstance(response, ClientResponse)\n    \n>       asyncio.run(async_test_download())\n\ntests\\test_cache.py:112: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py:194: in run\n    return runner.run(main)\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\runners.py:118: in run\n    return self._loop.run_until_complete(task)\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\asyncio\\base_events.py:687: in run_until_complete\n    return future.result()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n    async def async_test_download():\n        async with ClientSession() as session:\n>           response = await example_cache.download(doi, 'raise', session=session)\nE           TypeError: UnpywallCache.download() got an unexpected keyword argument 'session'\n\ntests\\test_cache.py:109: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_main",
      "lineno": 10,
      "outcome": "passed",
      "keywords": [
        "test_main",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed",
        "stdout": "usage: unpywall <command> [<args>]\n\nCommand-line tool for interfacing the Unpaywall API\n\nThese are common unpywall commands:\n\n   view        This command opens a local copy of a PDF from\n               a given DOI.\n   download    This command downloads a copy of a PDF from a\n               given DOI.\n   link        This command returns a link to an OA pdf\n               (if available).\nUnknown option: this is a bad argument\nusage: unpywall <command> [<args>]\n\nCommand-line tool for interfacing the Unpaywall API\n\nThese are common unpywall commands:\n\n   view        This command opens a local copy of a PDF from\n               a given DOI.\n   download    This command downloads a copy of a PDF from a\n               given DOI.\n   link        This command returns a link to an OA pdf\n               (if available).\n"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_view",
      "lineno": 21,
      "outcome": "failed",
      "keywords": [
        "test_view",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_cli.py",
          "lineno": 28,
          "message": "Failed: DID NOT RAISE <class 'aiohttp.client_exceptions.ClientResponseError'>"
        },
        "traceback": [
          {
            "path": "tests\\test_cli.py",
            "lineno": 28,
            "message": "Failed"
          }
        ],
        "stdout": "usage: __main__.py [-m \b] [-b \b] [-u \b] doi\n\nThis command opens a local copy of a PDF from a given DOI.\n\npositional arguments:\n  doi                 \tThe DOI of the document.\n\noptions:\n  -m \b, --mode \b      \tThe mode for viewing a PDF.\n  -b \b, --backend \b   \tThe backend you want to use.\n  -u \b, --progress \b  \tShow progress bar.\n",
        "stderr": "error: the following arguments are required: doi\n\n",
        "longrepr": "self = <tests.test_cli.TestUnpywallCli object at 0x0000025F706DEDB0>\n\n    def test_view(self):\n        with pytest.raises(SystemExit) as pytest_raise_system_exit:\n            main(test_args=['view'])\n    \n            assert pytest_raise_system_exit.value.code == 2\n    \n>       with pytest.raises(ClientResponseError):\nE       Failed: DID NOT RAISE <class 'aiohttp.client_exceptions.ClientResponseError'>\n\ntests\\test_cli.py:28: Failed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_download",
      "lineno": 31,
      "outcome": "failed",
      "keywords": [
        "test_download",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_cli.py",
          "lineno": 37,
          "message": "AssertionError: assert 'File was suc...downloaded.\\n' == 'Could not download file.\\n'\n  \n  - Could not download file.\n  + File was successfully downloaded."
        },
        "traceback": [
          {
            "path": "tests\\test_cli.py",
            "lineno": 37,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_cli.TestUnpywallCli object at 0x0000025F706DE090>\ncapfd = <_pytest.capture.CaptureFixture object at 0x0000025F7091BD40>\n\n    def test_download(self, capfd):\n    \n        bad_doi = 'bad_doi'\n        main(test_args=['download', bad_doi])\n        captured = capfd.readouterr()\n>       assert captured.out == 'Could not download file.\\n'\nE       AssertionError: assert 'File was suc...downloaded.\\n' == 'Could not download file.\\n'\nE         \nE         - Could not download file.\nE         + File was successfully downloaded.\n\ntests\\test_cli.py:37: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_link",
      "lineno": 43,
      "outcome": "failed",
      "keywords": [
        "test_link",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\unpywall\\__main__.py",
          "lineno": 196,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'"
        },
        "traceback": [
          {
            "path": "tests\\test_cli.py",
            "lineno": 52,
            "message": ""
          },
          {
            "path": "unpywall\\__main__.py",
            "lineno": 56,
            "message": "in __init__"
          },
          {
            "path": "unpywall\\__main__.py",
            "lineno": 196,
            "message": "AttributeError"
          }
        ],
        "stdout": "usage: __main__.py [-b \b] doi\n\nThis command returns a link to an OA pdf (if available).\n\npositional arguments:\n  doi                \tThe DOI of the document.\n\noptions:\n  -b \b, --backend \b  \tThe backend you want to use.\n",
        "stderr": "error: the following arguments are required: doi\n\n",
        "longrepr": "self = <tests.test_cli.TestUnpywallCli object at 0x0000025F706DE330>\n\n    def test_link(self):\n        with pytest.raises(SystemExit) as pytest_raise_system_exit:\n            main(test_args=['link'])\n    \n            assert pytest_raise_system_exit.value.code == 2\n    \n        with pytest.raises(ClientResponseError):\n            bad_doi = 'bad_doi'\n>           main(test_args=['link', bad_doi])\n\ntests\\test_cli.py:52: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\__main__.py:56: in __init__\n    getattr(self, args.command)()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <[TypeError('__repr__ returned non-string (type NoneType)') raised in repr()] main object at 0x25f709cc0b0>\n\n    def link(self) -> None:\n        ap = UnpywallArgumentParser(description=('This command returns a link'\n                                                 ' to an OA pdf'\n                                                 ' (if available).'),\n                                    formatter_class=RawTextHelpFormatter,\n                                    add_help=False)\n        ap.add_argument('doi',\n                        type=str,\n                        metavar='doi',\n                        help='\\tThe DOI of the document.')\n        ap.add_argument('-b',\n                        '--backend',\n                        type=str,\n                        default='remote',\n                        dest='backend',\n                        choices=['remote', 'cache', 'snapshot'],\n                        metavar='\\b',\n                        help='\\tThe backend you want to use.')\n        ap.add_argument('-h',\n                        '--help',\n                        action='help',\n                        default=SUPPRESS,\n                        help=SUPPRESS)\n    \n        if self.test_args:\n            args = ap.parse_args(self.test_args[1:])\n        else:\n            args = ap.parse_args(sys.argv[2:])\n    \n>       print(Unpywall.get_pdf_link(args.doi))\nE       AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'\n\nunpywall\\__main__.py:196: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_init_cache",
      "lineno": 24,
      "outcome": "passed",
      "keywords": [
        "test_init_cache",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_validate_dois",
      "lineno": 39,
      "outcome": "passed",
      "keywords": [
        "test_validate_dois",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_df",
      "lineno": 58,
      "outcome": "failed",
      "keywords": [
        "test_get_df",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\.venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py",
          "lineno": 445,
          "message": "NotImplementedError"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 72,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 102,
            "message": "in _get_df"
          },
          {
            "path": ".venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py",
            "lineno": 445,
            "message": "NotImplementedError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000025F708C6150>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    async def test_get_df(self, Unpywall):\n    \n        data = await Unpywall.get_json(doi='10.1016/j.tmaid.2020.101663',\n                                       errors='raise')\n    \n        with pytest.raises(ValueError,\n                           match=('The argument format only accepts the'\n                                  ' values \"raw\" and \"extended\"')):\n            assert Unpywall._get_df(data=data,\n                                    format='not a valid format',\n                                    errors='raise')\n    \n>       df_raw = Unpywall._get_df(data=data,\n                                  format='raw',\n                                  errors='ignore')\n\ntests\\test_unpywall.py:72: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\__init__.py:102: in _get_df\n    df = pd.json_normalize(data=data, max_level=1, errors=errors)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndata = None, record_path = None, meta = None, meta_prefix = None\nrecord_prefix = None, errors = 'ignore', sep = '.', max_level = 1\n\n    def json_normalize(\n        data: dict | list[dict],\n        record_path: str | list | None = None,\n        meta: str | list[str | list[str]] | None = None,\n        meta_prefix: str | None = None,\n        record_prefix: str | None = None,\n        errors: IgnoreRaise = \"raise\",\n        sep: str = \".\",\n        max_level: int | None = None,\n    ) -> DataFrame:\n        \"\"\"\n        Normalize semi-structured JSON data into a flat table.\n    \n        Parameters\n        ----------\n        data : dict or list of dicts\n            Unserialized JSON objects.\n        record_path : str or list of str, default None\n            Path in each object to list of records. If not passed, data will be\n            assumed to be an array of records.\n        meta : list of paths (str or list of str), default None\n            Fields to use as metadata for each record in resulting table.\n        meta_prefix : str, default None\n            If True, prefix records with dotted (?) path, e.g. foo.bar.field if\n            meta is ['foo', 'bar'].\n        record_prefix : str, default None\n            If True, prefix records with dotted (?) path, e.g. foo.bar.field if\n            path to records is ['foo', 'bar'].\n        errors : {'raise', 'ignore'}, default 'raise'\n            Configures error handling.\n    \n            * 'ignore' : will ignore KeyError if keys listed in meta are not\n              always present.\n            * 'raise' : will raise KeyError if keys listed in meta are not\n              always present.\n        sep : str, default '.'\n            Nested records will generate names separated by sep.\n            e.g., for sep='.', {'foo': {'bar': 0}} -> foo.bar.\n        max_level : int, default None\n            Max number of levels(depth of dict) to normalize.\n            if None, normalizes all levels.\n    \n        Returns\n        -------\n        frame : DataFrame\n        Normalize semi-structured JSON data into a flat table.\n    \n        Examples\n        --------\n        >>> data = [\n        ...     {\"id\": 1, \"name\": {\"first\": \"Coleen\", \"last\": \"Volk\"}},\n        ...     {\"name\": {\"given\": \"Mark\", \"family\": \"Regner\"}},\n        ...     {\"id\": 2, \"name\": \"Faye Raker\"},\n        ... ]\n        >>> pd.json_normalize(data)\n            id name.first name.last name.given name.family        name\n        0  1.0     Coleen      Volk        NaN         NaN         NaN\n        1  NaN        NaN       NaN       Mark      Regner         NaN\n        2  2.0        NaN       NaN        NaN         NaN  Faye Raker\n    \n        >>> data = [\n        ...     {\n        ...         \"id\": 1,\n        ...         \"name\": \"Cole Volk\",\n        ...         \"fitness\": {\"height\": 130, \"weight\": 60},\n        ...     },\n        ...     {\"name\": \"Mark Reg\", \"fitness\": {\"height\": 130, \"weight\": 60}},\n        ...     {\n        ...         \"id\": 2,\n        ...         \"name\": \"Faye Raker\",\n        ...         \"fitness\": {\"height\": 130, \"weight\": 60},\n        ...     },\n        ... ]\n        >>> pd.json_normalize(data, max_level=0)\n            id        name                        fitness\n        0  1.0   Cole Volk  {'height': 130, 'weight': 60}\n        1  NaN    Mark Reg  {'height': 130, 'weight': 60}\n        2  2.0  Faye Raker  {'height': 130, 'weight': 60}\n    \n        Normalizes nested data up to level 1.\n    \n        >>> data = [\n        ...     {\n        ...         \"id\": 1,\n        ...         \"name\": \"Cole Volk\",\n        ...         \"fitness\": {\"height\": 130, \"weight\": 60},\n        ...     },\n        ...     {\"name\": \"Mark Reg\", \"fitness\": {\"height\": 130, \"weight\": 60}},\n        ...     {\n        ...         \"id\": 2,\n        ...         \"name\": \"Faye Raker\",\n        ...         \"fitness\": {\"height\": 130, \"weight\": 60},\n        ...     },\n        ... ]\n        >>> pd.json_normalize(data, max_level=1)\n            id        name  fitness.height  fitness.weight\n        0  1.0   Cole Volk             130              60\n        1  NaN    Mark Reg             130              60\n        2  2.0  Faye Raker             130              60\n    \n        >>> data = [\n        ...     {\n        ...         \"state\": \"Florida\",\n        ...         \"shortname\": \"FL\",\n        ...         \"info\": {\"governor\": \"Rick Scott\"},\n        ...         \"counties\": [\n        ...             {\"name\": \"Dade\", \"population\": 12345},\n        ...             {\"name\": \"Broward\", \"population\": 40000},\n        ...             {\"name\": \"Palm Beach\", \"population\": 60000},\n        ...         ],\n        ...     },\n        ...     {\n        ...         \"state\": \"Ohio\",\n        ...         \"shortname\": \"OH\",\n        ...         \"info\": {\"governor\": \"John Kasich\"},\n        ...         \"counties\": [\n        ...             {\"name\": \"Summit\", \"population\": 1234},\n        ...             {\"name\": \"Cuyahoga\", \"population\": 1337},\n        ...         ],\n        ...     },\n        ... ]\n        >>> result = pd.json_normalize(\n        ...     data, \"counties\", [\"state\", \"shortname\", [\"info\", \"governor\"]]\n        ... )\n        >>> result\n                 name  population    state shortname info.governor\n        0        Dade       12345   Florida    FL    Rick Scott\n        1     Broward       40000   Florida    FL    Rick Scott\n        2  Palm Beach       60000   Florida    FL    Rick Scott\n        3      Summit        1234   Ohio       OH    John Kasich\n        4    Cuyahoga        1337   Ohio       OH    John Kasich\n    \n        >>> data = {\"A\": [1, 2]}\n        >>> pd.json_normalize(data, \"A\", record_prefix=\"Prefix.\")\n            Prefix.0\n        0          1\n        1          2\n    \n        Returns normalized data with columns prefixed with the given string.\n        \"\"\"\n    \n        def _pull_field(\n            js: dict[str, Any], spec: list | str, extract_record: bool = False\n        ) -> Scalar | Iterable:\n            \"\"\"Internal function to pull field\"\"\"\n            result = js\n            try:\n                if isinstance(spec, list):\n                    for field in spec:\n                        if result is None:\n                            raise KeyError(field)\n                        result = result[field]\n                else:\n                    result = result[spec]\n            except KeyError as e:\n                if extract_record:\n                    raise KeyError(\n                        f\"Key {e} not found. If specifying a record_path, all elements of \"\n                        f\"data should have the path.\"\n                    ) from e\n                if errors == \"ignore\":\n                    return np.nan\n                else:\n                    raise KeyError(\n                        f\"Key {e} not found. To replace missing values of {e} with \"\n                        f\"np.nan, pass in errors='ignore'\"\n                    ) from e\n    \n            return result\n    \n        def _pull_records(js: dict[str, Any], spec: list | str) -> list:\n            \"\"\"\n            Internal function to pull field for records, and similar to\n            _pull_field, but require to return list. And will raise error\n            if has non iterable value.\n            \"\"\"\n            result = _pull_field(js, spec, extract_record=True)\n    \n            # GH 31507 GH 30145, GH 26284 if result is not list, raise TypeError if not\n            # null, otherwise return an empty list\n            if not isinstance(result, list):\n                if pd.isnull(result):\n                    result = []\n                else:\n                    raise TypeError(\n                        f\"{js} has non list value {result} for path {spec}. \"\n                        \"Must be list or null.\"\n                    )\n            return result\n    \n        if isinstance(data, list) and not data:\n            return DataFrame()\n        elif isinstance(data, dict):\n            # A bit of a hackjob\n            data = [data]\n        elif isinstance(data, abc.Iterable) and not isinstance(data, str):\n            # GH35923 Fix pd.json_normalize to not skip the first element of a\n            # generator input\n            data = list(data)\n        else:\n>           raise NotImplementedError\nE           NotImplementedError\n\n.venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py:445: NotImplementedError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_doi",
      "lineno": 83,
      "outcome": "failed",
      "keywords": [
        "test_doi",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_unpywall.py",
          "lineno": 87,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'doi'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 87,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000025F708C6330>\nUnpywall = <class 'unpywall.Unpywall'>\ncapfd = <_pytest.capture.CaptureFixture object at 0x0000025F709CF710>\n\n    @pytest.mark.asyncio\n    async def test_doi(self, Unpywall, capfd):\n    \n>       df = await Unpywall.doi(dois=['10.1038/nature12373'],\n                                format='raw',\n                                progress=True,\n                                errors='ignore')\nE       AttributeError: type object 'Unpywall' has no attribute 'doi'\n\ntests\\test_unpywall.py:87: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_query",
      "lineno": 102,
      "outcome": "failed",
      "keywords": [
        "test_query",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_unpywall.py",
          "lineno": 106,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'query'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 106,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000025F708C6570>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    async def test_query(self, Unpywall):\n    \n>       df = await Unpywall.query(query='test',\n                                  is_oa=True,\n                                  errors='ignore')\nE       AttributeError: type object 'Unpywall' has no attribute 'query'\n\ntests\\test_unpywall.py:106: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_json",
      "lineno": 111,
      "outcome": "failed",
      "keywords": [
        "test_get_json",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_unpywall.py",
          "lineno": 115,
          "message": "Failed: DID NOT RAISE <class 'aiohttp.client_exceptions.ClientResponseError'>"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 115,
            "message": "Failed"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000025F708C67B0>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    async def test_get_json(self, Unpywall):\n    \n>       with pytest.raises(ClientResponseError):\nE       Failed: DID NOT RAISE <class 'aiohttp.client_exceptions.ClientResponseError'>\n\ntests\\test_unpywall.py:115: Failed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_pdf_link",
      "lineno": 134,
      "outcome": "failed",
      "keywords": [
        "test_get_pdf_link",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_unpywall.py",
          "lineno": 138,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 138,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000025F708C69F0>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    async def test_get_pdf_link(self, Unpywall):\n    \n>       assert isinstance(await Unpywall.get_pdf_link('10.1038/nature12373'), str)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'\n\ntests\\test_unpywall.py:138: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_doc_link",
      "lineno": 139,
      "outcome": "failed",
      "keywords": [
        "test_get_doc_link",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_unpywall.py",
          "lineno": 144,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_doc_link'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 144,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000025F708C6C30>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    async def test_get_doc_link(self, Unpywall):\n    \n        assert isinstance(\n>           await Unpywall.get_doc_link('10.1016/j.tmaid.2020.101663'), str)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_doc_link'\n\ntests\\test_unpywall.py:144: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_all_links",
      "lineno": 145,
      "outcome": "failed",
      "keywords": [
        "test_get_all_links",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_unpywall.py",
          "lineno": 150,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_all_links'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 150,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000025F708C6E40>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    async def test_get_all_links(self, Unpywall):\n    \n        assert isinstance(\n>           await Unpywall.get_all_links('10.1016/j.tmaid.2020.101663'), list)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_all_links'\n\ntests\\test_unpywall.py:150: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_handle",
      "lineno": 151,
      "outcome": "failed",
      "keywords": [
        "test_download_pdf_handle",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\unpywall\\__init__.py",
          "lineno": 135,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 156,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 135,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000025F708C7080>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    async def test_download_pdf_handle(self, Unpywall):\n    \n        assert isinstance(\n>           await Unpywall.download_pdf_handle('10.1038/nature12373'), BytesIO)\n\ntests\\test_unpywall.py:156: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndoi = '10.1038/nature12373'\n\n    @staticmethod\n    async def download_pdf_handle(doi: str) -> BytesIO:\n>       pdf_link = await Unpywall.get_pdf_link(doi)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'\n\nunpywall\\__init__.py:135: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_progress",
      "lineno": 157,
      "outcome": "passed",
      "keywords": [
        "test_progress",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_view_pdf",
      "lineno": 162,
      "outcome": "passed",
      "keywords": [
        "test_view_pdf",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_file",
      "lineno": 166,
      "outcome": "failed",
      "keywords": [
        "test_download_pdf_file",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\unpywall\\__init__.py",
          "lineno": 180,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 173,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 180,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000025F708C7710>\nUnpywall = <class 'unpywall.Unpywall'>\ncapfd = <_pytest.capture.CaptureFixture object at 0x0000025F7097BEF0>\n\n    @pytest.mark.asyncio\n    async def test_download_pdf_file(self, Unpywall, capfd):\n    \n        filename = 'test.pdf'\n        filepath = './test_dir'\n    \n>       await Unpywall.download_pdf_file('10.1038/nature12373',\n                                         filename=filename,\n                                         filepath=filepath,\n                                         progress=True)\n\ntests\\test_unpywall.py:173: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndoi = '10.1038/nature12373', filename = 'test.pdf', filepath = './test_dir'\nprogress = True\n\n    @staticmethod\n    async def download_pdf_file(doi: str,\n                                 filename: str,\n                                 filepath: str = '.',\n                                 progress: bool = False) -> None:\n>       url = await Unpywall.get_pdf_link(doi)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'\n\nunpywall\\__init__.py:180: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallCredentials::test_validate_email",
      "lineno": 7,
      "outcome": "passed",
      "keywords": [
        "test_validate_email",
        "TestUnpywallCredentials",
        "test_utils.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallURL::test_doi_url",
      "lineno": 36,
      "outcome": "passed",
      "keywords": [
        "test_doi_url",
        "TestUnpywallURL",
        "test_utils.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallURL::test_query_url",
      "lineno": 44,
      "outcome": "passed",
      "keywords": [
        "test_query_url",
        "TestUnpywallURL",
        "test_utils.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    }
  ],
  "warnings": [
    {
      "message": "coroutine 'UnpywallCache.get' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_cache.py",
      "lineno": 61
    },
    {
      "message": "coroutine 'Unpywall.view_pdf' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\unpywall\\__main__.py",
      "lineno": 105
    },
    {
      "message": "coroutine 'Unpywall.download_pdf_file' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\unpywall\\__main__.py",
      "lineno": 159
    },
    {
      "message": "coroutine 'UnpywallCache.get' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_unpywall.py",
      "lineno": 62
    },
    {
      "message": "coroutine 'UnpywallCache.get' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__aiohttp\\tests\\test_unpywall.py",
      "lineno": 116
    }
  ]
}