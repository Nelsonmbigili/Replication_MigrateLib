{
  "exitcode": 1,
  "summary": {
    "failed": 6,
    "passed": 1,
    "total": 7,
    "collected": 7
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": ".",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "lambdas/v1/generate_badge",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "lambdas/v1",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "lambdas/v1/generate_badge",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "lambdas/v2/generate_badge/fonts",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "lambdas/v2/generate_badge",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "lambdas/v2/generate_badge/fonts",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "lambdas/v2",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "lambdas/v2/generate_badge",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "lambdas",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "lambdas/v1",
          "type": "Dir"
        },
        {
          "nodeid": "lambdas/v2",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "layers/util_layer/python",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "layers/util_layer",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "layers/util_layer/python",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "layers",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "layers/util_layer",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "terraform/modules/role",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "terraform/modules",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "terraform/modules/role",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "terraform",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "terraform/modules",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::test_get_user_data[tourist-True]",
          "type": "Function",
          "lineno": 5
        },
        {
          "nodeid": "tests/test_utils.py::test_get_user_data[junah-True]",
          "type": "Function",
          "lineno": 5
        },
        {
          "nodeid": "tests/test_utils.py::test_get_user_data[invalid_username_20240701-False]",
          "type": "Function",
          "lineno": 5
        }
      ]
    },
    {
      "nodeid": "tests/test_v1_generate_badge.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_v1_generate_badge.py::test_v1_generate_badge[tourist]",
          "type": "Function",
          "lineno": 5
        },
        {
          "nodeid": "tests/test_v1_generate_badge.py::test_v1_generate_badge[junah]",
          "type": "Function",
          "lineno": 5
        }
      ]
    },
    {
      "nodeid": "tests/test_v2_generate_badge.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_v2_generate_badge.py::test_v2_generate_badge[tourist]",
          "type": "Function",
          "lineno": 5
        },
        {
          "nodeid": "tests/test_v2_generate_badge.py::test_v2_generate_badge[junah]",
          "type": "Function",
          "lineno": 5
        }
      ]
    },
    {
      "nodeid": "tests",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_v1_generate_badge.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_v2_generate_badge.py",
          "type": "Module"
        }
      ]
    },
    {
      "nodeid": ".",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "lambdas",
          "type": "Dir"
        },
        {
          "nodeid": "layers",
          "type": "Dir"
        },
        {
          "nodeid": "terraform",
          "type": "Dir"
        },
        {
          "nodeid": "tests",
          "type": "Package"
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/test_utils.py::test_get_user_data[tourist-True]",
      "lineno": 5,
      "outcome": "failed",
      "keywords": [
        "test_get_user_data[tourist-True]",
        "parametrize",
        "pytestmark",
        "tourist-True",
        "test_utils.py",
        "tests",
        "junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery\\layers\\util_layer\\python\\utils.py",
          "lineno": 81,
          "message": "ValueError: invalid literal for int() with base 10: '4229 \u2015 King (+171 to promote)'"
        },
        "traceback": [
          {
            "path": "tests\\test_utils.py",
            "lineno": 24,
            "message": ""
          },
          {
            "path": "layers\\util_layer\\python\\utils.py",
            "lineno": 81,
            "message": "ValueError"
          }
        ],
        "longrepr": "username = 'tourist', is_valid = True\n\n    @pytest.mark.parametrize(\n        \"username, is_valid\",\n        [\n            (\n                \"tourist\",\n                True\n            ),\n            (\n                \"junah\",\n                True\n            ),\n            (\n                \"invalid_username_20240701\",\n                False\n            )\n        ]\n    )\n    def test_get_user_data(username, is_valid):\n>       user_data = get_user_data(username)\n\ntests\\test_utils.py:24: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nusername = 'tourist'\n\n    def get_user_data(username: str) -> Optional[UserData]:\n        \"\"\"Get user data from atcoder\"\"\"\n        url = f\"https://atcoder.jp/users/{username}\"\n        response = requests.get(url)\n    \n        doc = pq(response.text)\n    \n        # user not found\n        if doc.find(\"div.alert.alert-danger\"):\n            return None\n    \n        user_data = doc(\"table.dl-table.mt-2 > tr\")\n    \n        # user is unrated\n        if not user_data:\n            return UserData(username, \"Unrated\", 0, 0, \"Unrated\", 0)\n    \n        rank = pq(user_data.eq(0))(\"td\").text()\n        rating = int(pq(user_data.eq(1))(\"td > span\").text())\n>       highest_rating = int(pq(user_data.eq(2))(\"td > span\").text())\nE       ValueError: invalid literal for int() with base 10: '4229 \u2015 King (+171 to promote)'\n\nlayers\\util_layer\\python\\utils.py:81: ValueError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::test_get_user_data[junah-True]",
      "lineno": 5,
      "outcome": "failed",
      "keywords": [
        "test_get_user_data[junah-True]",
        "parametrize",
        "pytestmark",
        "junah-True",
        "test_utils.py",
        "tests",
        "junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery\\layers\\util_layer\\python\\utils.py",
          "lineno": 81,
          "message": "ValueError: invalid literal for int() with base 10: '1022 \u2015 5 Kyu (+178 to promote)'"
        },
        "traceback": [
          {
            "path": "tests\\test_utils.py",
            "lineno": 24,
            "message": ""
          },
          {
            "path": "layers\\util_layer\\python\\utils.py",
            "lineno": 81,
            "message": "ValueError"
          }
        ],
        "longrepr": "username = 'junah', is_valid = True\n\n    @pytest.mark.parametrize(\n        \"username, is_valid\",\n        [\n            (\n                \"tourist\",\n                True\n            ),\n            (\n                \"junah\",\n                True\n            ),\n            (\n                \"invalid_username_20240701\",\n                False\n            )\n        ]\n    )\n    def test_get_user_data(username, is_valid):\n>       user_data = get_user_data(username)\n\ntests\\test_utils.py:24: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nusername = 'junah'\n\n    def get_user_data(username: str) -> Optional[UserData]:\n        \"\"\"Get user data from atcoder\"\"\"\n        url = f\"https://atcoder.jp/users/{username}\"\n        response = requests.get(url)\n    \n        doc = pq(response.text)\n    \n        # user not found\n        if doc.find(\"div.alert.alert-danger\"):\n            return None\n    \n        user_data = doc(\"table.dl-table.mt-2 > tr\")\n    \n        # user is unrated\n        if not user_data:\n            return UserData(username, \"Unrated\", 0, 0, \"Unrated\", 0)\n    \n        rank = pq(user_data.eq(0))(\"td\").text()\n        rating = int(pq(user_data.eq(1))(\"td > span\").text())\n>       highest_rating = int(pq(user_data.eq(2))(\"td > span\").text())\nE       ValueError: invalid literal for int() with base 10: '1022 \u2015 5 Kyu (+178 to promote)'\n\nlayers\\util_layer\\python\\utils.py:81: ValueError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::test_get_user_data[invalid_username_20240701-False]",
      "lineno": 5,
      "outcome": "passed",
      "keywords": [
        "test_get_user_data[invalid_username_20240701-False]",
        "parametrize",
        "pytestmark",
        "invalid_username_20240701-False",
        "test_utils.py",
        "tests",
        "junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_v1_generate_badge.py::test_v1_generate_badge[tourist]",
      "lineno": 5,
      "outcome": "failed",
      "keywords": [
        "test_v1_generate_badge[tourist]",
        "parametrize",
        "pytestmark",
        "tourist",
        "test_v1_generate_badge.py",
        "tests",
        "junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery\\layers\\util_layer\\python\\utils.py",
          "lineno": 81,
          "message": "ValueError: invalid literal for int() with base 10: '4229 \u2015 King (+171 to promote)'"
        },
        "traceback": [
          {
            "path": "tests\\test_v1_generate_badge.py",
            "lineno": 18,
            "message": ""
          },
          {
            "path": "lambdas\\v1\\generate_badge\\main.py",
            "lineno": 192,
            "message": "in lambda_handler"
          },
          {
            "path": "layers\\util_layer\\python\\utils.py",
            "lineno": 81,
            "message": "ValueError"
          }
        ],
        "longrepr": "username = 'tourist'\n\n    @pytest.mark.parametrize(\n        \"username\",\n        [\n            (\n                \"tourist\"\n            ),\n            (\n                \"junah\"\n            )\n        ]\n    )\n    def test_v1_generate_badge(username):\n>       response = lambda_handler(\n            {\n                \"queryStringParameters\": {\n                    \"name\": username\n                }\n            },\n            {}\n        )\n\ntests\\test_v1_generate_badge.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nlambdas\\v1\\generate_badge\\main.py:192: in lambda_handler\n    user_data = utils.get_user_data(username)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nusername = 'tourist'\n\n    def get_user_data(username: str) -> Optional[UserData]:\n        \"\"\"Get user data from atcoder\"\"\"\n        url = f\"https://atcoder.jp/users/{username}\"\n        response = requests.get(url)\n    \n        doc = pq(response.text)\n    \n        # user not found\n        if doc.find(\"div.alert.alert-danger\"):\n            return None\n    \n        user_data = doc(\"table.dl-table.mt-2 > tr\")\n    \n        # user is unrated\n        if not user_data:\n            return UserData(username, \"Unrated\", 0, 0, \"Unrated\", 0)\n    \n        rank = pq(user_data.eq(0))(\"td\").text()\n        rating = int(pq(user_data.eq(1))(\"td > span\").text())\n>       highest_rating = int(pq(user_data.eq(2))(\"td > span\").text())\nE       ValueError: invalid literal for int() with base 10: '4229 \u2015 King (+171 to promote)'\n\nlayers\\util_layer\\python\\utils.py:81: ValueError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_v1_generate_badge.py::test_v1_generate_badge[junah]",
      "lineno": 5,
      "outcome": "failed",
      "keywords": [
        "test_v1_generate_badge[junah]",
        "parametrize",
        "pytestmark",
        "junah",
        "test_v1_generate_badge.py",
        "tests",
        "junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery\\layers\\util_layer\\python\\utils.py",
          "lineno": 81,
          "message": "ValueError: invalid literal for int() with base 10: '1022 \u2015 5 Kyu (+178 to promote)'"
        },
        "traceback": [
          {
            "path": "tests\\test_v1_generate_badge.py",
            "lineno": 18,
            "message": ""
          },
          {
            "path": "lambdas\\v1\\generate_badge\\main.py",
            "lineno": 192,
            "message": "in lambda_handler"
          },
          {
            "path": "layers\\util_layer\\python\\utils.py",
            "lineno": 81,
            "message": "ValueError"
          }
        ],
        "longrepr": "username = 'junah'\n\n    @pytest.mark.parametrize(\n        \"username\",\n        [\n            (\n                \"tourist\"\n            ),\n            (\n                \"junah\"\n            )\n        ]\n    )\n    def test_v1_generate_badge(username):\n>       response = lambda_handler(\n            {\n                \"queryStringParameters\": {\n                    \"name\": username\n                }\n            },\n            {}\n        )\n\ntests\\test_v1_generate_badge.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nlambdas\\v1\\generate_badge\\main.py:192: in lambda_handler\n    user_data = utils.get_user_data(username)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nusername = 'junah'\n\n    def get_user_data(username: str) -> Optional[UserData]:\n        \"\"\"Get user data from atcoder\"\"\"\n        url = f\"https://atcoder.jp/users/{username}\"\n        response = requests.get(url)\n    \n        doc = pq(response.text)\n    \n        # user not found\n        if doc.find(\"div.alert.alert-danger\"):\n            return None\n    \n        user_data = doc(\"table.dl-table.mt-2 > tr\")\n    \n        # user is unrated\n        if not user_data:\n            return UserData(username, \"Unrated\", 0, 0, \"Unrated\", 0)\n    \n        rank = pq(user_data.eq(0))(\"td\").text()\n        rating = int(pq(user_data.eq(1))(\"td > span\").text())\n>       highest_rating = int(pq(user_data.eq(2))(\"td > span\").text())\nE       ValueError: invalid literal for int() with base 10: '1022 \u2015 5 Kyu (+178 to promote)'\n\nlayers\\util_layer\\python\\utils.py:81: ValueError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_v2_generate_badge.py::test_v2_generate_badge[tourist]",
      "lineno": 5,
      "outcome": "failed",
      "keywords": [
        "test_v2_generate_badge[tourist]",
        "parametrize",
        "pytestmark",
        "tourist",
        "test_v2_generate_badge.py",
        "tests",
        "junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery\\layers\\util_layer\\python\\utils.py",
          "lineno": 81,
          "message": "ValueError: invalid literal for int() with base 10: '4229 \u2015 King (+171 to promote)'"
        },
        "traceback": [
          {
            "path": "tests\\test_v2_generate_badge.py",
            "lineno": 18,
            "message": ""
          },
          {
            "path": "lambdas\\v2\\generate_badge\\main.py",
            "lineno": 162,
            "message": "in lambda_handler"
          },
          {
            "path": "layers\\util_layer\\python\\utils.py",
            "lineno": 81,
            "message": "ValueError"
          }
        ],
        "longrepr": "username = 'tourist'\n\n    @pytest.mark.parametrize(\n        \"username\",\n        [\n            (\n                \"tourist\"\n            ),\n            (\n                \"junah\"\n            )\n        ]\n    )\n    def test_v2_generate_badge(username):\n>       response = lambda_handler(\n            {\n                \"queryStringParameters\": {\n                    \"name\": username\n                }\n            },\n            {}\n        )\n\ntests\\test_v2_generate_badge.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nlambdas\\v2\\generate_badge\\main.py:162: in lambda_handler\n    user_data = utils.get_user_data(username)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nusername = 'tourist'\n\n    def get_user_data(username: str) -> Optional[UserData]:\n        \"\"\"Get user data from atcoder\"\"\"\n        url = f\"https://atcoder.jp/users/{username}\"\n        response = requests.get(url)\n    \n        doc = pq(response.text)\n    \n        # user not found\n        if doc.find(\"div.alert.alert-danger\"):\n            return None\n    \n        user_data = doc(\"table.dl-table.mt-2 > tr\")\n    \n        # user is unrated\n        if not user_data:\n            return UserData(username, \"Unrated\", 0, 0, \"Unrated\", 0)\n    \n        rank = pq(user_data.eq(0))(\"td\").text()\n        rating = int(pq(user_data.eq(1))(\"td > span\").text())\n>       highest_rating = int(pq(user_data.eq(2))(\"td > span\").text())\nE       ValueError: invalid literal for int() with base 10: '4229 \u2015 King (+171 to promote)'\n\nlayers\\util_layer\\python\\utils.py:81: ValueError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_v2_generate_badge.py::test_v2_generate_badge[junah]",
      "lineno": 5,
      "outcome": "failed",
      "keywords": [
        "test_v2_generate_badge[junah]",
        "parametrize",
        "pytestmark",
        "junah",
        "test_v2_generate_badge.py",
        "tests",
        "junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\junah201@atcoder-readme-stats__c41ed032__beautifulsoup4__pyquery\\layers\\util_layer\\python\\utils.py",
          "lineno": 81,
          "message": "ValueError: invalid literal for int() with base 10: '1022 \u2015 5 Kyu (+178 to promote)'"
        },
        "traceback": [
          {
            "path": "tests\\test_v2_generate_badge.py",
            "lineno": 18,
            "message": ""
          },
          {
            "path": "lambdas\\v2\\generate_badge\\main.py",
            "lineno": 162,
            "message": "in lambda_handler"
          },
          {
            "path": "layers\\util_layer\\python\\utils.py",
            "lineno": 81,
            "message": "ValueError"
          }
        ],
        "longrepr": "username = 'junah'\n\n    @pytest.mark.parametrize(\n        \"username\",\n        [\n            (\n                \"tourist\"\n            ),\n            (\n                \"junah\"\n            )\n        ]\n    )\n    def test_v2_generate_badge(username):\n>       response = lambda_handler(\n            {\n                \"queryStringParameters\": {\n                    \"name\": username\n                }\n            },\n            {}\n        )\n\ntests\\test_v2_generate_badge.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nlambdas\\v2\\generate_badge\\main.py:162: in lambda_handler\n    user_data = utils.get_user_data(username)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nusername = 'junah'\n\n    def get_user_data(username: str) -> Optional[UserData]:\n        \"\"\"Get user data from atcoder\"\"\"\n        url = f\"https://atcoder.jp/users/{username}\"\n        response = requests.get(url)\n    \n        doc = pq(response.text)\n    \n        # user not found\n        if doc.find(\"div.alert.alert-danger\"):\n            return None\n    \n        user_data = doc(\"table.dl-table.mt-2 > tr\")\n    \n        # user is unrated\n        if not user_data:\n            return UserData(username, \"Unrated\", 0, 0, \"Unrated\", 0)\n    \n        rank = pq(user_data.eq(0))(\"td\").text()\n        rating = int(pq(user_data.eq(1))(\"td > span\").text())\n>       highest_rating = int(pq(user_data.eq(2))(\"td > span\").text())\nE       ValueError: invalid literal for int() with base 10: '1022 \u2015 5 Kyu (+178 to promote)'\n\nlayers\\util_layer\\python\\utils.py:81: ValueError"
      },
      "teardown": {
        "outcome": "passed"
      }
    }
  ]
}