mig: segmentio@analytics-python__603632f3__requests__aiohttp__603632f3__requests__aiohttp
repo: segmentio@analytics-python__603632f3__requests__aiohttp
commit: 603632f3aa57965c694209c3e8470d935e443b60
source: requests
target: aiohttp
premig:
  name: premig
  status: finished
  source_version: 2.32.3
  target_version: 3.11.16
  finished_at: '2025-04-22 16:34:19'
  project_coverage: 93.76012965964344
  total_tests: 79
  passed_tests: 78
llmmig:
  name: llmmig
  base_round: premig
  status: finished
  project_change_coverage: 57.142857142857146
  files:
  - path: segment/analytics/oauth_manager.py
    file_change_coverage: 34.54545454545455
    covered_changed_lines: 3,6,33,36,38-39,45,48,57,62,87-88,95,99,104,108-110,112
    uncovered_changed_lines: 42,44,55-56,58-59,67,89-94,96-98,115,123,126,130-131,136,146,159,161,164,169-170,173,175,179,184-185,187,190-191
  - path: segment/analytics/request.py
    file_change_coverage: 62.5
    covered_changed_lines: 7-8,14,43-44,46-52,64-66
    uncovered_changed_lines: 54-55,57-63
  - path: segment/analytics/test/test_oauth.py
    file_change_coverage: 61.111111111111114
    covered_changed_lines: 5-6,9,13,44,79-81,83,90-91,94,99-100,103,108-110,112,115,122-123,126,131-132,135,140-142,145,150-151,154
    uncovered_changed_lines: 46,49,51,53,57,59,61,63,68-69,71,75-76,125,127,134,136,144,146,153,155
  - path: segment/analytics/test/test_request.py
    file_change_coverage: 100.0
    covered_changed_lines: 4-5,10,12-13,18,20-22,24-26,40-41,46,48-50,56-57,63
    uncovered_changed_lines: ''
  test_diffs:
  - test_id: segment/analytics/test/test_consumer.py::TestConsumer::test_max_batch_size
    before: passed
    after: failed
    failed_phase: call
    exception: ModuleNotFoundError
    error_message: 'ModuleNotFoundError: No module named ''segment.analytics.request._session'';
      ''segment.analytics.request'' is not a package'
  - test_id: segment/analytics/test/test_oauth.py::TestOauthIntegration::test_oauth_integration_fail_bad_key
    before: passed
    after: failed
    failed_phase: call
    exception: TypeError
    error_message: 'TypeError: object tuple can''t be used in ''await'' expression'
  - test_id: segment/analytics/test/test_oauth.py::TestOauthIntegration::test_oauth_integration_failure
    before: passed
    after: failed
    failed_phase: call
    exception: TypeError
    error_message: 'TypeError: object tuple can''t be used in ''await'' expression'
  - test_id: segment/analytics/test/test_oauth.py::TestOauthIntegration::test_oauth_integration_success
    before: passed
    after: failed
    failed_phase: call
    exception: TypeError
    error_message: 'TypeError: object tuple can''t be used in ''await'' expression'
  - test_id: segment/analytics/test/test_oauth.py::TestOauthManager::test_oauth_fail_unrecoverably
    before: passed
    after: failed
    failed_phase: call
    exception: AttributeError
    error_message: 'AttributeError: ''OauthManager'' object has no attribute ''thread'''
  - test_id: segment/analytics/test/test_oauth.py::TestOauthManager::test_oauth_fail_with_retries
    before: passed
    after: failed
    failed_phase: call
    exception: AttributeError
    error_message: 'AttributeError: ''OauthManager'' object has no attribute ''thread'''
  - test_id: segment/analytics/test/test_oauth.py::TestOauthManager::test_oauth_rate_limit_delay
    before: passed
    after: failed
    failed_phase: call
    exception: AssertionError
    error_message: "AssertionError: expected call not found.\nExpected: sleep(234)\n\
      \  Actual: not called."
  - test_id: segment/analytics/test/test_oauth.py::TestOauthManager::test_oauth_success
    before: passed
    after: failed
    failed_phase: call
    exception: FatalError
    error_message: 'segment.analytics.consumer.FatalError: [Segment] ''coroutine''
      object does not support the asynchronous context manager protocol)'
merge_skipped:
  name: merge_skipped
  base_round: llmmig
  status: finished - no files to migrate
  project_change_coverage: 0
  files: []
  test_diffs: []
async_transform:
  name: async_transform
  base_round: llmmig
  status: finished
  project_change_coverage: 57.80346820809248
  files:
  - path: segment/analytics/__init__.py
    file_change_coverage: 53.333333333333336
    covered_changed_lines: 30,35,40,45,50,55,60,76
    uncovered_changed_lines: 32,37,42,47,52,57,62
  - path: segment/analytics/client.py
    file_change_coverage: 40.0
    covered_changed_lines: 120,141,163,165,184,208,237,266
    uncovered_changed_lines: 139-140,164,182-183,206-207,235-236,264-265,306
  - path: segment/analytics/test/test_module.py
    file_change_coverage: 53.57142857142857
    covered_changed_lines: 4,25-26,30-31,35-36,40-41,45-46,50-51,55-56
    uncovered_changed_lines: 27-28,32-33,37-38,42-43,47-48,52-53,57
  - path: segment/analytics/request.py
    file_change_coverage: 60.0
    covered_changed_lines: 7-8,14,43-44,46-52,64-66
    uncovered_changed_lines: 24,54-55,57-63
  - path: segment/analytics/oauth_manager.py
    file_change_coverage: 34.54545454545455
    covered_changed_lines: 3,6,33,36,38-39,45,48,57,62,87-88,95,99,104,108-110,112
    uncovered_changed_lines: 42,44,55-56,58-59,67,89-94,96-98,115,123,126,130-131,136,146,159,161,164,169-170,173,175,179,184-185,187,190-191
  - path: segment/analytics/consumer.py
    file_change_coverage: 50.0
    covered_changed_lines: '140'
    uncovered_changed_lines: '141'
  - path: segment/analytics/test/test_init.py
    file_change_coverage: 60.0
    covered_changed_lines: 7,21-22,27-28,39-40,50-51,59-60,72-73,83-84
    uncovered_changed_lines: 24,31,35,43,47,54,63,76,80,87
  - path: segment/analytics/test/test_client.py
    file_change_coverage: 54.02298850574713
    covered_changed_lines: 8,27-28,42-43,56-57,70-71,94-95,108-109,132-133,144-145,168-169,178-179,189-190,215-216,225-226,251-252,263-264,277-278,286-287,299-300,309-310,319-320,334-335,342-343,369-370
    uncovered_changed_lines: 29-30,47,61,72-73,96-97,110-111,134-135,146-147,170-171,180-181,191-192,217-218,227-228,256,268,281,293-295,302,311,321-322,338-341,372-373
  - path: segment/analytics/test/test_oauth.py
    file_change_coverage: 73.01587301587301
    covered_changed_lines: 5-6,9,13,44,78,80-83,85,92-94,97,102-104,107,112-115,117,120,127-129,132-133,137-139,142-143,147-150,153-154,158-160,163-164
    uncovered_changed_lines: 46,49,51,53,57,59,61,63,68-69,71,75-76,131,141,152,162
  - path: segment/analytics/test/test_request.py
    file_change_coverage: 100.0
    covered_changed_lines: 4-5,8,11,13-15,20,22-24,26-28,42-44,49,51-54,60-62,68
    uncovered_changed_lines: ''
  test_diffs:
  - test_id: segment/analytics/test/test_consumer.py::TestConsumer::test_max_batch_size
    before: passed
    after: failed
    failed_phase: call
    exception: ModuleNotFoundError
    error_message: 'ModuleNotFoundError: No module named ''segment.analytics.request._session'';
      ''segment.analytics.request'' is not a package'
  - test_id: segment/analytics/test/test_consumer.py::TestConsumer::test_multiple_uploads_per_interval
    before: passed
    after: failed
    failed_phase: call
    exception: AssertionError
    error_message: 'AssertionError: 0 != 2'
  - test_id: segment/analytics/test/test_consumer.py::TestConsumer::test_request_retry
    before: passed
    after: failed
    failed_phase: call
    exception: AssertionError
    error_message: 'AssertionError: request() should not retry on client errors'
  - test_id: segment/analytics/test/test_consumer.py::TestConsumer::test_upload_interval
    before: passed
    after: failed
    failed_phase: call
    exception: AssertionError
    error_message: 'AssertionError: 0 != 3'
  - test_id: segment/analytics/test/test_module.py::TestModule::test_no_host
    before: passed
    after: failed
    failed_phase: call
    exception: AssertionError
    error_message: 'AssertionError: Exception not raised by track'
  - test_id: segment/analytics/test/test_module.py::TestModule::test_no_write_key
    before: passed
    after: failed
    failed_phase: call
    exception: AssertionError
    error_message: 'AssertionError: Exception not raised by track'
  - test_id: segment/analytics/test/test_oauth.py::TestOauthIntegration::test_oauth_integration_fail_bad_key
    before: passed
    after: failed
    failed_phase: call
    exception: TypeError
    error_message: 'TypeError: object NoneType can''t be used in ''await'' expression'
  - test_id: segment/analytics/test/test_oauth.py::TestOauthIntegration::test_oauth_integration_failure
    before: passed
    after: failed
    failed_phase: call
    exception: TypeError
    error_message: 'TypeError: object NoneType can''t be used in ''await'' expression'
  - test_id: segment/analytics/test/test_oauth.py::TestOauthIntegration::test_oauth_integration_success
    before: passed
    after: failed
    failed_phase: call
    exception: TypeError
    error_message: 'TypeError: object NoneType can''t be used in ''await'' expression'
  - test_id: segment/analytics/test/test_oauth.py::TestOauthManager::test_oauth_fail_unrecoverably
    before: passed
    after: failed
    failed_phase: call
    exception: AttributeError
    error_message: 'AttributeError: ''OauthManager'' object has no attribute ''thread'''
  - test_id: segment/analytics/test/test_oauth.py::TestOauthManager::test_oauth_fail_with_retries
    before: passed
    after: failed
    failed_phase: call
    exception: AttributeError
    error_message: 'AttributeError: ''OauthManager'' object has no attribute ''thread'''
  - test_id: segment/analytics/test/test_oauth.py::TestOauthManager::test_oauth_rate_limit_delay
    before: passed
    after: failed
    failed_phase: call
    exception: AssertionError
    error_message: "AssertionError: expected call not found.\nExpected: sleep(234)\n\
      \  Actual: not called."
  - test_id: segment/analytics/test/test_oauth.py::TestOauthManager::test_oauth_success
    before: passed
    after: failed
    failed_phase: call
    exception: FatalError
    error_message: 'segment.analytics.consumer.FatalError: [Segment] ''coroutine''
      object does not support the asynchronous context manager protocol)'
