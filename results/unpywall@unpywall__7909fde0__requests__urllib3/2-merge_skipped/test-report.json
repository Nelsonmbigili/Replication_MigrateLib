{
  "exitcode": 1,
  "summary": {
    "passed": 16,
    "failed": 10,
    "total": 26,
    "collected": 26
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": ".",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "docs/_static/css",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "docs/_static",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs/_static/css",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "docs/_templates",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "docs",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs/_static",
          "type": "Dir"
        },
        {
          "nodeid": "docs/_templates",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "test_dir",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_reset_cache",
          "type": "Function",
          "lineno": 40
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_delete",
          "type": "Function",
          "lineno": 45
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_timeout",
          "type": "Function",
          "lineno": 53
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_get",
          "type": "Function",
          "lineno": 63
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_save_load",
          "type": "Function",
          "lineno": 71
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_download",
          "type": "Function",
          "lineno": 87
        }
      ]
    },
    {
      "nodeid": "tests/test_cache.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_main",
          "type": "Function",
          "lineno": 10
        },
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_view",
          "type": "Function",
          "lineno": 21
        },
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_download",
          "type": "Function",
          "lineno": 31
        },
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_link",
          "type": "Function",
          "lineno": 43
        }
      ]
    },
    {
      "nodeid": "tests/test_cli.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_init_cache",
          "type": "Function",
          "lineno": 24
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_validate_dois",
          "type": "Function",
          "lineno": 39
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_df",
          "type": "Function",
          "lineno": 58
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_doi",
          "type": "Function",
          "lineno": 82
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_query",
          "type": "Function",
          "lineno": 100
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_json",
          "type": "Function",
          "lineno": 108
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_pdf_link",
          "type": "Function",
          "lineno": 130
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_doc_link",
          "type": "Function",
          "lineno": 134
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_all_links",
          "type": "Function",
          "lineno": 139
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_handle",
          "type": "Function",
          "lineno": 144
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_progress",
          "type": "Function",
          "lineno": 149
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_view_pdf",
          "type": "Function",
          "lineno": 154
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_file",
          "type": "Function",
          "lineno": 157
        }
      ]
    },
    {
      "nodeid": "tests/test_unpywall.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallCredentials",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::TestUnpywallCredentials::test_validate_email",
          "type": "Function",
          "lineno": 7
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallURL",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::TestUnpywallURL::test_doi_url",
          "type": "Function",
          "lineno": 36
        },
        {
          "nodeid": "tests/test_utils.py::TestUnpywallURL::test_query_url",
          "type": "Function",
          "lineno": 44
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::TestUnpywallCredentials",
          "type": "Class"
        },
        {
          "nodeid": "tests/test_utils.py::TestUnpywallURL",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cache.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_cli.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_unpywall.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_utils.py",
          "type": "Module"
        }
      ]
    },
    {
      "nodeid": "unpywall",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "unpywall.egg-info",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": ".",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs",
          "type": "Dir"
        },
        {
          "nodeid": "test_dir",
          "type": "Dir"
        },
        {
          "nodeid": "tests",
          "type": "Package"
        },
        {
          "nodeid": "unpywall",
          "type": "Package"
        },
        {
          "nodeid": "unpywall.egg-info",
          "type": "Dir"
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_reset_cache",
      "lineno": 40,
      "outcome": "passed",
      "keywords": [
        "test_reset_cache",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_delete",
      "lineno": 45,
      "outcome": "passed",
      "keywords": [
        "test_delete",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_timeout",
      "lineno": 53,
      "outcome": "failed",
      "keywords": [
        "test_timeout",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\socket.py",
          "lineno": 275,
          "message": "TypeError: cannot pickle 'SSLSocket' object"
        },
        "traceback": [
          {
            "path": "tests\\test_cache.py",
            "lineno": 60,
            "message": ""
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 119,
            "message": "in get"
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 140,
            "message": "in save"
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\socket.py",
            "lineno": 275,
            "message": "TypeError"
          }
        ],
        "longrepr": "self = <tests.test_cache.TestUnpywallCache object at 0x0000019C96296000>\nexample_cache = <unpywall.cache.UnpywallCache object at 0x0000019C9640E330>\n\n    def test_timeout(self, example_cache):\n        timeout = 1\n        doi = '10.1016/j.jns.2020.116832'\n        example_cache.timeout = timeout\n        example_cache.delete(doi)\n        assert doi not in example_cache.content\n>       example_cache.get(doi)\n\ntests\\test_cache.py:60: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\cache.py:119: in get\n    self.save()\nunpywall\\cache.py:140: in save\n    pickle.dump({'content': self.content,\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <ssl.SSLSocket fd=2064, family=2, type=1, proto=0, laddr=('192.168.1.68', 63470), raddr=('99.83.151.71', 443)>\n\n    def __getstate__(self):\n>       raise TypeError(f\"cannot pickle {self.__class__.__name__!r} object\")\nE       TypeError: cannot pickle 'SSLSocket' object\n\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\socket.py:275: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_get",
      "lineno": 63,
      "outcome": "failed",
      "keywords": [
        "test_get",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\tests\\test_cache.py",
          "lineno": 69,
          "message": "AssertionError: assert False\n +  where False = isinstance(<Response [200]>, HTTPResponse)\n +    where <Response [200]> = get('10.1016/j.jns.2020.116832')\n +      where get = <unpywall.cache.UnpywallCache object at 0x0000019C9640F230>.get"
        },
        "traceback": [
          {
            "path": "tests\\test_cache.py",
            "lineno": 69,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_cache.TestUnpywallCache object at 0x0000019C962961B0>\nexample_cache = <unpywall.cache.UnpywallCache object at 0x0000019C9640EDE0>\nbackup_cache = <unpywall.cache.UnpywallCache object at 0x0000019C9640F230>\n\n    def test_get(self, example_cache, backup_cache):\n        doi = '10.1016/j.jns.2020.116832'\n        example_cache.delete(doi)\n        assert doi not in example_cache.content\n        assert doi not in example_cache.access_times\n>       assert isinstance(backup_cache.get(doi), HTTPResponse)\nE       AssertionError: assert False\nE        +  where False = isinstance(<Response [200]>, HTTPResponse)\nE        +    where <Response [200]> = get('10.1016/j.jns.2020.116832')\nE        +      where get = <unpywall.cache.UnpywallCache object at 0x0000019C9640F230>.get\n\ntests\\test_cache.py:69: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_save_load",
      "lineno": 71,
      "outcome": "passed",
      "keywords": [
        "test_save_load",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_download",
      "lineno": 87,
      "outcome": "passed",
      "keywords": [
        "test_download",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_main",
      "lineno": 10,
      "outcome": "passed",
      "keywords": [
        "test_main",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed",
        "stdout": "usage: unpywall <command> [<args>]\n\nCommand-line tool for interfacing the Unpaywall API\n\nThese are common unpywall commands:\n\n   view        This command opens a local copy of a PDF from\n               a given DOI.\n   download    This command downloads a copy of a PDF from a\n               given DOI.\n   link        This command returns a link to an OA pdf\n               (if available).\nUnknown option: this is a bad argument\nusage: unpywall <command> [<args>]\n\nCommand-line tool for interfacing the Unpaywall API\n\nThese are common unpywall commands:\n\n   view        This command opens a local copy of a PDF from\n               a given DOI.\n   download    This command downloads a copy of a PDF from a\n               given DOI.\n   link        This command returns a link to an OA pdf\n               (if available).\n"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_view",
      "lineno": 21,
      "outcome": "passed",
      "keywords": [
        "test_view",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed",
        "stdout": "usage: __main__.py [-m \b] [-b \b] [-u \b] doi\n\nThis command opens a local copy of a PDF from a given DOI.\n\npositional arguments:\n  doi                 \tThe DOI of the document.\n\noptions:\n  -m \b, --mode \b      \tThe mode for viewing a PDF.\n  -b \b, --backend \b   \tThe backend you want to use.\n  -u \b, --progress \b  \tShow progress bar.\n",
        "stderr": "error: the following arguments are required: doi\n\n"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_download",
      "lineno": 31,
      "outcome": "passed",
      "keywords": [
        "test_download",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed",
        "stdout": "usage: __main__.py [-f \b] [-p \b] [-b \b] [-u \b] doi\n\nThis command downloads a copy of a PDF from a given DOI.\n\npositional arguments:\n  doi                 \tThe DOI of the document.\n\noptions:\n  -f \b, --filename \b  \tThe filename for downloading a PDF.\n  -p \b, --path \b      \tThe filepath for downloading a PDF.\n  -b \b, --backend \b   \tThe backend you want to use.\n  -u \b, --progress \b  \tShow progress bar.\n",
        "stderr": "error: the following arguments are required: doi\n\n"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_link",
      "lineno": 43,
      "outcome": "passed",
      "keywords": [
        "test_link",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed",
        "stdout": "usage: __main__.py [-b \b] doi\n\nThis command returns a link to an OA pdf (if available).\n\npositional arguments:\n  doi                \tThe DOI of the document.\n\noptions:\n  -b \b, --backend \b  \tThe backend you want to use.\n",
        "stderr": "error: the following arguments are required: doi\n\n"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_init_cache",
      "lineno": 24,
      "outcome": "passed",
      "keywords": [
        "test_init_cache",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_validate_dois",
      "lineno": 39,
      "outcome": "passed",
      "keywords": [
        "test_validate_dois",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_df",
      "lineno": 58,
      "outcome": "failed",
      "keywords": [
        "test_get_df",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\.venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py",
          "lineno": 460,
          "message": "AttributeError: 'bytes' object has no attribute 'values'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 71,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 172,
            "message": "in _get_df"
          },
          {
            "path": ".venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py",
            "lineno": 460,
            "message": "in json_normalize"
          },
          {
            "path": ".venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py",
            "lineno": 460,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000019C963DB7D0>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    def test_get_df(self, Unpywall):\n    \n        data = Unpywall.get_json(doi='10.1016/j.tmaid.2020.101663',\n                                 errors='raise')\n    \n        with pytest.raises(ValueError,\n                           match=('The argument format only accepts the'\n                                  ' values \"raw\" and \"extended\"')):\n            assert Unpywall._get_df(data=data,\n                                    format='not a valid format',\n                                    errors='raise')\n    \n>       df_raw = Unpywall._get_df(data=data,\n                                  format='raw',\n                                  errors='ignore')\n\ntests\\test_unpywall.py:71: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\__init__.py:172: in _get_df\n    df = pd.json_normalize(data=data, max_level=1, errors=errors)\n.venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py:460: in json_normalize\n    if any([isinstance(x, dict) for x in y.values()] for y in data):\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n.0 = <list_iterator object at 0x0000019C96486290>\n\n>   if any([isinstance(x, dict) for x in y.values()] for y in data):\nE   AttributeError: 'bytes' object has no attribute 'values'\n\n.venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py:460: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_doi",
      "lineno": 82,
      "outcome": "failed",
      "keywords": [
        "test_doi",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\.venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py",
          "lineno": 460,
          "message": "AttributeError: 'bytes' object has no attribute 'values'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 85,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 272,
            "message": "in doi"
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 172,
            "message": "in _get_df"
          },
          {
            "path": ".venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py",
            "lineno": 460,
            "message": "in json_normalize"
          },
          {
            "path": ".venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py",
            "lineno": 460,
            "message": "AttributeError"
          }
        ],
        "stdout": "|==================================================| 100%\r\n\n",
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000019C963DB980>\nUnpywall = <class 'unpywall.Unpywall'>\ncapfd = <_pytest.capture.CaptureFixture object at 0x0000019C96484560>\n\n    def test_doi(self, Unpywall, capfd):\n    \n>       df = Unpywall.doi(dois=['10.1038/nature12373'],\n                          format='raw',\n                          progress=True,\n                          errors='ignore')\n\ntests\\test_unpywall.py:85: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\__init__.py:272: in doi\n    df2 = Unpywall._get_df(data=data,\nunpywall\\__init__.py:172: in _get_df\n    df = pd.json_normalize(data=data, max_level=1, errors=errors)\n.venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py:460: in json_normalize\n    if any([isinstance(x, dict) for x in y.values()] for y in data):\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n.0 = <list_iterator object at 0x0000019C96486860>\n\n>   if any([isinstance(x, dict) for x in y.values()] for y in data):\nE   AttributeError: 'bytes' object has no attribute 'values'\n\n.venv\\Lib\\site-packages\\pandas\\io\\json\\_normalize.py:460: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_query",
      "lineno": 100,
      "outcome": "failed",
      "keywords": [
        "test_query",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\tests\\test_unpywall.py",
          "lineno": 107,
          "message": "AssertionError: assert False\n +  where False = isinstance(None, <class 'pandas.core.frame.DataFrame'>)\n +    where <class 'pandas.core.frame.DataFrame'> = pd.DataFrame"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 107,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000019C963DBB00>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    def test_query(self, Unpywall):\n    \n        df = Unpywall.query(query='test',\n                            is_oa=True,\n                            errors='ignore')\n    \n>       assert isinstance(df, pd.DataFrame)\nE       AssertionError: assert False\nE        +  where False = isinstance(None, <class 'pandas.core.frame.DataFrame'>)\nE        +    where <class 'pandas.core.frame.DataFrame'> = pd.DataFrame\n\ntests\\test_unpywall.py:107: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_json",
      "lineno": 108,
      "outcome": "failed",
      "keywords": [
        "test_get_json",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\tests\\test_unpywall.py",
          "lineno": 117,
          "message": "AssertionError: assert False\n +  where False = isinstance(<Response [200]>, dict)\n +    where <Response [200]> = <function Unpywall.get_json at 0x0000019C962C4680>(doi='10.1016/j.tmaid.2020.101663', errors='raise')\n +      where <function Unpywall.get_json at 0x0000019C962C4680> = <class 'unpywall.Unpywall'>.get_json"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 117,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000019C963DBC80>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    def test_get_json(self, Unpywall):\n    \n        with pytest.raises(HTTPError):\n            Unpywall.get_json(doi='a bad doi', errors='raise')\n    \n        with pytest.warns(UserWarning):\n            Unpywall.get_json(doi='a bad doi', errors='ignore')\n    \n>       assert isinstance(Unpywall.get_json(doi='10.1016/j.tmaid.2020.101663',\n                                            errors='raise'), dict)\nE       AssertionError: assert False\nE        +  where False = isinstance(<Response [200]>, dict)\nE        +    where <Response [200]> = <function Unpywall.get_json at 0x0000019C962C4680>(doi='10.1016/j.tmaid.2020.101663', errors='raise')\nE        +      where <function Unpywall.get_json at 0x0000019C962C4680> = <class 'unpywall.Unpywall'>.get_json\n\ntests\\test_unpywall.py:117: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_pdf_link",
      "lineno": 130,
      "outcome": "failed",
      "keywords": [
        "test_get_pdf_link",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\tests\\test_unpywall.py",
          "lineno": 133,
          "message": "AssertionError: assert False\n +  where False = isinstance(None, str)\n +    where None = <function Unpywall.get_pdf_link at 0x0000019C962C4720>('10.1038/nature12373')\n +      where <function Unpywall.get_pdf_link at 0x0000019C962C4720> = <class 'unpywall.Unpywall'>.get_pdf_link"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 133,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000019C963DBE00>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    def test_get_pdf_link(self, Unpywall):\n    \n>       assert isinstance(Unpywall.get_pdf_link('10.1038/nature12373'), str)\nE       AssertionError: assert False\nE        +  where False = isinstance(None, str)\nE        +    where None = <function Unpywall.get_pdf_link at 0x0000019C962C4720>('10.1038/nature12373')\nE        +      where <function Unpywall.get_pdf_link at 0x0000019C962C4720> = <class 'unpywall.Unpywall'>.get_pdf_link\n\ntests\\test_unpywall.py:133: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_doc_link",
      "lineno": 134,
      "outcome": "failed",
      "keywords": [
        "test_get_doc_link",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\tests\\test_unpywall.py",
          "lineno": 137,
          "message": "AssertionError: assert False\n +  where False = isinstance(None, str)\n +    where None = <function Unpywall.get_doc_link at 0x0000019C962C47C0>('10.1016/j.tmaid.2020.101663')\n +      where <function Unpywall.get_doc_link at 0x0000019C962C47C0> = <class 'unpywall.Unpywall'>.get_doc_link"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 137,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000019C963DBF80>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    def test_get_doc_link(self, Unpywall):\n    \n>       assert isinstance(\n            Unpywall.get_doc_link('10.1016/j.tmaid.2020.101663'), str)\nE       AssertionError: assert False\nE        +  where False = isinstance(None, str)\nE        +    where None = <function Unpywall.get_doc_link at 0x0000019C962C47C0>('10.1016/j.tmaid.2020.101663')\nE        +      where <function Unpywall.get_doc_link at 0x0000019C962C47C0> = <class 'unpywall.Unpywall'>.get_doc_link\n\ntests\\test_unpywall.py:137: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_all_links",
      "lineno": 139,
      "outcome": "passed",
      "keywords": [
        "test_get_all_links",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_handle",
      "lineno": 144,
      "outcome": "failed",
      "keywords": [
        "test_download_pdf_handle",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\.venv\\Lib\\site-packages\\urllib3\\poolmanager.py",
          "lineno": 294,
          "message": "urllib3.exceptions.LocationValueError: No host specified."
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 148,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 428,
            "message": "in download_pdf_handle"
          },
          {
            "path": ".venv\\Lib\\site-packages\\urllib3\\_request_methods.py",
            "lineno": 135,
            "message": "in request"
          },
          {
            "path": ".venv\\Lib\\site-packages\\urllib3\\_request_methods.py",
            "lineno": 182,
            "message": "in request_encode_url"
          },
          {
            "path": ".venv\\Lib\\site-packages\\urllib3\\poolmanager.py",
            "lineno": 432,
            "message": "in urlopen"
          },
          {
            "path": ".venv\\Lib\\site-packages\\urllib3\\poolmanager.py",
            "lineno": 294,
            "message": "LocationValueError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000019C9640C2C0>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    def test_download_pdf_handle(self, Unpywall):\n    \n        assert isinstance(\n>           Unpywall.download_pdf_handle('10.1038/nature12373'), BytesIO)\n\ntests\\test_unpywall.py:148: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\__init__.py:428: in download_pdf_handle\n    response = Unpywall.http.request('GET', pdf_link)\n.venv\\Lib\\site-packages\\urllib3\\_request_methods.py:135: in request\n    return self.request_encode_url(\n.venv\\Lib\\site-packages\\urllib3\\_request_methods.py:182: in request_encode_url\n    return self.urlopen(method, url, **extra_kw)\n.venv\\Lib\\site-packages\\urllib3\\poolmanager.py:432: in urlopen\n    conn = self.connection_from_host(u.host, port=u.port, scheme=u.scheme)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <urllib3.poolmanager.PoolManager object at 0x0000019C960EA9C0>\nhost = None, port = None, scheme = None, pool_kwargs = None\n\n    def connection_from_host(\n        self,\n        host: str | None,\n        port: int | None = None,\n        scheme: str | None = \"http\",\n        pool_kwargs: dict[str, typing.Any] | None = None,\n    ) -> HTTPConnectionPool:\n        \"\"\"\n        Get a :class:`urllib3.connectionpool.ConnectionPool` based on the host, port, and scheme.\n    \n        If ``port`` isn't given, it will be derived from the ``scheme`` using\n        ``urllib3.connectionpool.port_by_scheme``. If ``pool_kwargs`` is\n        provided, it is merged with the instance's ``connection_pool_kw``\n        variable and used to create the new connection pool, if one is\n        needed.\n        \"\"\"\n    \n        if not host:\n>           raise LocationValueError(\"No host specified.\")\nE           urllib3.exceptions.LocationValueError: No host specified.\n\n.venv\\Lib\\site-packages\\urllib3\\poolmanager.py:294: LocationValueError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_progress",
      "lineno": 149,
      "outcome": "passed",
      "keywords": [
        "test_progress",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_view_pdf",
      "lineno": 154,
      "outcome": "passed",
      "keywords": [
        "test_view_pdf",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_file",
      "lineno": 157,
      "outcome": "failed",
      "keywords": [
        "test_download_pdf_file",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\.venv\\Lib\\site-packages\\urllib3\\poolmanager.py",
          "lineno": 294,
          "message": "urllib3.exceptions.LocationValueError: No host specified."
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 163,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 502,
            "message": "in download_pdf_file"
          },
          {
            "path": ".venv\\Lib\\site-packages\\urllib3\\_request_methods.py",
            "lineno": 135,
            "message": "in request"
          },
          {
            "path": ".venv\\Lib\\site-packages\\urllib3\\_request_methods.py",
            "lineno": 182,
            "message": "in request_encode_url"
          },
          {
            "path": ".venv\\Lib\\site-packages\\urllib3\\poolmanager.py",
            "lineno": 432,
            "message": "in urlopen"
          },
          {
            "path": ".venv\\Lib\\site-packages\\urllib3\\poolmanager.py",
            "lineno": 294,
            "message": "LocationValueError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x0000019C9640C7A0>\nUnpywall = <class 'unpywall.Unpywall'>\ncapfd = <_pytest.capture.CaptureFixture object at 0x0000019C96484680>\n\n    def test_download_pdf_file(self, Unpywall, capfd):\n    \n        filename = 'test.pdf'\n        filepath = './test_dir'\n    \n>       Unpywall.download_pdf_file('10.1038/nature12373',\n                                   filename=filename,\n                                   filepath=filepath,\n                                   progress=True)\n\ntests\\test_unpywall.py:163: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\__init__.py:502: in download_pdf_file\n    response = Unpywall.http.request('GET', url, preload_content=False)\n.venv\\Lib\\site-packages\\urllib3\\_request_methods.py:135: in request\n    return self.request_encode_url(\n.venv\\Lib\\site-packages\\urllib3\\_request_methods.py:182: in request_encode_url\n    return self.urlopen(method, url, **extra_kw)\n.venv\\Lib\\site-packages\\urllib3\\poolmanager.py:432: in urlopen\n    conn = self.connection_from_host(u.host, port=u.port, scheme=u.scheme)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <urllib3.poolmanager.PoolManager object at 0x0000019C960EA9C0>\nhost = None, port = None, scheme = None, pool_kwargs = None\n\n    def connection_from_host(\n        self,\n        host: str | None,\n        port: int | None = None,\n        scheme: str | None = \"http\",\n        pool_kwargs: dict[str, typing.Any] | None = None,\n    ) -> HTTPConnectionPool:\n        \"\"\"\n        Get a :class:`urllib3.connectionpool.ConnectionPool` based on the host, port, and scheme.\n    \n        If ``port`` isn't given, it will be derived from the ``scheme`` using\n        ``urllib3.connectionpool.port_by_scheme``. If ``pool_kwargs`` is\n        provided, it is merged with the instance's ``connection_pool_kw``\n        variable and used to create the new connection pool, if one is\n        needed.\n        \"\"\"\n    \n        if not host:\n>           raise LocationValueError(\"No host specified.\")\nE           urllib3.exceptions.LocationValueError: No host specified.\n\n.venv\\Lib\\site-packages\\urllib3\\poolmanager.py:294: LocationValueError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallCredentials::test_validate_email",
      "lineno": 7,
      "outcome": "passed",
      "keywords": [
        "test_validate_email",
        "TestUnpywallCredentials",
        "test_utils.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallURL::test_doi_url",
      "lineno": 36,
      "outcome": "passed",
      "keywords": [
        "test_doi_url",
        "TestUnpywallURL",
        "test_utils.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallURL::test_query_url",
      "lineno": 44,
      "outcome": "passed",
      "keywords": [
        "test_query_url",
        "TestUnpywallURL",
        "test_utils.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__urllib3",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    }
  ],
  "warnings": [
    {
      "message": "URLs without a scheme (ie 'https://') are deprecated and will raise an error in a future version of urllib3. To avoid this DeprecationWarning ensure all URLs start with 'https://' or 'http://'. Read more in this issue: https://github.com/urllib3/urllib3/issues/2920",
      "category": "DeprecationWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\.venv\\Lib\\site-packages\\urllib3\\_request_methods.py",
      "lineno": 182
    },
    {
      "message": "URLs without a scheme (ie 'https://') are deprecated and will raise an error in a future version of urllib3. To avoid this DeprecationWarning ensure all URLs start with 'https://' or 'http://'. Read more in this issue: https://github.com/urllib3/urllib3/issues/2920",
      "category": "DeprecationWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__urllib3\\.venv\\Lib\\site-packages\\urllib3\\_request_methods.py",
      "lineno": 182
    }
  ]
}