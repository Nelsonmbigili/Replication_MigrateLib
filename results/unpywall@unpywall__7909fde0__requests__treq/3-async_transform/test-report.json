{
  "exitcode": 1,
  "summary": {
    "passed": 10,
    "failed": 16,
    "total": 26,
    "collected": 26
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": ".",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "docs/_static/css",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "docs/_static",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs/_static/css",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "docs/_templates",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "docs",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs/_static",
          "type": "Dir"
        },
        {
          "nodeid": "docs/_templates",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "test_dir",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_reset_cache",
          "type": "Function",
          "lineno": 40
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_delete",
          "type": "Function",
          "lineno": 45
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_timeout",
          "type": "Coroutine",
          "lineno": 53
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_get",
          "type": "Coroutine",
          "lineno": 64
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_save_load",
          "type": "Coroutine",
          "lineno": 81
        },
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache::test_download",
          "type": "Coroutine",
          "lineno": 101
        }
      ]
    },
    {
      "nodeid": "tests/test_cache.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cache.py::TestUnpywallCache",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_main",
          "type": "Coroutine",
          "lineno": 10
        },
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_view",
          "type": "Coroutine",
          "lineno": 22
        },
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_download",
          "type": "Coroutine",
          "lineno": 33
        },
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli::test_link",
          "type": "Coroutine",
          "lineno": 46
        }
      ]
    },
    {
      "nodeid": "tests/test_cli.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cli.py::TestUnpywallCli",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_init_cache",
          "type": "Function",
          "lineno": 25
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_validate_dois",
          "type": "Function",
          "lineno": 40
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_df",
          "type": "Coroutine",
          "lineno": 59
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_doi",
          "type": "Coroutine",
          "lineno": 85
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_query",
          "type": "Coroutine",
          "lineno": 105
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_json",
          "type": "Coroutine",
          "lineno": 115
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_pdf_link",
          "type": "Coroutine",
          "lineno": 139
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_doc_link",
          "type": "Coroutine",
          "lineno": 145
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_all_links",
          "type": "Coroutine",
          "lineno": 152
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_handle",
          "type": "Coroutine",
          "lineno": 159
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_progress",
          "type": "Function",
          "lineno": 166
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_view_pdf",
          "type": "Coroutine",
          "lineno": 171
        },
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_file",
          "type": "Coroutine",
          "lineno": 175
        }
      ]
    },
    {
      "nodeid": "tests/test_unpywall.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_unpywall.py::TestUnpywall",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallCredentials",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::TestUnpywallCredentials::test_validate_email",
          "type": "Function",
          "lineno": 7
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallURL",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::TestUnpywallURL::test_doi_url",
          "type": "Function",
          "lineno": 36
        },
        {
          "nodeid": "tests/test_utils.py::TestUnpywallURL::test_query_url",
          "type": "Function",
          "lineno": 44
        }
      ]
    },
    {
      "nodeid": "tests/test_utils.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_utils.py::TestUnpywallCredentials",
          "type": "Class"
        },
        {
          "nodeid": "tests/test_utils.py::TestUnpywallURL",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_cache.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_cli.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_unpywall.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_utils.py",
          "type": "Module"
        }
      ]
    },
    {
      "nodeid": "unpywall",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "unpywall.egg-info",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": ".",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs",
          "type": "Dir"
        },
        {
          "nodeid": "test_dir",
          "type": "Dir"
        },
        {
          "nodeid": "tests",
          "type": "Package"
        },
        {
          "nodeid": "unpywall",
          "type": "Package"
        },
        {
          "nodeid": "unpywall.egg-info",
          "type": "Dir"
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_reset_cache",
      "lineno": 40,
      "outcome": "passed",
      "keywords": [
        "test_reset_cache",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_delete",
      "lineno": 45,
      "outcome": "passed",
      "keywords": [
        "test_delete",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_timeout",
      "lineno": 53,
      "outcome": "failed",
      "keywords": [
        "test_timeout",
        "asyncio",
        "pytestmark",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\.venv\\Lib\\site-packages\\twisted\\internet\\defer.py",
          "lineno": 1183,
          "message": "RuntimeError: Task got bad yield: <Deferred at 0x1d3f27b8e60>"
        },
        "traceback": [
          {
            "path": "tests\\test_cache.py",
            "lineno": 61,
            "message": ""
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 116,
            "message": "in get"
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 189,
            "message": "in download"
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 180,
            "message": "in download"
          },
          {
            "path": ".venv\\Lib\\site-packages\\twisted\\internet\\defer.py",
            "lineno": 1183,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "self = <tests.test_cache.TestUnpywallCache object at 0x000001D3F25C7890>\nexample_cache = <unpywall.cache.UnpywallCache object at 0x000001D3F26038C0>\n\n    @pytest.mark.asyncio\n    async def test_timeout(self, example_cache):\n        timeout = 1\n        doi = '10.1016/j.jns.2020.116832'\n        example_cache.timeout = timeout\n        example_cache.delete(doi)\n        assert doi not in example_cache.content\n>       await example_cache.get(doi)\n\ntests\\test_cache.py:61: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\cache.py:116: in get\n    downloaded = await self.download(doi, errors)\nunpywall\\cache.py:189: in download\n    raise e\nunpywall\\cache.py:180: in download\n    response = await treq.get(url)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Deferred at 0x1d3f27b8e60>\n\n    def __iter__(self) -> Generator[Deferred[_SelfResultT], None, _SelfResultT]:\n        while True:\n            if self.paused:\n                # If we're paused, we have no result to give\n                yield self\n                continue\n    \n            result = getattr(self, \"result\", _NO_RESULT)\n            if result is _NO_RESULT:\n>               yield self\nE               RuntimeError: Task got bad yield: <Deferred at 0x1d3f27b8e60>\n\n.venv\\Lib\\site-packages\\twisted\\internet\\defer.py:1183: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_get",
      "lineno": 64,
      "outcome": "failed",
      "keywords": [
        "test_get",
        "asyncio",
        "pytestmark",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_cache.py",
          "lineno": 76,
          "message": "AssertionError: assert False\n +  where False = isinstance(<Response [200]>, <class 'treq.response._Response'>)\n +    where <class 'treq.response._Response'> = <module 'treq.response' from 'D:\\\\repos\\\\unpywall@unpywall__7909fde0__requests__treq\\\\.venv\\\\Lib\\\\site-packages\\\\treq\\\\response.py'>._Response\n +      where <module 'treq.response' from 'D:\\\\repos\\\\unpywall@unpywall__7909fde0__requests__treq\\\\.venv\\\\Lib\\\\site-packages\\\\treq\\\\response.py'> = treq.response"
        },
        "traceback": [
          {
            "path": "tests\\test_cache.py",
            "lineno": 76,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_cache.TestUnpywallCache object at 0x000001D3F25C77A0>\nexample_cache = <unpywall.cache.UnpywallCache object at 0x000001D3F27BA2D0>\nbackup_cache = <unpywall.cache.UnpywallCache object at 0x000001D3F27BA660>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_get(self, example_cache, backup_cache):\n        doi = '10.1016/j.jns.2020.116832'\n        example_cache.delete(doi)\n        assert doi not in example_cache.content\n        assert doi not in example_cache.access_times\n    \n        # Using treq for HTTP requests\n        backup_response = await backup_cache.get(doi)\n        assert backup_response is not None\n>       assert isinstance(backup_response, treq.response._Response)\nE       AssertionError: assert False\nE        +  where False = isinstance(<Response [200]>, <class 'treq.response._Response'>)\nE        +    where <class 'treq.response._Response'> = <module 'treq.response' from 'D:\\\\repos\\\\unpywall@unpywall__7909fde0__requests__treq\\\\.venv\\\\Lib\\\\site-packages\\\\treq\\\\response.py'>._Response\nE        +      where <module 'treq.response' from 'D:\\\\repos\\\\unpywall@unpywall__7909fde0__requests__treq\\\\.venv\\\\Lib\\\\site-packages\\\\treq\\\\response.py'> = treq.response\n\ntests\\test_cache.py:76: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_save_load",
      "lineno": 81,
      "outcome": "passed",
      "keywords": [
        "test_save_load",
        "asyncio",
        "pytestmark",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cache.py::TestUnpywallCache::test_download",
      "lineno": 101,
      "outcome": "failed",
      "keywords": [
        "test_download",
        "asyncio",
        "pytestmark",
        "TestUnpywallCache",
        "test_cache.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\.venv\\Lib\\site-packages\\twisted\\internet\\defer.py",
          "lineno": 1183,
          "message": "RuntimeError: Task got bad yield: <Deferred at 0x1d3f27f2db0>"
        },
        "traceback": [
          {
            "path": "tests\\test_cache.py",
            "lineno": 108,
            "message": ""
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 189,
            "message": "in download"
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 180,
            "message": "in download"
          },
          {
            "path": ".venv\\Lib\\site-packages\\twisted\\internet\\defer.py",
            "lineno": 1183,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "self = <tests.test_cache.TestUnpywallCache object at 0x000001D3F25E0080>\nexample_cache = <unpywall.cache.UnpywallCache object at 0x000001D3F27F3EC0>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_download(self, example_cache):\n        doi = '10.1016/j.jns.2020.116832'\n    \n        # Using treq for HTTP requests\n>       response = await example_cache.download(doi, 'raise')\n\ntests\\test_cache.py:108: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\cache.py:189: in download\n    raise e\nunpywall\\cache.py:180: in download\n    response = await treq.get(url)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Deferred at 0x1d3f27f2db0>\n\n    def __iter__(self) -> Generator[Deferred[_SelfResultT], None, _SelfResultT]:\n        while True:\n            if self.paused:\n                # If we're paused, we have no result to give\n                yield self\n                continue\n    \n            result = getattr(self, \"result\", _NO_RESULT)\n            if result is _NO_RESULT:\n>               yield self\nE               RuntimeError: Task got bad yield: <Deferred at 0x1d3f27f2db0>\n\n.venv\\Lib\\site-packages\\twisted\\internet\\defer.py:1183: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_main",
      "lineno": 10,
      "outcome": "failed",
      "keywords": [
        "test_main",
        "asyncio",
        "pytestmark",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_cli.py",
          "lineno": 15,
          "message": "TypeError: __init__() should return None, not 'coroutine'"
        },
        "traceback": [
          {
            "path": "tests\\test_cli.py",
            "lineno": 15,
            "message": "TypeError"
          }
        ],
        "longrepr": "self = <tests.test_cli.TestUnpywallCli object at 0x000001D3F25E0290>\n\n    @pytest.mark.asyncio\n    async def test_main(self):\n    \n        with pytest.raises(SystemExit) as pytest_raise_system_exit:\n>           assert main(test_args=['-h'])\nE           TypeError: __init__() should return None, not 'coroutine'\n\ntests\\test_cli.py:15: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_view",
      "lineno": 22,
      "outcome": "failed",
      "keywords": [
        "test_view",
        "asyncio",
        "pytestmark",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_cli.py",
          "lineno": 26,
          "message": "TypeError: __init__() should return None, not 'coroutine'"
        },
        "traceback": [
          {
            "path": "tests\\test_cli.py",
            "lineno": 26,
            "message": "TypeError"
          }
        ],
        "longrepr": "self = <tests.test_cli.TestUnpywallCli object at 0x000001D3F25E0230>\n\n    @pytest.mark.asyncio\n    async def test_view(self):\n        with pytest.raises(SystemExit) as pytest_raise_system_exit:\n>           main(test_args=['view'])\nE           TypeError: __init__() should return None, not 'coroutine'\n\ntests\\test_cli.py:26: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_download",
      "lineno": 33,
      "outcome": "failed",
      "keywords": [
        "test_download",
        "asyncio",
        "pytestmark",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_cli.py",
          "lineno": 38,
          "message": "TypeError: __init__() should return None, not 'coroutine'"
        },
        "traceback": [
          {
            "path": "tests\\test_cli.py",
            "lineno": 38,
            "message": "TypeError"
          }
        ],
        "longrepr": "self = <tests.test_cli.TestUnpywallCli object at 0x000001D3F25E1FD0>\ncapfd = <_pytest.capture.CaptureFixture object at 0x000001D3F2819100>\n\n    @pytest.mark.asyncio\n    async def test_download(self, capfd):\n    \n        bad_doi = 'bad_doi'\n>       main(test_args=['download', bad_doi])\nE       TypeError: __init__() should return None, not 'coroutine'\n\ntests\\test_cli.py:38: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_cli.py::TestUnpywallCli::test_link",
      "lineno": 46,
      "outcome": "failed",
      "keywords": [
        "test_link",
        "asyncio",
        "pytestmark",
        "TestUnpywallCli",
        "test_cli.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_cli.py",
          "lineno": 50,
          "message": "TypeError: __init__() should return None, not 'coroutine'"
        },
        "traceback": [
          {
            "path": "tests\\test_cli.py",
            "lineno": 50,
            "message": "TypeError"
          }
        ],
        "longrepr": "self = <tests.test_cli.TestUnpywallCli object at 0x000001D3F25E0D10>\n\n    @pytest.mark.asyncio\n    async def test_link(self):\n        with pytest.raises(SystemExit) as pytest_raise_system_exit:\n>           main(test_args=['link'])\nE           TypeError: __init__() should return None, not 'coroutine'\n\ntests\\test_cli.py:50: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_init_cache",
      "lineno": 25,
      "outcome": "passed",
      "keywords": [
        "test_init_cache",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_validate_dois",
      "lineno": 40,
      "outcome": "passed",
      "keywords": [
        "test_validate_dois",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_df",
      "lineno": 59,
      "outcome": "failed",
      "keywords": [
        "test_get_df",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\unpywall\\__init__.py",
          "lineno": 184,
          "message": "TypeError: object dict can't be used in 'await' expression"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 64,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 184,
            "message": "TypeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x000001D3F25E3DA0>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_get_df(self, Unpywall):\n    \n>       data = await Unpywall.get_json(doi='10.1016/j.tmaid.2020.101663',\n                                       errors='raise')\n\ntests\\test_unpywall.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndoi = '10.1016/j.tmaid.2020.101663', query = None, is_oa = False\nerrors = 'raise', force = False, ignore_cache = False\n\n    @staticmethod\n    async def get_json(doi: str = None,\n                       query: str = None,\n                       is_oa: bool = False,\n                       errors: str = 'raise',\n                       force: bool = False,\n                       ignore_cache: bool = False):\n        if not Unpywall.cache:\n            Unpywall.init_cache()\n    \n        if doi:\n            r = await Unpywall.cache.get(doi,\n                                   errors=errors,\n                                   force=force,\n                                   ignore_cache=ignore_cache)\n        if query:\n            if type(is_oa) != bool:\n                raise ValueError('The argument is_oa only accepts the'\n                                 ' values \"True\" and \"False\"')\n            from .utils import UnpywallURL\n    \n            url = UnpywallURL(query=query, is_oa=is_oa).query_url\n    \n            r = await treq.get(url)\n        try:\n>           return await r.json()\nE           TypeError: object dict can't be used in 'await' expression\n\nunpywall\\__init__.py:184: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_doi",
      "lineno": 85,
      "outcome": "failed",
      "keywords": [
        "test_doi",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\unpywall\\__init__.py",
          "lineno": 184,
          "message": "TypeError: object dict can't be used in 'await' expression"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 90,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 141,
            "message": "in doi"
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 184,
            "message": "TypeError"
          }
        ],
        "stdout": "|==================================================| 100%\r\n\n",
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x000001D3F2600D10>\nUnpywall = <class 'unpywall.Unpywall'>\ncapfd = <_pytest.capture.CaptureFixture object at 0x000001D3F28A8A10>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_doi(self, Unpywall, capfd):\n    \n>       df = await Unpywall.doi(dois=['10.1038/nature12373'],\n                                format='raw',\n                                progress=True,\n                                errors='ignore')\n\ntests\\test_unpywall.py:90: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\__init__.py:141: in doi\n    data = await Unpywall.get_json(doi,\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndoi = '10.1038/nature12373', query = None, is_oa = False, errors = 'ignore'\nforce = False, ignore_cache = False\n\n    @staticmethod\n    async def get_json(doi: str = None,\n                       query: str = None,\n                       is_oa: bool = False,\n                       errors: str = 'raise',\n                       force: bool = False,\n                       ignore_cache: bool = False):\n        if not Unpywall.cache:\n            Unpywall.init_cache()\n    \n        if doi:\n            r = await Unpywall.cache.get(doi,\n                                   errors=errors,\n                                   force=force,\n                                   ignore_cache=ignore_cache)\n        if query:\n            if type(is_oa) != bool:\n                raise ValueError('The argument is_oa only accepts the'\n                                 ' values \"True\" and \"False\"')\n            from .utils import UnpywallURL\n    \n            url = UnpywallURL(query=query, is_oa=is_oa).query_url\n    \n            r = await treq.get(url)\n        try:\n>           return await r.json()\nE           TypeError: object dict can't be used in 'await' expression\n\nunpywall\\__init__.py:184: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_query",
      "lineno": 105,
      "outcome": "failed",
      "keywords": [
        "test_query",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\.venv\\Lib\\site-packages\\twisted\\internet\\defer.py",
          "lineno": 1183,
          "message": "RuntimeError: Task got bad yield: <Deferred at 0x1d3f2818200>"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 110,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 110,
            "message": "in query"
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 182,
            "message": "in get_json"
          },
          {
            "path": ".venv\\Lib\\site-packages\\twisted\\internet\\defer.py",
            "lineno": 1183,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x000001D3F2603D40>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_query(self, Unpywall):\n    \n>       df = await Unpywall.query(query='test',\n                                  is_oa=True,\n                                  errors='ignore')\n\ntests\\test_unpywall.py:110: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\__init__.py:110: in query\n    data = await Unpywall.get_json(query=query, is_oa=is_oa, errors=errors)\nunpywall\\__init__.py:182: in get_json\n    r = await treq.get(url)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Deferred at 0x1d3f2818200>\n\n    def __iter__(self) -> Generator[Deferred[_SelfResultT], None, _SelfResultT]:\n        while True:\n            if self.paused:\n                # If we're paused, we have no result to give\n                yield self\n                continue\n    \n            result = getattr(self, \"result\", _NO_RESULT)\n            if result is _NO_RESULT:\n>               yield self\nE               RuntimeError: Task got bad yield: <Deferred at 0x1d3f2818200>\n\n.venv\\Lib\\site-packages\\twisted\\internet\\defer.py:1183: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_json",
      "lineno": 115,
      "outcome": "failed",
      "keywords": [
        "test_get_json",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\.venv\\Lib\\site-packages\\twisted\\internet\\defer.py",
          "lineno": 1183,
          "message": "RuntimeError: Task got bad yield: <Deferred at 0x1d3f27f3470>"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 121,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 170,
            "message": "in get_json"
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 116,
            "message": "in get"
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 189,
            "message": "in download"
          },
          {
            "path": "unpywall\\cache.py",
            "lineno": 180,
            "message": "in download"
          },
          {
            "path": ".venv\\Lib\\site-packages\\twisted\\internet\\defer.py",
            "lineno": 1183,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x000001D3F2600230>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_get_json(self, Unpywall):\n    \n        with pytest.raises(PotentialDataLoss):\n>           await Unpywall.get_json(doi='a bad doi', errors='raise')\n\ntests\\test_unpywall.py:121: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nunpywall\\__init__.py:170: in get_json\n    r = await Unpywall.cache.get(doi,\nunpywall\\cache.py:116: in get\n    downloaded = await self.download(doi, errors)\nunpywall\\cache.py:189: in download\n    raise e\nunpywall\\cache.py:180: in download\n    response = await treq.get(url)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Deferred at 0x1d3f27f3470>\n\n    def __iter__(self) -> Generator[Deferred[_SelfResultT], None, _SelfResultT]:\n        while True:\n            if self.paused:\n                # If we're paused, we have no result to give\n                yield self\n                continue\n    \n            result = getattr(self, \"result\", _NO_RESULT)\n            if result is _NO_RESULT:\n>               yield self\nE               RuntimeError: Task got bad yield: <Deferred at 0x1d3f27f3470>\n\n.venv\\Lib\\site-packages\\twisted\\internet\\defer.py:1183: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_pdf_link",
      "lineno": 139,
      "outcome": "failed",
      "keywords": [
        "test_get_pdf_link",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_unpywall.py",
          "lineno": 144,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 144,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x000001D3F2600500>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_get_pdf_link(self, Unpywall):\n    \n>       assert isinstance(await Unpywall.get_pdf_link('10.1038/nature12373'), str)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'\n\ntests\\test_unpywall.py:144: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_doc_link",
      "lineno": 145,
      "outcome": "failed",
      "keywords": [
        "test_get_doc_link",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_unpywall.py",
          "lineno": 151,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_doc_link'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 151,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x000001D3F2600740>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_get_doc_link(self, Unpywall):\n    \n        assert isinstance(\n>           await Unpywall.get_doc_link('10.1016/j.tmaid.2020.101663'), str)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_doc_link'\n\ntests\\test_unpywall.py:151: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_get_all_links",
      "lineno": 152,
      "outcome": "failed",
      "keywords": [
        "test_get_all_links",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_unpywall.py",
          "lineno": 158,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_all_links'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 158,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x000001D3F26009B0>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_get_all_links(self, Unpywall):\n    \n        assert isinstance(\n>           await Unpywall.get_all_links('10.1016/j.tmaid.2020.101663'), list)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_all_links'\n\ntests\\test_unpywall.py:158: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_handle",
      "lineno": 159,
      "outcome": "failed",
      "keywords": [
        "test_download_pdf_handle",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\unpywall\\__init__.py",
          "lineno": 190,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 165,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 190,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x000001D3F2600BF0>\nUnpywall = <class 'unpywall.Unpywall'>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_download_pdf_handle(self, Unpywall):\n    \n        assert isinstance(\n>           await Unpywall.download_pdf_handle('10.1038/nature12373'), BytesIO)\n\ntests\\test_unpywall.py:165: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndoi = '10.1038/nature12373'\n\n    @staticmethod\n    async def download_pdf_handle(doi: str) -> BytesIO:\n>       pdf_link = await Unpywall.get_pdf_link(doi)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'\n\nunpywall\\__init__.py:190: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_progress",
      "lineno": 166,
      "outcome": "passed",
      "keywords": [
        "test_progress",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_view_pdf",
      "lineno": 171,
      "outcome": "passed",
      "keywords": [
        "test_view_pdf",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_unpywall.py::TestUnpywall::test_download_pdf_file",
      "lineno": 175,
      "outcome": "failed",
      "keywords": [
        "test_download_pdf_file",
        "asyncio",
        "pytestmark",
        "TestUnpywall",
        "test_unpywall.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\unpywall\\__init__.py",
          "lineno": 229,
          "message": "AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'"
        },
        "traceback": [
          {
            "path": "tests\\test_unpywall.py",
            "lineno": 183,
            "message": ""
          },
          {
            "path": "unpywall\\__init__.py",
            "lineno": 229,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_unpywall.TestUnpywall object at 0x000001D3F2601310>\nUnpywall = <class 'unpywall.Unpywall'>\ncapfd = <_pytest.capture.CaptureFixture object at 0x000001D3F27BA360>\n\n    @pytest.mark.asyncio\n    @pytest.mark.asyncio\n    async def test_download_pdf_file(self, Unpywall, capfd):\n    \n        filename = 'test.pdf'\n        filepath = './test_dir'\n    \n>       await Unpywall.download_pdf_file('10.1038/nature12373',\n                                         filename=filename,\n                                         filepath=filepath,\n                                         progress=True)\n\ntests\\test_unpywall.py:183: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndoi = '10.1038/nature12373', filename = 'test.pdf', filepath = './test_dir'\nprogress = True\n\n    @staticmethod\n    async def download_pdf_file(doi: str,\n                                 filename: str,\n                                 filepath: str = '.',\n                                 progress: bool = False) -> None:\n>       url = await Unpywall.get_pdf_link(doi)\nE       AttributeError: type object 'Unpywall' has no attribute 'get_pdf_link'\n\nunpywall\\__init__.py:229: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallCredentials::test_validate_email",
      "lineno": 7,
      "outcome": "passed",
      "keywords": [
        "test_validate_email",
        "TestUnpywallCredentials",
        "test_utils.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallURL::test_doi_url",
      "lineno": 36,
      "outcome": "passed",
      "keywords": [
        "test_doi_url",
        "TestUnpywallURL",
        "test_utils.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_utils.py::TestUnpywallURL::test_query_url",
      "lineno": 44,
      "outcome": "passed",
      "keywords": [
        "test_query_url",
        "TestUnpywallURL",
        "test_utils.py",
        "tests",
        "unpywall@unpywall__7909fde0__requests__treq",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    }
  ],
  "warnings": [
    {
      "message": "coroutine 'main.__init__' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_cli.py",
      "lineno": 15
    },
    {
      "message": "coroutine 'main.__init__' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_cli.py",
      "lineno": 26
    },
    {
      "message": "coroutine 'main.__init__' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_cli.py",
      "lineno": 38
    },
    {
      "message": "coroutine 'main.__init__' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\unpywall@unpywall__7909fde0__requests__treq\\tests\\test_cli.py",
      "lineno": 50
    }
  ]
}