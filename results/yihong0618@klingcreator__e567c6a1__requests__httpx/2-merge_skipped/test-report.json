{
  "exitcode": 1,
  "summary": {
    "error": 13,
    "passed": 1,
    "failed": 7,
    "total": 21,
    "collected": 21
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": ".",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "kling",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "kling_creator.egg-info",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "tests/test_kling.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_kling.py::test_base_gen_init",
          "type": "Function",
          "lineno": 32
        },
        {
          "nodeid": "tests/test_kling.py::test_image_gen_init",
          "type": "Function",
          "lineno": 37
        },
        {
          "nodeid": "tests/test_kling.py::test_video_gen_init",
          "type": "Function",
          "lineno": 42
        },
        {
          "nodeid": "tests/test_kling.py::test_parse_cookie_string",
          "type": "Function",
          "lineno": 47
        },
        {
          "nodeid": "tests/test_kling.py::test_get_account_point[ImageGen]",
          "type": "Function",
          "lineno": 58
        },
        {
          "nodeid": "tests/test_kling.py::test_get_account_point[VideoGen]",
          "type": "Function",
          "lineno": 58
        },
        {
          "nodeid": "tests/test_kling.py::test_image_uploader",
          "type": "Function",
          "lineno": 68
        },
        {
          "nodeid": "tests/test_kling.py::test_fetch_metadata",
          "type": "Function",
          "lineno": 82
        },
        {
          "nodeid": "tests/test_kling.py::test_get_content[ImageGen-get_images]",
          "type": "Function",
          "lineno": 101
        },
        {
          "nodeid": "tests/test_kling.py::test_get_content[VideoGen-get_video]",
          "type": "Function",
          "lineno": 101
        },
        {
          "nodeid": "tests/test_kling.py::test_save_content[ImageGen-save_images]",
          "type": "Function",
          "lineno": 118
        },
        {
          "nodeid": "tests/test_kling.py::test_save_content[VideoGen-save_video]",
          "type": "Function",
          "lineno": 118
        },
        {
          "nodeid": "tests/test_kling.py::test_call_for_daily_check",
          "type": "Function",
          "lineno": 141
        },
        {
          "nodeid": "tests/test_kling.py::test_video_gen_get_video",
          "type": "Function",
          "lineno": 154
        },
        {
          "nodeid": "tests/test_kling.py::test_video_gen_save_video",
          "type": "Function",
          "lineno": 177
        },
        {
          "nodeid": "tests/test_kling.py::test_image_gen_get_images",
          "type": "Function",
          "lineno": 199
        },
        {
          "nodeid": "tests/test_kling.py::test_image_gen_save_images",
          "type": "Function",
          "lineno": 219
        },
        {
          "nodeid": "tests/test_kling.py::test_extend_video_completed",
          "type": "Function",
          "lineno": 242
        },
        {
          "nodeid": "tests/test_kling.py::test_extend_video_pending",
          "type": "Function",
          "lineno": 254
        },
        {
          "nodeid": "tests/test_kling.py::test_extend_video_failed",
          "type": "Function",
          "lineno": 265
        },
        {
          "nodeid": "tests/test_kling.py::test_extend_video_no_works",
          "type": "Function",
          "lineno": 276
        }
      ]
    },
    {
      "nodeid": "tests",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_kling.py",
          "type": "Module"
        }
      ]
    },
    {
      "nodeid": ".",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "kling",
          "type": "Package"
        },
        {
          "nodeid": "kling_creator.egg-info",
          "type": "Dir"
        },
        {
          "nodeid": "tests",
          "type": "Dir"
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/test_kling.py::test_base_gen_init",
      "lineno": 32,
      "outcome": "error",
      "keywords": [
        "test_base_gen_init",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 20,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323987748688'>\n\n    @pytest.fixture\n    def base_gen(mock_session):\n>       return BaseGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:20: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323987748688'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_image_gen_init",
      "lineno": 37,
      "outcome": "error",
      "keywords": [
        "test_image_gen_init",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 25,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323975138192'>\n\n    @pytest.fixture\n    def image_gen(mock_session):\n>       return ImageGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323975138192'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_video_gen_init",
      "lineno": 42,
      "outcome": "error",
      "keywords": [
        "test_video_gen_init",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 30,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323974027024'>\n\n    @pytest.fixture\n    def video_gen(mock_session):\n>       return VideoGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323974027024'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_parse_cookie_string",
      "lineno": 47,
      "outcome": "passed",
      "keywords": [
        "test_parse_cookie_string",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_get_account_point[ImageGen]",
      "lineno": 58,
      "outcome": "failed",
      "keywords": [
        "test_get_account_point[ImageGen]",
        "parametrize",
        "pytestmark",
        "ImageGen",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 61,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "gen_class = <class 'kling.kling.ImageGen'>\nmock_session = <MagicMock name='Client()' id='2323975705488'>\n\n    @pytest.mark.parametrize(\"gen_class\", [ImageGen, VideoGen])\n    def test_get_account_point(gen_class, mock_session):\n>       gen = gen_class(\"mock_cookie\")\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:61: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323975705488'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_get_account_point[VideoGen]",
      "lineno": 58,
      "outcome": "failed",
      "keywords": [
        "test_get_account_point[VideoGen]",
        "parametrize",
        "pytestmark",
        "VideoGen",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 61,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "gen_class = <class 'kling.kling.VideoGen'>\nmock_session = <MagicMock name='Client()' id='2323987744656'>\n\n    @pytest.mark.parametrize(\"gen_class\", [ImageGen, VideoGen])\n    def test_get_account_point(gen_class, mock_session):\n>       gen = gen_class(\"mock_cookie\")\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:61: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323987744656'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_image_uploader",
      "lineno": 68,
      "outcome": "error",
      "keywords": [
        "test_image_uploader",
        "__wrapped__",
        "patchings",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 25,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323953378128'>\n\n    @pytest.fixture\n    def image_gen(mock_session):\n>       return ImageGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323953378128'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_fetch_metadata",
      "lineno": 82,
      "outcome": "error",
      "keywords": [
        "test_fetch_metadata",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 20,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323973652304'>\n\n    @pytest.fixture\n    def base_gen(mock_session):\n>       return BaseGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:20: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323973652304'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_get_content[ImageGen-get_images]",
      "lineno": 101,
      "outcome": "failed",
      "keywords": [
        "test_get_content[ImageGen-get_images]",
        "parametrize",
        "pytestmark",
        "ImageGen-get_images",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 106,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "gen_class = <class 'kling.kling.ImageGen'>, method_name = 'get_images'\nmock_session = <MagicMock name='Client()' id='2323973890640'>\n\n    @pytest.mark.parametrize(\n        \"gen_class,method_name\", [(ImageGen, \"get_images\"), (VideoGen, \"get_video\")]\n    )\n    def test_get_content(gen_class, method_name, mock_session):\n>       gen = gen_class(\"mock_cookie\")\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:106: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323973890640'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_get_content[VideoGen-get_video]",
      "lineno": 101,
      "outcome": "failed",
      "keywords": [
        "test_get_content[VideoGen-get_video]",
        "parametrize",
        "pytestmark",
        "VideoGen-get_video",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 106,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "gen_class = <class 'kling.kling.VideoGen'>, method_name = 'get_video'\nmock_session = <MagicMock name='Client()' id='2323976035024'>\n\n    @pytest.mark.parametrize(\n        \"gen_class,method_name\", [(ImageGen, \"get_images\"), (VideoGen, \"get_video\")]\n    )\n    def test_get_content(gen_class, method_name, mock_session):\n>       gen = gen_class(\"mock_cookie\")\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:106: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323976035024'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_save_content[ImageGen-save_images]",
      "lineno": 118,
      "outcome": "failed",
      "keywords": [
        "test_save_content[ImageGen-save_images]",
        "parametrize",
        "__wrapped__",
        "patchings",
        "pytestmark",
        "ImageGen-save_images",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 125,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_mkdir = <MagicMock name='mkdir' id='2323987675536'>\nmock_exists = <MagicMock name='exists' id='2323976131152'>\ngen_class = <class 'kling.kling.ImageGen'>, method_name = 'save_images'\nmock_session = <MagicMock name='Client()' id='2323975287888'>\n\n    @pytest.mark.parametrize(\n        \"gen_class,method_name\", [(ImageGen, \"save_images\"), (VideoGen, \"save_video\")]\n    )\n    @patch(\"os.path.exists\", return_value=False)\n    @patch(\"os.mkdir\")\n    def test_save_content(mock_mkdir, mock_exists, gen_class, method_name, mock_session):\n>       gen = gen_class(\"mock_cookie\")\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:125: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323975287888'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_save_content[VideoGen-save_video]",
      "lineno": 118,
      "outcome": "failed",
      "keywords": [
        "test_save_content[VideoGen-save_video]",
        "parametrize",
        "__wrapped__",
        "patchings",
        "pytestmark",
        "VideoGen-save_video",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 125,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_mkdir = <MagicMock name='mkdir' id='2323975324944'>\nmock_exists = <MagicMock name='exists' id='2323975332496'>\ngen_class = <class 'kling.kling.VideoGen'>, method_name = 'save_video'\nmock_session = <MagicMock name='Client()' id='2323975436752'>\n\n    @pytest.mark.parametrize(\n        \"gen_class,method_name\", [(ImageGen, \"save_images\"), (VideoGen, \"save_video\")]\n    )\n    @patch(\"os.path.exists\", return_value=False)\n    @patch(\"os.mkdir\")\n    def test_save_content(mock_mkdir, mock_exists, gen_class, method_name, mock_session):\n>       gen = gen_class(\"mock_cookie\")\n              ^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:125: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323975436752'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_call_for_daily_check",
      "lineno": 141,
      "outcome": "failed",
      "keywords": [
        "test_call_for_daily_check",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 147,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "def test_call_for_daily_check():\n        mock_session = MagicMock()\n        mock_session.get.return_value.ok = True\n        mock_session.get.return_value.json.return_value = {\"status\": \"success\"}\n    \n>       result = call_for_daily_check(mock_session, True)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:147: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock id='2323976024720'>, is_cn = True\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_video_gen_get_video",
      "lineno": 154,
      "outcome": "error",
      "keywords": [
        "test_video_gen_get_video",
        "__wrapped__",
        "patchings",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 30,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323975925840'>\n\n    @pytest.fixture\n    def video_gen(mock_session):\n>       return VideoGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323975925840'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_video_gen_save_video",
      "lineno": 177,
      "outcome": "error",
      "keywords": [
        "test_video_gen_save_video",
        "__wrapped__",
        "patchings",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 30,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323975934928'>\n\n    @pytest.fixture\n    def video_gen(mock_session):\n>       return VideoGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323975934928'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_image_gen_get_images",
      "lineno": 199,
      "outcome": "error",
      "keywords": [
        "test_image_gen_get_images",
        "__wrapped__",
        "patchings",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 25,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323974804112'>\n\n    @pytest.fixture\n    def image_gen(mock_session):\n>       return ImageGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323974804112'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_image_gen_save_images",
      "lineno": 219,
      "outcome": "error",
      "keywords": [
        "test_image_gen_save_images",
        "__wrapped__",
        "patchings",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 25,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323976101264'>\n\n    @pytest.fixture\n    def image_gen(mock_session):\n>       return ImageGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323976101264'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_extend_video_completed",
      "lineno": 242,
      "outcome": "error",
      "keywords": [
        "test_extend_video_completed",
        "__wrapped__",
        "patchings",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 30,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323975939920'>\n\n    @pytest.fixture\n    def video_gen(mock_session):\n>       return VideoGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323975939920'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_extend_video_pending",
      "lineno": 254,
      "outcome": "error",
      "keywords": [
        "test_extend_video_pending",
        "__wrapped__",
        "patchings",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 30,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323976141904'>\n\n    @pytest.fixture\n    def video_gen(mock_session):\n>       return VideoGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323976141904'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_extend_video_failed",
      "lineno": 265,
      "outcome": "error",
      "keywords": [
        "test_extend_video_failed",
        "__wrapped__",
        "patchings",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 30,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323973316368'>\n\n    @pytest.fixture\n    def video_gen(mock_session):\n>       return VideoGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323973316368'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_kling.py::test_extend_video_no_works",
      "lineno": 276,
      "outcome": "error",
      "keywords": [
        "test_extend_video_no_works",
        "__wrapped__",
        "patchings",
        "test_kling.py",
        "tests",
        "yihong0618@klingcreator__e567c6a1__requests__httpx",
        ""
      ],
      "setup": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\yihong0618@klingcreator__e567c6a1__requests__httpx\\kling\\kling.py",
          "lineno": 29,
          "message": "Exception: Call daily login failed with CN or Non-CN. The token may be incorrect."
        },
        "traceback": [
          {
            "path": "tests\\test_kling.py",
            "lineno": 30,
            "message": ""
          },
          {
            "path": "kling\\kling.py",
            "lineno": 47,
            "message": "in __init__"
          },
          {
            "path": "kling\\kling.py",
            "lineno": 29,
            "message": "Exception"
          }
        ],
        "longrepr": "mock_session = <MagicMock name='Client()' id='2323976015824'>\n\n    @pytest.fixture\n    def video_gen(mock_session):\n>       return VideoGen(\"mock_cookie\")\n               ^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_kling.py:30: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nkling\\kling.py:47: in __init__\n    call_for_daily_check(self.client, is_cn)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nclient = <MagicMock name='Client()' id='2323976015824'>, is_cn = False\n\n    def call_for_daily_check(client: httpx.Client, is_cn: bool) -> bool:\n        if is_cn:\n            r = client.get(f\"{base_url}api/pay/reward?activity=login_bonus_daily\")\n        else:\n            r = client.get(f\"{base_url_not_cn}api/pay/reward?activity=login_bonus_daily\")\n        if r.status_code == 200:\n            print(f\"Call daily login success with {is_cn}:\\n{r.json()}\\n\")\n            return True\n    \n>       raise Exception(\n            \"Call daily login failed with CN or Non-CN. The token may be incorrect.\"\n        )\nE       Exception: Call daily login failed with CN or Non-CN. The token may be incorrect.\n\nkling\\kling.py:29: Exception"
      },
      "teardown": {
        "outcome": "passed"
      }
    }
  ]
}