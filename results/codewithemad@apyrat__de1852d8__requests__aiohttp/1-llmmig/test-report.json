{
  "exitcode": 1,
  "summary": {
    "failed": 8,
    "total": 8,
    "collected": 8
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": ".",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "apyrat",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "apyrat.egg-info",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "tests/cli_test.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/cli_test.py::test_main_download_video_with_quality",
          "type": "Function",
          "lineno": 6
        },
        {
          "nodeid": "tests/cli_test.py::test_main_download_video_without_quality",
          "type": "Function",
          "lineno": 24
        },
        {
          "nodeid": "tests/cli_test.py::test_get_quality_available",
          "type": "Function",
          "lineno": 34
        },
        {
          "nodeid": "tests/cli_test.py::test_get_quality_not_available",
          "type": "Function",
          "lineno": 41
        },
        {
          "nodeid": "tests/cli_test.py::test_get_quality_not_available_no_confirm",
          "type": "Function",
          "lineno": 48
        }
      ]
    },
    {
      "nodeid": "tests/test_apyrat.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_apyrat.py::test_get_available_videos_single_video",
          "type": "Function",
          "lineno": 4
        },
        {
          "nodeid": "tests/test_apyrat.py::test_default_quality",
          "type": "Function",
          "lineno": 23
        },
        {
          "nodeid": "tests/test_apyrat.py::test_download_when_file_exists",
          "type": "Function",
          "lineno": 29
        }
      ]
    },
    {
      "nodeid": "tests",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/cli_test.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_apyrat.py",
          "type": "Module"
        }
      ]
    },
    {
      "nodeid": ".",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "apyrat",
          "type": "Package"
        },
        {
          "nodeid": "apyrat.egg-info",
          "type": "Dir"
        },
        {
          "nodeid": "tests",
          "type": "Package"
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/cli_test.py::test_main_download_video_with_quality",
      "lineno": 6,
      "outcome": "failed",
      "keywords": [
        "test_main_download_video_with_quality",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__requests__aiohttp\\tests\\cli_test.py",
          "lineno": 21,
          "message": "AssertionError: assert 1 == 0\n +  where 1 = <Result RuntimeError('no running event loop')>.exit_code"
        },
        "traceback": [
          {
            "path": "tests\\cli_test.py",
            "lineno": 21,
            "message": "AssertionError"
          }
        ],
        "longrepr": "def test_main_download_video_with_quality():\n        runner = CliRunner()\n        with patch(\n            \"apyrat.apyrat.Downloader._get_available_qualities\",\n            return_value=[\"480\", \"720\", \"1080\"],\n        ) as mock_qualities:\n            result = runner.invoke(\n                main,\n                [\n                    \"https://www.aparat.com/v/qur3I\",\n                    \"-q\",\n                    \"720\",\n                ],\n            )\n>       assert result.exit_code == 0\nE       AssertionError: assert 1 == 0\nE        +  where 1 = <Result RuntimeError('no running event loop')>.exit_code\n\ntests\\cli_test.py:21: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/cli_test.py::test_main_download_video_without_quality",
      "lineno": 24,
      "outcome": "failed",
      "keywords": [
        "test_main_download_video_without_quality",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__requests__aiohttp\\tests\\cli_test.py",
          "lineno": 32,
          "message": "AssertionError: assert 1 == 0\n +  where 1 = <Result RuntimeError('no running event loop')>.exit_code"
        },
        "traceback": [
          {
            "path": "tests\\cli_test.py",
            "lineno": 32,
            "message": "AssertionError"
          }
        ],
        "longrepr": "def test_main_download_video_without_quality():\n        runner = CliRunner()\n        with patch(\n            \"apyrat.apyrat.Downloader._get_available_qualities\",\n            return_value=[\"480\", \"720\", \"1080\"],\n        ), patch(\"click.prompt\", return_value=\"720\"):\n            result = runner.invoke(main, [\"https://www.aparat.com/v/qur3I\"])\n>       assert result.exit_code == 0\nE       AssertionError: assert 1 == 0\nE        +  where 1 = <Result RuntimeError('no running event loop')>.exit_code\n\ntests\\cli_test.py:32: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/cli_test.py::test_get_quality_available",
      "lineno": 34,
      "outcome": "failed",
      "keywords": [
        "test_get_quality_available",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__requests__aiohttp\\.venv\\Lib\\site-packages\\aiohttp\\client.py",
          "lineno": 310,
          "message": "RuntimeError: no running event loop"
        },
        "traceback": [
          {
            "path": "tests\\cli_test.py",
            "lineno": 36,
            "message": ""
          },
          {
            "path": "apyrat\\apyrat.py",
            "lineno": 39,
            "message": "in __init__"
          },
          {
            "path": ".venv\\Lib\\site-packages\\aiohttp\\client.py",
            "lineno": 310,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "def test_get_quality_available():\n>       downloader = Downloader(\"https://www.aparat.com/v/qur3I\")\n\ntests\\cli_test.py:36: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\napyrat\\apyrat.py:39: in __init__\n    self.session = aiohttp.ClientSession()  # Initialize aiohttp session\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <aiohttp.client.ClientSession object at 0x0000021270303CB0>\nbase_url = None\n\n    def __init__(\n        self,\n        base_url: Optional[StrOrURL] = None,\n        *,\n        connector: Optional[BaseConnector] = None,\n        loop: Optional[asyncio.AbstractEventLoop] = None,\n        cookies: Optional[LooseCookies] = None,\n        headers: Optional[LooseHeaders] = None,\n        proxy: Optional[StrOrURL] = None,\n        proxy_auth: Optional[BasicAuth] = None,\n        skip_auto_headers: Optional[Iterable[str]] = None,\n        auth: Optional[BasicAuth] = None,\n        json_serialize: JSONEncoder = json.dumps,\n        request_class: Type[ClientRequest] = ClientRequest,\n        response_class: Type[ClientResponse] = ClientResponse,\n        ws_response_class: Type[ClientWebSocketResponse] = ClientWebSocketResponse,\n        version: HttpVersion = http.HttpVersion11,\n        cookie_jar: Optional[AbstractCookieJar] = None,\n        connector_owner: bool = True,\n        raise_for_status: Union[\n            bool, Callable[[ClientResponse], Awaitable[None]]\n        ] = False,\n        read_timeout: Union[float, _SENTINEL] = sentinel,\n        conn_timeout: Optional[float] = None,\n        timeout: Union[object, ClientTimeout] = sentinel,\n        auto_decompress: bool = True,\n        trust_env: bool = False,\n        requote_redirect_url: bool = True,\n        trace_configs: Optional[List[TraceConfig]] = None,\n        read_bufsize: int = 2**16,\n        max_line_size: int = 8190,\n        max_field_size: int = 8190,\n        fallback_charset_resolver: _CharsetResolver = lambda r, b: \"utf-8\",\n    ) -> None:\n        # We initialise _connector to None immediately, as it's referenced in __del__()\n        # and could cause issues if an exception occurs during initialisation.\n        self._connector: Optional[BaseConnector] = None\n    \n        if loop is None:\n            if connector is not None:\n                loop = connector._loop\n    \n>       loop = loop or asyncio.get_running_loop()\nE       RuntimeError: no running event loop\n\n.venv\\Lib\\site-packages\\aiohttp\\client.py:310: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/cli_test.py::test_get_quality_not_available",
      "lineno": 41,
      "outcome": "failed",
      "keywords": [
        "test_get_quality_not_available",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__requests__aiohttp\\.venv\\Lib\\site-packages\\aiohttp\\client.py",
          "lineno": 310,
          "message": "RuntimeError: no running event loop"
        },
        "traceback": [
          {
            "path": "tests\\cli_test.py",
            "lineno": 43,
            "message": ""
          },
          {
            "path": "apyrat\\apyrat.py",
            "lineno": 39,
            "message": "in __init__"
          },
          {
            "path": ".venv\\Lib\\site-packages\\aiohttp\\client.py",
            "lineno": 310,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "def test_get_quality_not_available():\n>       downloader = Downloader(\"https://www.aparat.com/v/qur3I\")\n\ntests\\cli_test.py:43: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\napyrat\\apyrat.py:39: in __init__\n    self.session = aiohttp.ClientSession()  # Initialize aiohttp session\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <aiohttp.client.ClientSession object at 0x00000212706B9460>\nbase_url = None\n\n    def __init__(\n        self,\n        base_url: Optional[StrOrURL] = None,\n        *,\n        connector: Optional[BaseConnector] = None,\n        loop: Optional[asyncio.AbstractEventLoop] = None,\n        cookies: Optional[LooseCookies] = None,\n        headers: Optional[LooseHeaders] = None,\n        proxy: Optional[StrOrURL] = None,\n        proxy_auth: Optional[BasicAuth] = None,\n        skip_auto_headers: Optional[Iterable[str]] = None,\n        auth: Optional[BasicAuth] = None,\n        json_serialize: JSONEncoder = json.dumps,\n        request_class: Type[ClientRequest] = ClientRequest,\n        response_class: Type[ClientResponse] = ClientResponse,\n        ws_response_class: Type[ClientWebSocketResponse] = ClientWebSocketResponse,\n        version: HttpVersion = http.HttpVersion11,\n        cookie_jar: Optional[AbstractCookieJar] = None,\n        connector_owner: bool = True,\n        raise_for_status: Union[\n            bool, Callable[[ClientResponse], Awaitable[None]]\n        ] = False,\n        read_timeout: Union[float, _SENTINEL] = sentinel,\n        conn_timeout: Optional[float] = None,\n        timeout: Union[object, ClientTimeout] = sentinel,\n        auto_decompress: bool = True,\n        trust_env: bool = False,\n        requote_redirect_url: bool = True,\n        trace_configs: Optional[List[TraceConfig]] = None,\n        read_bufsize: int = 2**16,\n        max_line_size: int = 8190,\n        max_field_size: int = 8190,\n        fallback_charset_resolver: _CharsetResolver = lambda r, b: \"utf-8\",\n    ) -> None:\n        # We initialise _connector to None immediately, as it's referenced in __del__()\n        # and could cause issues if an exception occurs during initialisation.\n        self._connector: Optional[BaseConnector] = None\n    \n        if loop is None:\n            if connector is not None:\n                loop = connector._loop\n    \n>       loop = loop or asyncio.get_running_loop()\nE       RuntimeError: no running event loop\n\n.venv\\Lib\\site-packages\\aiohttp\\client.py:310: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/cli_test.py::test_get_quality_not_available_no_confirm",
      "lineno": 48,
      "outcome": "failed",
      "keywords": [
        "test_get_quality_not_available_no_confirm",
        "cli_test.py",
        "tests",
        "codewithemad@apyrat__de1852d8__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__requests__aiohttp\\.venv\\Lib\\site-packages\\aiohttp\\client.py",
          "lineno": 310,
          "message": "RuntimeError: no running event loop"
        },
        "traceback": [
          {
            "path": "tests\\cli_test.py",
            "lineno": 50,
            "message": ""
          },
          {
            "path": "apyrat\\apyrat.py",
            "lineno": 39,
            "message": "in __init__"
          },
          {
            "path": ".venv\\Lib\\site-packages\\aiohttp\\client.py",
            "lineno": 310,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "def test_get_quality_not_available_no_confirm():\n>       downloader = Downloader(\"https://www.aparat.com/v/qur3I\")\n\ntests\\cli_test.py:50: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\napyrat\\apyrat.py:39: in __init__\n    self.session = aiohttp.ClientSession()  # Initialize aiohttp session\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <aiohttp.client.ClientSession object at 0x00000212703031A0>\nbase_url = None\n\n    def __init__(\n        self,\n        base_url: Optional[StrOrURL] = None,\n        *,\n        connector: Optional[BaseConnector] = None,\n        loop: Optional[asyncio.AbstractEventLoop] = None,\n        cookies: Optional[LooseCookies] = None,\n        headers: Optional[LooseHeaders] = None,\n        proxy: Optional[StrOrURL] = None,\n        proxy_auth: Optional[BasicAuth] = None,\n        skip_auto_headers: Optional[Iterable[str]] = None,\n        auth: Optional[BasicAuth] = None,\n        json_serialize: JSONEncoder = json.dumps,\n        request_class: Type[ClientRequest] = ClientRequest,\n        response_class: Type[ClientResponse] = ClientResponse,\n        ws_response_class: Type[ClientWebSocketResponse] = ClientWebSocketResponse,\n        version: HttpVersion = http.HttpVersion11,\n        cookie_jar: Optional[AbstractCookieJar] = None,\n        connector_owner: bool = True,\n        raise_for_status: Union[\n            bool, Callable[[ClientResponse], Awaitable[None]]\n        ] = False,\n        read_timeout: Union[float, _SENTINEL] = sentinel,\n        conn_timeout: Optional[float] = None,\n        timeout: Union[object, ClientTimeout] = sentinel,\n        auto_decompress: bool = True,\n        trust_env: bool = False,\n        requote_redirect_url: bool = True,\n        trace_configs: Optional[List[TraceConfig]] = None,\n        read_bufsize: int = 2**16,\n        max_line_size: int = 8190,\n        max_field_size: int = 8190,\n        fallback_charset_resolver: _CharsetResolver = lambda r, b: \"utf-8\",\n    ) -> None:\n        # We initialise _connector to None immediately, as it's referenced in __del__()\n        # and could cause issues if an exception occurs during initialisation.\n        self._connector: Optional[BaseConnector] = None\n    \n        if loop is None:\n            if connector is not None:\n                loop = connector._loop\n    \n>       loop = loop or asyncio.get_running_loop()\nE       RuntimeError: no running event loop\n\n.venv\\Lib\\site-packages\\aiohttp\\client.py:310: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_apyrat.py::test_get_available_videos_single_video",
      "lineno": 4,
      "outcome": "failed",
      "keywords": [
        "test_get_available_videos_single_video",
        "__wrapped__",
        "patchings",
        "test_apyrat.py",
        "tests",
        "codewithemad@apyrat__de1852d8__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__requests__aiohttp\\.venv\\Lib\\site-packages\\aiohttp\\client.py",
          "lineno": 310,
          "message": "RuntimeError: no running event loop"
        },
        "traceback": [
          {
            "path": "tests\\test_apyrat.py",
            "lineno": 18,
            "message": ""
          },
          {
            "path": "apyrat\\apyrat.py",
            "lineno": 39,
            "message": "in __init__"
          },
          {
            "path": ".venv\\Lib\\site-packages\\aiohttp\\client.py",
            "lineno": 310,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "mock_get = <MagicMock name='get' id='2278214872112'>\n\n    @patch(\"requests.get\")\n    def test_get_available_videos_single_video(mock_get):\n        mock_get.return_value.json.return_value = {\n            \"data\": {\n                \"attributes\": {\n                    \"title\": \"My Video Title\",\n                    \"file_link_all\": [\n                        {\"profile\": \"720p\", \"urls\": [\"https://link-to-video\"]},\n                        {\"profile\": \"1080p\", \"urls\": [\"https://link-to-video\"]},\n                    ],\n                }\n            }\n        }\n>       downloader = Downloader(\"https://www.aparat.com/v/qur3I\", \"outputfile\")\n\ntests\\test_apyrat.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\napyrat\\apyrat.py:39: in __init__\n    self.session = aiohttp.ClientSession()  # Initialize aiohttp session\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <aiohttp.client.ClientSession object at 0x000002127081DBB0>\nbase_url = None\n\n    def __init__(\n        self,\n        base_url: Optional[StrOrURL] = None,\n        *,\n        connector: Optional[BaseConnector] = None,\n        loop: Optional[asyncio.AbstractEventLoop] = None,\n        cookies: Optional[LooseCookies] = None,\n        headers: Optional[LooseHeaders] = None,\n        proxy: Optional[StrOrURL] = None,\n        proxy_auth: Optional[BasicAuth] = None,\n        skip_auto_headers: Optional[Iterable[str]] = None,\n        auth: Optional[BasicAuth] = None,\n        json_serialize: JSONEncoder = json.dumps,\n        request_class: Type[ClientRequest] = ClientRequest,\n        response_class: Type[ClientResponse] = ClientResponse,\n        ws_response_class: Type[ClientWebSocketResponse] = ClientWebSocketResponse,\n        version: HttpVersion = http.HttpVersion11,\n        cookie_jar: Optional[AbstractCookieJar] = None,\n        connector_owner: bool = True,\n        raise_for_status: Union[\n            bool, Callable[[ClientResponse], Awaitable[None]]\n        ] = False,\n        read_timeout: Union[float, _SENTINEL] = sentinel,\n        conn_timeout: Optional[float] = None,\n        timeout: Union[object, ClientTimeout] = sentinel,\n        auto_decompress: bool = True,\n        trust_env: bool = False,\n        requote_redirect_url: bool = True,\n        trace_configs: Optional[List[TraceConfig]] = None,\n        read_bufsize: int = 2**16,\n        max_line_size: int = 8190,\n        max_field_size: int = 8190,\n        fallback_charset_resolver: _CharsetResolver = lambda r, b: \"utf-8\",\n    ) -> None:\n        # We initialise _connector to None immediately, as it's referenced in __del__()\n        # and could cause issues if an exception occurs during initialisation.\n        self._connector: Optional[BaseConnector] = None\n    \n        if loop is None:\n            if connector is not None:\n                loop = connector._loop\n    \n>       loop = loop or asyncio.get_running_loop()\nE       RuntimeError: no running event loop\n\n.venv\\Lib\\site-packages\\aiohttp\\client.py:310: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_apyrat.py::test_default_quality",
      "lineno": 23,
      "outcome": "failed",
      "keywords": [
        "test_default_quality",
        "test_apyrat.py",
        "tests",
        "codewithemad@apyrat__de1852d8__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__requests__aiohttp\\.venv\\Lib\\site-packages\\aiohttp\\client.py",
          "lineno": 310,
          "message": "RuntimeError: no running event loop"
        },
        "traceback": [
          {
            "path": "tests\\test_apyrat.py",
            "lineno": 25,
            "message": ""
          },
          {
            "path": "apyrat\\apyrat.py",
            "lineno": 39,
            "message": "in __init__"
          },
          {
            "path": ".venv\\Lib\\site-packages\\aiohttp\\client.py",
            "lineno": 310,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "def test_default_quality():\n>       downloader = Downloader(\"https://www.aparat.com/v/qur3I\", \"outputfile\")\n\ntests\\test_apyrat.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\napyrat\\apyrat.py:39: in __init__\n    self.session = aiohttp.ClientSession()  # Initialize aiohttp session\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <aiohttp.client.ClientSession object at 0x00000212718DA360>\nbase_url = None\n\n    def __init__(\n        self,\n        base_url: Optional[StrOrURL] = None,\n        *,\n        connector: Optional[BaseConnector] = None,\n        loop: Optional[asyncio.AbstractEventLoop] = None,\n        cookies: Optional[LooseCookies] = None,\n        headers: Optional[LooseHeaders] = None,\n        proxy: Optional[StrOrURL] = None,\n        proxy_auth: Optional[BasicAuth] = None,\n        skip_auto_headers: Optional[Iterable[str]] = None,\n        auth: Optional[BasicAuth] = None,\n        json_serialize: JSONEncoder = json.dumps,\n        request_class: Type[ClientRequest] = ClientRequest,\n        response_class: Type[ClientResponse] = ClientResponse,\n        ws_response_class: Type[ClientWebSocketResponse] = ClientWebSocketResponse,\n        version: HttpVersion = http.HttpVersion11,\n        cookie_jar: Optional[AbstractCookieJar] = None,\n        connector_owner: bool = True,\n        raise_for_status: Union[\n            bool, Callable[[ClientResponse], Awaitable[None]]\n        ] = False,\n        read_timeout: Union[float, _SENTINEL] = sentinel,\n        conn_timeout: Optional[float] = None,\n        timeout: Union[object, ClientTimeout] = sentinel,\n        auto_decompress: bool = True,\n        trust_env: bool = False,\n        requote_redirect_url: bool = True,\n        trace_configs: Optional[List[TraceConfig]] = None,\n        read_bufsize: int = 2**16,\n        max_line_size: int = 8190,\n        max_field_size: int = 8190,\n        fallback_charset_resolver: _CharsetResolver = lambda r, b: \"utf-8\",\n    ) -> None:\n        # We initialise _connector to None immediately, as it's referenced in __del__()\n        # and could cause issues if an exception occurs during initialisation.\n        self._connector: Optional[BaseConnector] = None\n    \n        if loop is None:\n            if connector is not None:\n                loop = connector._loop\n    \n>       loop = loop or asyncio.get_running_loop()\nE       RuntimeError: no running event loop\n\n.venv\\Lib\\site-packages\\aiohttp\\client.py:310: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_apyrat.py::test_download_when_file_exists",
      "lineno": 29,
      "outcome": "failed",
      "keywords": [
        "test_download_when_file_exists",
        "__wrapped__",
        "patchings",
        "test_apyrat.py",
        "tests",
        "codewithemad@apyrat__de1852d8__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\codewithemad@apyrat__de1852d8__requests__aiohttp\\.venv\\Lib\\site-packages\\aiohttp\\client.py",
          "lineno": 310,
          "message": "RuntimeError: no running event loop"
        },
        "traceback": [
          {
            "path": "tests\\test_apyrat.py",
            "lineno": 33,
            "message": ""
          },
          {
            "path": "apyrat\\apyrat.py",
            "lineno": 39,
            "message": "in __init__"
          },
          {
            "path": ".venv\\Lib\\site-packages\\aiohttp\\client.py",
            "lineno": 310,
            "message": "RuntimeError"
          }
        ],
        "longrepr": "mock_wget = <MagicMock name='download' id='2278237777472'>\nmock_isfile = <MagicMock name='isfile' id='2278237777136'>\n\n    @patch(\"os.path.isfile\", return_value=True)\n    @patch(\"wget.download\")\n    def test_download_when_file_exists(mock_wget, mock_isfile):\n>       downloader = Downloader(\"https://www.aparat.com/v/qur3I\", \"outputfile\")\n\ntests\\test_apyrat.py:33: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\napyrat\\apyrat.py:39: in __init__\n    self.session = aiohttp.ClientSession()  # Initialize aiohttp session\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <aiohttp.client.ClientSession object at 0x00000212718DBF20>\nbase_url = None\n\n    def __init__(\n        self,\n        base_url: Optional[StrOrURL] = None,\n        *,\n        connector: Optional[BaseConnector] = None,\n        loop: Optional[asyncio.AbstractEventLoop] = None,\n        cookies: Optional[LooseCookies] = None,\n        headers: Optional[LooseHeaders] = None,\n        proxy: Optional[StrOrURL] = None,\n        proxy_auth: Optional[BasicAuth] = None,\n        skip_auto_headers: Optional[Iterable[str]] = None,\n        auth: Optional[BasicAuth] = None,\n        json_serialize: JSONEncoder = json.dumps,\n        request_class: Type[ClientRequest] = ClientRequest,\n        response_class: Type[ClientResponse] = ClientResponse,\n        ws_response_class: Type[ClientWebSocketResponse] = ClientWebSocketResponse,\n        version: HttpVersion = http.HttpVersion11,\n        cookie_jar: Optional[AbstractCookieJar] = None,\n        connector_owner: bool = True,\n        raise_for_status: Union[\n            bool, Callable[[ClientResponse], Awaitable[None]]\n        ] = False,\n        read_timeout: Union[float, _SENTINEL] = sentinel,\n        conn_timeout: Optional[float] = None,\n        timeout: Union[object, ClientTimeout] = sentinel,\n        auto_decompress: bool = True,\n        trust_env: bool = False,\n        requote_redirect_url: bool = True,\n        trace_configs: Optional[List[TraceConfig]] = None,\n        read_bufsize: int = 2**16,\n        max_line_size: int = 8190,\n        max_field_size: int = 8190,\n        fallback_charset_resolver: _CharsetResolver = lambda r, b: \"utf-8\",\n    ) -> None:\n        # We initialise _connector to None immediately, as it's referenced in __del__()\n        # and could cause issues if an exception occurs during initialisation.\n        self._connector: Optional[BaseConnector] = None\n    \n        if loop is None:\n            if connector is not None:\n                loop = connector._loop\n    \n>       loop = loop or asyncio.get_running_loop()\nE       RuntimeError: no running event loop\n\n.venv\\Lib\\site-packages\\aiohttp\\client.py:310: RuntimeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    }
  ]
}