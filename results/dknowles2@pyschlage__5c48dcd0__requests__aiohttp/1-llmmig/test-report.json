{
  "exitcode": 1,
  "summary": {
    "failed": 25,
    "passed": 33,
    "total": 58,
    "collected": 58
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": ".",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "docs",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "pyschlage",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "pyschlage.egg-info",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "scripts",
      "outcome": "passed",
      "result": []
    },
    {
      "nodeid": "tests/test_api.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_api.py::test_locks",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "tests/test_api.py::test_users",
          "type": "Function",
          "lineno": 33
        }
      ]
    },
    {
      "nodeid": "tests/test_auth.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_auth.py::test_authenticate",
          "type": "Coroutine",
          "lineno": 10
        },
        {
          "nodeid": "tests/test_auth.py::test_request",
          "type": "Coroutine",
          "lineno": 28
        },
        {
          "nodeid": "tests/test_auth.py::test_request_not_authorized",
          "type": "Coroutine",
          "lineno": 49
        },
        {
          "nodeid": "tests/test_auth.py::test_request_unknown_error",
          "type": "Coroutine",
          "lineno": 81
        },
        {
          "nodeid": "tests/test_auth.py::test_user_id",
          "type": "Coroutine",
          "lineno": 110
        },
        {
          "nodeid": "tests/test_auth.py::test_user_id_is_cached",
          "type": "Coroutine",
          "lineno": 136
        }
      ]
    },
    {
      "nodeid": "tests/test_code.py::TestAccessCode",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_code.py::TestAccessCode::test_to_from_json",
          "type": "Function",
          "lineno": 14
        },
        {
          "nodeid": "tests/test_code.py::TestAccessCode::test_to_from_json_recurring_schedule",
          "type": "Function",
          "lineno": 31
        },
        {
          "nodeid": "tests/test_code.py::TestAccessCode::test_to_from_json_temporary_schedule",
          "type": "Function",
          "lineno": 53
        },
        {
          "nodeid": "tests/test_code.py::TestAccessCode::test_save",
          "type": "Function",
          "lineno": 77
        },
        {
          "nodeid": "tests/test_code.py::TestAccessCode::test_delete",
          "type": "Function",
          "lineno": 107
        }
      ]
    },
    {
      "nodeid": "tests/test_code.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_code.py::TestAccessCode",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_common.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_common.py::test_pickle_unpickle",
          "type": "Function",
          "lineno": 10
        },
        {
          "nodeid": "tests/test_common.py::test_redact_allow_asterisk",
          "type": "Function",
          "lineno": 35
        },
        {
          "nodeid": "tests/test_common.py::test_redact_allow_all",
          "type": "Function",
          "lineno": 39
        },
        {
          "nodeid": "tests/test_common.py::test_redact_all",
          "type": "Function",
          "lineno": 50
        },
        {
          "nodeid": "tests/test_common.py::test_redact_partial",
          "type": "Function",
          "lineno": 67
        }
      ]
    },
    {
      "nodeid": "tests/test_lock.py::TestLock",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_lock.py::TestLock::test_from_json",
          "type": "Function",
          "lineno": 18
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_from_json_cat_optional",
          "type": "Function",
          "lineno": 40
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_from_json_no_connected",
          "type": "Function",
          "lineno": 47
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_from_json_is_jammed",
          "type": "Function",
          "lineno": 54
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_from_json_wifi_lock_unavailable",
          "type": "Function",
          "lineno": 60
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_from_json_no_model_name",
          "type": "Function",
          "lineno": 69
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_diagnostics",
          "type": "Function",
          "lineno": 76
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_refresh",
          "type": "Function",
          "lineno": 142
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_send_command_unauthenticated",
          "type": "Function",
          "lineno": 172
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_lock_wifi",
          "type": "Function",
          "lineno": 176
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_unlock_wifi",
          "type": "Function",
          "lineno": 192
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_lock_ble",
          "type": "Function",
          "lineno": 208
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_unlock_ble",
          "type": "Function",
          "lineno": 229
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_logs",
          "type": "Function",
          "lineno": 250
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_refresh_access_codes",
          "type": "Function",
          "lineno": 273
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_add_access_code",
          "type": "Function",
          "lineno": 305
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_set_beeper",
          "type": "Function",
          "lineno": 348
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_set_lock_and_leave",
          "type": "Function",
          "lineno": 360
        },
        {
          "nodeid": "tests/test_lock.py::TestLock::test_set_auto_lock_time",
          "type": "Function",
          "lineno": 374
        }
      ]
    },
    {
      "nodeid": "tests/test_lock.py::TestKeypadDisabled",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_true",
          "type": "Function",
          "lineno": 393
        },
        {
          "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_true_unsorted",
          "type": "Function",
          "lineno": 406
        },
        {
          "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_false",
          "type": "Function",
          "lineno": 419
        },
        {
          "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_fetches_logs",
          "type": "Function",
          "lineno": 432
        },
        {
          "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_fetches_logs_no_logs",
          "type": "Function",
          "lineno": 447
        }
      ]
    },
    {
      "nodeid": "tests/test_lock.py::TestChangedBy",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_lock.py::TestChangedBy::test_thumbturn",
          "type": "Function",
          "lineno": 455
        },
        {
          "nodeid": "tests/test_lock.py::TestChangedBy::test_one_touch_locking",
          "type": "Function",
          "lineno": 460
        },
        {
          "nodeid": "tests/test_lock.py::TestChangedBy::test_nfc_device",
          "type": "Function",
          "lineno": 465
        },
        {
          "nodeid": "tests/test_lock.py::TestChangedBy::test_nfc_device_no_uuid",
          "type": "Function",
          "lineno": 471
        },
        {
          "nodeid": "tests/test_lock.py::TestChangedBy::test_keypad",
          "type": "Function",
          "lineno": 477
        },
        {
          "nodeid": "tests/test_lock.py::TestChangedBy::test_mobile_device",
          "type": "Function",
          "lineno": 483
        },
        {
          "nodeid": "tests/test_lock.py::TestChangedBy::test_unknown",
          "type": "Function",
          "lineno": 495
        },
        {
          "nodeid": "tests/test_lock.py::TestChangedBy::test_no_metadata",
          "type": "Function",
          "lineno": 498
        }
      ]
    },
    {
      "nodeid": "tests/test_lock.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_lock.py::TestLock",
          "type": "Class"
        },
        {
          "nodeid": "tests/test_lock.py::TestKeypadDisabled",
          "type": "Class"
        },
        {
          "nodeid": "tests/test_lock.py::TestChangedBy",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_log.py::TestFromJson",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_log.py::TestFromJson::test_unlocked_by_thumbturn",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "tests/test_log.py::TestFromJson::test_unlocked_by_keypad",
          "type": "Function",
          "lineno": 18
        },
        {
          "nodeid": "tests/test_log.py::TestFromJson::test_unlocked_by_mobile_device",
          "type": "Function",
          "lineno": 33
        }
      ]
    },
    {
      "nodeid": "tests/test_log.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_log.py::TestFromJson",
          "type": "Class"
        }
      ]
    },
    {
      "nodeid": "tests/test_notification.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_notification.py::test_from_json",
          "type": "Function",
          "lineno": 10
        },
        {
          "nodeid": "tests/test_notification.py::test_save",
          "type": "Function",
          "lineno": 18
        },
        {
          "nodeid": "tests/test_notification.py::test_delete",
          "type": "Function",
          "lineno": 23
        }
      ]
    },
    {
      "nodeid": "tests/test_user.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_user.py::test_from_json",
          "type": "Function",
          "lineno": 5
        },
        {
          "nodeid": "tests/test_user.py::test_from_json_no_name",
          "type": "Function",
          "lineno": 14
        }
      ]
    },
    {
      "nodeid": "tests",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_api.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_auth.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_code.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_common.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_lock.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_log.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_notification.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/test_user.py",
          "type": "Module"
        }
      ]
    },
    {
      "nodeid": ".",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "docs",
          "type": "Dir"
        },
        {
          "nodeid": "pyschlage",
          "type": "Package"
        },
        {
          "nodeid": "pyschlage.egg-info",
          "type": "Dir"
        },
        {
          "nodeid": "scripts",
          "type": "Dir"
        },
        {
          "nodeid": "tests",
          "type": "Package"
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/test_api.py::test_locks",
      "lineno": 8,
      "outcome": "failed",
      "keywords": [
        "test_locks",
        "test_api.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\api.py",
          "lineno": 31,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_api.py",
            "lineno": 21,
            "message": ""
          },
          {
            "path": "pyschlage\\api.py",
            "lineno": 31,
            "message": "AttributeError"
          }
        ],
        "longrepr": "mock_auth = <MagicMock spec_set='Auth' id='2308925125024'>\nlock_json = {'CAT': '01234', 'SAT': '98765', 'attributes': {'CAT': '01234', 'SAT': '98765', 'accessCodeLength': 4, 'actAlarmBuzzerEnabled': 0, ...}, 'connected': True, ...}\naccess_code_json = {'accessCode': 123, 'accessCodeLength': 4, 'accesscodeId': '__access_code_uuid__', 'activationSecs': 0, ...}\nnotification_json = {'active': True, 'createdAt': '2023-03-01T17:26:47.366Z', 'deviceId': '__wifi_uuid__', 'devicetypeId': 'be489wifi', ...}\n\n    def test_locks(\n        mock_auth: mock.Mock,\n        lock_json: dict[str, Any],\n        access_code_json: dict[str, Any],\n        notification_json: dict[str, Any],\n    ) -> None:\n        schlage = api.Schlage(mock_auth)\n        mock_auth.request.side_effect = [\n            mock.Mock(json=mock.Mock(return_value=[lock_json])),\n            mock.Mock(json=mock.Mock(return_value=[notification_json])),\n            mock.Mock(json=mock.Mock(return_value=[access_code_json])),\n        ]\n>       locks = schlage.locks()\n\ntests\\test_api.py:21: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pyschlage.api.Schlage object at 0x0000021998B39EE0>\n\n    def locks(self) -> list[Lock]:\n        \"\"\"Retrieves all locks associated with this account.\n    \n        :rtype: list[Lock]\n        :raise pyschlage.exceptions.NotAuthorizedError: When authentication fails.\n        :raise pyschlage.exceptions.UnknownError: On other errors.\n        \"\"\"\n        path = Lock.request_path()\n        response = self._auth.request(\"get\", path, params={\"archetype\": \"lock\"})\n        locks = []\n>       for lock_json in response.json():\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\api.py:31: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_api.py::test_users",
      "lineno": 33,
      "outcome": "failed",
      "keywords": [
        "test_users",
        "test_api.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\api.py",
          "lineno": 46,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_api.py",
            "lineno": 40,
            "message": ""
          },
          {
            "path": "pyschlage\\api.py",
            "lineno": 46,
            "message": "AttributeError"
          }
        ],
        "longrepr": "mock_auth = <MagicMock spec_set='Auth' id='2308959350336'>\nlock_users_json = [{'consentRecords': [], 'created': '2022-12-24T20:00:00.000Z', 'email': 'asdf@asdf.com', 'friendlyName': 'asdf', ...}, {'consentRecords': [], 'created': '2022-12-24T20:00:00.000Z', 'email': 'foo@bar.xyz', 'friendlyName': 'Foo Bar', ...}]\n\n    def test_users(mock_auth: mock.Mock, lock_users_json: list[dict]) -> None:\n        schlage = api.Schlage(mock_auth)\n        mock_auth.request.return_value = mock.Mock(\n            json=mock.Mock(return_value=lock_users_json)\n        )\n    \n>       users = schlage.users()\n\ntests\\test_api.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pyschlage.api.Schlage object at 0x0000021998B8E600>\n\n    def users(self) -> list[User]:\n        \"\"\"Retrieves all users associated with this account's locks.\n    \n        :rtype: list[User]\n        :raise pyschlage.exceptions.NotAuthorizedError: When authentication fails.\n        :raise pyschlage.exceptions.UnknownError: On other errors.\n        \"\"\"\n        path = User.request_path()\n        response = self._auth.request(\"get\", path)\n>       return [User.from_json(u) for u in response.json()]\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\api.py:46: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_auth.py::test_authenticate",
      "lineno": 10,
      "outcome": "failed",
      "keywords": [
        "test_authenticate",
        "asyncio",
        "pytestmark",
        "__wrapped__",
        "patchings",
        "test_auth.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
          "lineno": 103,
          "message": "TypeError: ClientRequest.__init__() missing 2 required positional arguments: 'method' and 'url'"
        },
        "traceback": [
          {
            "path": "tests\\test_auth.py",
            "lineno": 25,
            "message": ""
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 39,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 103,
            "message": "TypeError"
          }
        ],
        "longrepr": "mock_cognito = <MagicMock name='Cognito' id='2308959688592'>\nmock_srp_auth = <MagicMock name='RequestsSrpAuth' id='2308959696512'>\nmock_client_session = <MagicMock name='ClientSession' id='2308959782528'>\n\n    @mock.patch(\"aiohttp.ClientSession\")\n    @mock.patch(\"pycognito.utils.RequestsSrpAuth\")\n    @mock.patch(\"pycognito.Cognito\")\n    @pytest.mark.asyncio\n    async def test_authenticate(mock_cognito, mock_srp_auth, mock_client_session):\n        auth = _auth.Auth(\"__username__\", \"__password__\")\n    \n        mock_cognito.assert_called_once()\n        assert mock_cognito.call_args.kwargs[\"username\"] == \"__username__\"\n    \n        mock_srp_auth.assert_called_once_with(\n            password=\"__password__\", cognito=mock_cognito.return_value\n        )\n    \n>       await auth.authenticate()\n\ntests\\test_auth.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\auth.py:39: in wrapper\n    return await fn(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pyschlage.auth.Auth object at 0x0000021998B8D700>\n\n    @_translate_auth_errors\n    async def authenticate(self):\n        \"\"\"Performs authentication with AWS.\n    \n        :raise pyschlage.exceptions.NotAuthorizedError: When authentication fails.\n        :raise pyschlage.exceptions.UnknownError: On other errors.\n        \"\"\"\n>       await self.auth(aiohttp.ClientRequest())\nE       TypeError: ClientRequest.__init__() missing 2 required positional arguments: 'method' and 'url'\n\npyschlage\\auth.py:103: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_auth.py::test_request",
      "lineno": 28,
      "outcome": "failed",
      "keywords": [
        "test_request",
        "asyncio",
        "pytestmark",
        "__wrapped__",
        "patchings",
        "test_auth.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
          "lineno": 131,
          "message": "TypeError: 'coroutine' object does not support the asynchronous context manager protocol"
        },
        "traceback": [
          {
            "path": "tests\\test_auth.py",
            "lineno": 40,
            "message": ""
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 58,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 39,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 131,
            "message": "TypeError"
          }
        ],
        "longrepr": "mock_cognito = <MagicMock name='Cognito' id='2308959978128'>\nmock_srp_auth = <MagicMock name='RequestsSrpAuth' id='2308959982256'>\nmock_client_session = <MagicMock name='ClientSession' id='2308959986048'>\n\n    @mock.patch(\"aiohttp.ClientSession\")\n    @mock.patch(\"pycognito.utils.RequestsSrpAuth\")\n    @mock.patch(\"pycognito.Cognito\")\n    @pytest.mark.asyncio\n    async def test_request(mock_cognito, mock_srp_auth, mock_client_session):\n        auth = _auth.Auth(\"__username__\", \"__password__\")\n        mock_session_instance = mock_client_session.return_value\n        mock_session_instance.get.return_value.__aenter__.return_value.json = mock.AsyncMock(\n            return_value={}\n        )\n    \n>       await auth.request(\"get\", \"/foo/bar\", baz=\"bam\")\n\ntests\\test_auth.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\auth.py:58: in wrapper\n    resp = await fn(*args, **kwargs)\npyschlage\\auth.py:39: in wrapper\n    return await fn(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pyschlage.auth.Auth object at 0x0000021998BD4350>, method = 'get'\npath = '/foo/bar', base_url = 'https://api.allegion.yonomi.cloud/v1'\nkwargs = {'auth': <MagicMock name='RequestsSrpAuth()' id='2308959993680'>, 'baz': 'bam', 'headers': {'X-Api-Key': 'hnuu9jbbJr7MssFDWm5nU2Z7nG5Q5rxsaqWsE7e9'}}\ntimeout = ClientTimeout(total=60, connect=None, sock_read=None, sock_connect=None, ceil_threshold=5)\nsession = <AsyncMock name='ClientSession().__aenter__()' id='2308957862560'>\n\n    @_translate_http_errors\n    @_translate_auth_errors\n    async def request(\n        self, method: str, path: str, base_url: str = BASE_URL, **kwargs\n    ) -> aiohttp.ClientResponse:\n        \"\"\"Performs a request against the Schlage WiFi cloud service.\n    \n        :meta private:\n        \"\"\"\n        kwargs[\"auth\"] = self.auth\n        if \"headers\" not in kwargs:\n            kwargs[\"headers\"] = {}\n        kwargs[\"headers\"][\"X-Api-Key\"] = API_KEY\n        timeout = aiohttp.ClientTimeout(total=_DEFAULT_TIMEOUT)\n        async with aiohttp.ClientSession(timeout=timeout) as session:\n>           async with session.request(\n                method, f\"{base_url}/{path.lstrip('/')}\", **kwargs\n            ) as response:\nE           TypeError: 'coroutine' object does not support the asynchronous context manager protocol\n\npyschlage\\auth.py:131: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_auth.py::test_request_not_authorized",
      "lineno": 49,
      "outcome": "failed",
      "keywords": [
        "test_request_not_authorized",
        "asyncio",
        "pytestmark",
        "__wrapped__",
        "patchings",
        "test_auth.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
          "lineno": 131,
          "message": "TypeError: 'coroutine' object does not support the asynchronous context manager protocol"
        },
        "traceback": [
          {
            "path": "tests\\test_auth.py",
            "lineno": 71,
            "message": ""
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 58,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 39,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 131,
            "message": "TypeError"
          }
        ],
        "longrepr": "mock_cognito = <MagicMock name='Cognito' id='2308959786128'>\nmock_srp_auth = <MagicMock name='RequestsSrpAuth' id='2308959782288'>\nmock_client_session = <MagicMock name='ClientSession' id='2308959698480'>\n\n    @mock.patch(\"aiohttp.ClientSession\")\n    @mock.patch(\"pycognito.utils.RequestsSrpAuth\")\n    @mock.patch(\"pycognito.Cognito\")\n    @pytest.mark.asyncio\n    async def test_request_not_authorized(mock_cognito, mock_srp_auth, mock_client_session):\n        url = \"https://api.allegion.yonomi.cloud/v1/foo/bar\"\n        auth = _auth.Auth(\"__username__\", \"__password__\")\n        mock_session_instance = mock_client_session.return_value\n        mock_session_instance.get.side_effect = ClientError(\n            {\n                \"Error\": {\n                    \"Code\": \"NotAuthorizedException\",\n                    \"Message\": f\"Unauthorized for url: {url}\",\n                }\n            },\n            \"foo-op\",\n        )\n    \n        with pytest.raises(\n            pyschlage.exceptions.NotAuthorizedError, match=f\"Unauthorized for url: {url}\"\n        ):\n>           await auth.request(\"get\", \"/foo/bar\", baz=\"bam\")\n\ntests\\test_auth.py:71: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\auth.py:58: in wrapper\n    resp = await fn(*args, **kwargs)\npyschlage\\auth.py:39: in wrapper\n    return await fn(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pyschlage.auth.Auth object at 0x0000021998BA55B0>, method = 'get'\npath = '/foo/bar', base_url = 'https://api.allegion.yonomi.cloud/v1'\nkwargs = {'auth': <MagicMock name='RequestsSrpAuth()' id='2308959690512'>, 'baz': 'bam', 'headers': {'X-Api-Key': 'hnuu9jbbJr7MssFDWm5nU2Z7nG5Q5rxsaqWsE7e9'}}\ntimeout = ClientTimeout(total=60, connect=None, sock_read=None, sock_connect=None, ceil_threshold=5)\nsession = <AsyncMock name='ClientSession().__aenter__()' id='2308959630544'>\n\n    @_translate_http_errors\n    @_translate_auth_errors\n    async def request(\n        self, method: str, path: str, base_url: str = BASE_URL, **kwargs\n    ) -> aiohttp.ClientResponse:\n        \"\"\"Performs a request against the Schlage WiFi cloud service.\n    \n        :meta private:\n        \"\"\"\n        kwargs[\"auth\"] = self.auth\n        if \"headers\" not in kwargs:\n            kwargs[\"headers\"] = {}\n        kwargs[\"headers\"][\"X-Api-Key\"] = API_KEY\n        timeout = aiohttp.ClientTimeout(total=_DEFAULT_TIMEOUT)\n        async with aiohttp.ClientSession(timeout=timeout) as session:\n>           async with session.request(\n                method, f\"{base_url}/{path.lstrip('/')}\", **kwargs\n            ) as response:\nE           TypeError: 'coroutine' object does not support the asynchronous context manager protocol\n\npyschlage\\auth.py:131: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_auth.py::test_request_unknown_error",
      "lineno": 81,
      "outcome": "failed",
      "keywords": [
        "test_request_unknown_error",
        "asyncio",
        "pytestmark",
        "__wrapped__",
        "patchings",
        "test_auth.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
          "lineno": 131,
          "message": "TypeError: 'coroutine' object does not support the asynchronous context manager protocol"
        },
        "traceback": [
          {
            "path": "tests\\test_auth.py",
            "lineno": 100,
            "message": ""
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 58,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 39,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 131,
            "message": "TypeError"
          }
        ],
        "longrepr": "mock_cognito = <MagicMock name='Cognito' id='2308959301184'>\nmock_srp_auth = <MagicMock name='RequestsSrpAuth' id='2308959297632'>\nmock_client_session = <MagicMock name='ClientSession' id='2308959293120'>\n\n    @mock.patch(\"aiohttp.ClientSession\")\n    @mock.patch(\"pycognito.utils.RequestsSrpAuth\")\n    @mock.patch(\"pycognito.Cognito\")\n    @pytest.mark.asyncio\n    async def test_request_unknown_error(mock_cognito, mock_srp_auth, mock_client_session):\n        url = \"https://api.allegion.yonomi.cloud/v1/foo/bar\"\n        auth = _auth.Auth(\"__username__\", \"__password__\")\n        mock_session_instance = mock_client_session.return_value\n        mock_resp = mock.Mock()\n        mock_resp.raise_for_status.side_effect = aiohttp.ClientResponseError(\n            request_info=None, history=None, status=500, message=\"Internal\"\n        )\n        mock_resp.status = 500\n        mock_resp.reason = \"Internal\"\n        mock_resp.json = mock.AsyncMock(side_effect=aiohttp.ContentTypeError(None, None))\n        mock_session_instance.get.return_value.__aenter__.return_value = mock_resp\n    \n        with pytest.raises(pyschlage.exceptions.UnknownError):\n>           await auth.request(\"get\", \"/foo/bar\", baz=\"bam\")\n\ntests\\test_auth.py:100: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\auth.py:58: in wrapper\n    resp = await fn(*args, **kwargs)\npyschlage\\auth.py:39: in wrapper\n    return await fn(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pyschlage.auth.Auth object at 0x0000021998B2F380>, method = 'get'\npath = '/foo/bar', base_url = 'https://api.allegion.yonomi.cloud/v1'\nkwargs = {'auth': <MagicMock name='RequestsSrpAuth()' id='2308957859680'>, 'baz': 'bam', 'headers': {'X-Api-Key': 'hnuu9jbbJr7MssFDWm5nU2Z7nG5Q5rxsaqWsE7e9'}}\ntimeout = ClientTimeout(total=60, connect=None, sock_read=None, sock_connect=None, ceil_threshold=5)\nsession = <AsyncMock name='ClientSession().__aenter__()' id='2308957849456'>\n\n    @_translate_http_errors\n    @_translate_auth_errors\n    async def request(\n        self, method: str, path: str, base_url: str = BASE_URL, **kwargs\n    ) -> aiohttp.ClientResponse:\n        \"\"\"Performs a request against the Schlage WiFi cloud service.\n    \n        :meta private:\n        \"\"\"\n        kwargs[\"auth\"] = self.auth\n        if \"headers\" not in kwargs:\n            kwargs[\"headers\"] = {}\n        kwargs[\"headers\"][\"X-Api-Key\"] = API_KEY\n        timeout = aiohttp.ClientTimeout(total=_DEFAULT_TIMEOUT)\n        async with aiohttp.ClientSession(timeout=timeout) as session:\n>           async with session.request(\n                method, f\"{base_url}/{path.lstrip('/')}\", **kwargs\n            ) as response:\nE           TypeError: 'coroutine' object does not support the asynchronous context manager protocol\n\npyschlage\\auth.py:131: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_auth.py::test_user_id",
      "lineno": 110,
      "outcome": "failed",
      "keywords": [
        "test_user_id",
        "asyncio",
        "pytestmark",
        "__wrapped__",
        "patchings",
        "test_auth.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
          "lineno": 131,
          "message": "TypeError: 'coroutine' object does not support the asynchronous context manager protocol"
        },
        "traceback": [
          {
            "path": "tests\\test_auth.py",
            "lineno": 128,
            "message": ""
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 109,
            "message": "in user_id"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 113,
            "message": "in _get_user_id"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 58,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 39,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 131,
            "message": "TypeError"
          }
        ],
        "longrepr": "mock_cognito = <MagicMock name='Cognito' id='2308960293648'>\nmock_srp_auth = <MagicMock name='RequestsSrpAuth' id='2308960298064'>\nmock_client_session = <MagicMock name='ClientSession' id='2308960302480'>\n\n    @mock.patch(\"aiohttp.ClientSession\")\n    @mock.patch(\"pycognito.utils.RequestsSrpAuth\")\n    @mock.patch(\"pycognito.Cognito\")\n    @pytest.mark.asyncio\n    async def test_user_id(mock_cognito, mock_srp_auth, mock_client_session):\n        auth = _auth.Auth(\"__username__\", \"__password__\")\n        mock_session_instance = mock_client_session.return_value\n        mock_session_instance.get.return_value.__aenter__.return_value.json = mock.AsyncMock(\n            return_value={\n                \"consentRecords\": [],\n                \"created\": \"2022-12-24T20:00:00.000Z\",\n                \"email\": \"asdf@asdf.com\",\n                \"friendlyName\": \"username\",\n                \"identityId\": \"<user-id>\",\n                \"lastUpdated\": \"2022-12-24T20:00:00.000Z\",\n            }\n        )\n>       assert await auth.user_id == \"<user-id>\"\n\ntests\\test_auth.py:128: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\auth.py:109: in user_id\n    self._user_id = await self._get_user_id()\npyschlage\\auth.py:113: in _get_user_id\n    resp = await self.request(\"get\", \"users/@me\")\npyschlage\\auth.py:58: in wrapper\n    resp = await fn(*args, **kwargs)\npyschlage\\auth.py:39: in wrapper\n    return await fn(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pyschlage.auth.Auth object at 0x0000021998C21460>, method = 'get'\npath = 'users/@me', base_url = 'https://api.allegion.yonomi.cloud/v1'\nkwargs = {'auth': <MagicMock name='RequestsSrpAuth()' id='2308960206928'>, 'headers': {'X-Api-Key': 'hnuu9jbbJr7MssFDWm5nU2Z7nG5Q5rxsaqWsE7e9'}}\ntimeout = ClientTimeout(total=60, connect=None, sock_read=None, sock_connect=None, ceil_threshold=5)\nsession = <AsyncMock name='ClientSession().__aenter__()' id='2308957851472'>\n\n    @_translate_http_errors\n    @_translate_auth_errors\n    async def request(\n        self, method: str, path: str, base_url: str = BASE_URL, **kwargs\n    ) -> aiohttp.ClientResponse:\n        \"\"\"Performs a request against the Schlage WiFi cloud service.\n    \n        :meta private:\n        \"\"\"\n        kwargs[\"auth\"] = self.auth\n        if \"headers\" not in kwargs:\n            kwargs[\"headers\"] = {}\n        kwargs[\"headers\"][\"X-Api-Key\"] = API_KEY\n        timeout = aiohttp.ClientTimeout(total=_DEFAULT_TIMEOUT)\n        async with aiohttp.ClientSession(timeout=timeout) as session:\n>           async with session.request(\n                method, f\"{base_url}/{path.lstrip('/')}\", **kwargs\n            ) as response:\nE           TypeError: 'coroutine' object does not support the asynchronous context manager protocol\n\npyschlage\\auth.py:131: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_auth.py::test_user_id_is_cached",
      "lineno": 136,
      "outcome": "failed",
      "keywords": [
        "test_user_id_is_cached",
        "asyncio",
        "pytestmark",
        "__wrapped__",
        "patchings",
        "test_auth.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
          "lineno": 131,
          "message": "TypeError: 'coroutine' object does not support the asynchronous context manager protocol"
        },
        "traceback": [
          {
            "path": "tests\\test_auth.py",
            "lineno": 154,
            "message": ""
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 109,
            "message": "in user_id"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 113,
            "message": "in _get_user_id"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 58,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 39,
            "message": "in wrapper"
          },
          {
            "path": "pyschlage\\auth.py",
            "lineno": 131,
            "message": "TypeError"
          }
        ],
        "longrepr": "mock_cognito = <MagicMock name='Cognito' id='2308960149216'>\nmock_srp_auth = <MagicMock name='RequestsSrpAuth' id='2308960146528'>\nmock_client_session = <MagicMock name='ClientSession' id='2308960150896'>\n\n    @mock.patch(\"aiohttp.ClientSession\")\n    @mock.patch(\"pycognito.utils.RequestsSrpAuth\")\n    @mock.patch(\"pycognito.Cognito\")\n    @pytest.mark.asyncio\n    async def test_user_id_is_cached(mock_cognito, mock_srp_auth, mock_client_session):\n        auth = _auth.Auth(\"__username__\", \"__password__\")\n        mock_session_instance = mock_client_session.return_value\n        mock_session_instance.get.return_value.__aenter__.return_value.json = mock.AsyncMock(\n            return_value={\n                \"consentRecords\": [],\n                \"created\": \"2022-12-24T20:00:00.000Z\",\n                \"email\": \"asdf@asdf.com\",\n                \"friendlyName\": \"username\",\n                \"identityId\": \"<user-id>\",\n                \"lastUpdated\": \"2022-12-24T20:00:00.000Z\",\n            }\n        )\n>       assert await auth.user_id == \"<user-id>\"\n\ntests\\test_auth.py:154: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\auth.py:109: in user_id\n    self._user_id = await self._get_user_id()\npyschlage\\auth.py:113: in _get_user_id\n    resp = await self.request(\"get\", \"users/@me\")\npyschlage\\auth.py:58: in wrapper\n    resp = await fn(*args, **kwargs)\npyschlage\\auth.py:39: in wrapper\n    return await fn(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pyschlage.auth.Auth object at 0x0000021998BFF9B0>, method = 'get'\npath = 'users/@me', base_url = 'https://api.allegion.yonomi.cloud/v1'\nkwargs = {'auth': <MagicMock name='RequestsSrpAuth()' id='2308958212400'>, 'headers': {'X-Api-Key': 'hnuu9jbbJr7MssFDWm5nU2Z7nG5Q5rxsaqWsE7e9'}}\ntimeout = ClientTimeout(total=60, connect=None, sock_read=None, sock_connect=None, ceil_threshold=5)\nsession = <AsyncMock name='ClientSession().__aenter__()' id='2308960543056'>\n\n    @_translate_http_errors\n    @_translate_auth_errors\n    async def request(\n        self, method: str, path: str, base_url: str = BASE_URL, **kwargs\n    ) -> aiohttp.ClientResponse:\n        \"\"\"Performs a request against the Schlage WiFi cloud service.\n    \n        :meta private:\n        \"\"\"\n        kwargs[\"auth\"] = self.auth\n        if \"headers\" not in kwargs:\n            kwargs[\"headers\"] = {}\n        kwargs[\"headers\"][\"X-Api-Key\"] = API_KEY\n        timeout = aiohttp.ClientTimeout(total=_DEFAULT_TIMEOUT)\n        async with aiohttp.ClientSession(timeout=timeout) as session:\n>           async with session.request(\n                method, f\"{base_url}/{path.lstrip('/')}\", **kwargs\n            ) as response:\nE           TypeError: 'coroutine' object does not support the asynchronous context manager protocol\n\npyschlage\\auth.py:131: TypeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_code.py::TestAccessCode::test_to_from_json",
      "lineno": 14,
      "outcome": "passed",
      "keywords": [
        "test_to_from_json",
        "TestAccessCode",
        "test_code.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_code.py::TestAccessCode::test_to_from_json_recurring_schedule",
      "lineno": 31,
      "outcome": "passed",
      "keywords": [
        "test_to_from_json_recurring_schedule",
        "TestAccessCode",
        "test_code.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_code.py::TestAccessCode::test_to_from_json_temporary_schedule",
      "lineno": 53,
      "outcome": "failed",
      "keywords": [
        "test_to_from_json_temporary_schedule",
        "TestAccessCode",
        "test_code.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\tests\\test_code.py",
          "lineno": 75,
          "message": "AssertionError: assert AccessCode(na...isabled=False) == AccessCode(na...isabled=False)\n  \n  Omitting 10 identical items, use -vv to show\n  Differing attributes:\n  ['schedule']\n  \n  Drill down into differing attribute schedule:\n    schedule: TemporarySchedule(start=datetime.datetime(2022, 12, 25, 1, 30), end=datetime.datetime(2022, 12, 25, 2, 0)) != TemporarySchedule(start=datetime.datetime(2022, 12, 25, 8, 30), end=datetime.datetime(2022, 12, 25, 9, 0))...\n  \n  ...Full output truncated (9 lines hidden), use '-vv' to show"
        },
        "traceback": [
          {
            "path": "tests\\test_code.py",
            "lineno": 75,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_code.TestAccessCode object at 0x0000021998AB6A50>\nmock_auth = <MagicMock spec_set='Auth' id='2308960677920'>\naccess_code_json = {'accessCode': 123, 'accessCodeLength': 4, 'accesscodeId': '__access_code_uuid__', 'activationSecs': 0, ...}\nwifi_device = Device(device_id='__wifi_uuid__', device_type='be489wifi')\n\n    def test_to_from_json_temporary_schedule(\n        self, mock_auth: Mock, access_code_json: dict[str, Any], wifi_device: Device\n    ):\n        access_code_id = \"__access_code_uuid__\"\n        sched = TemporarySchedule(\n            start=datetime(2022, 12, 25, 8, 30, 0),\n            end=datetime(2022, 12, 25, 9, 0, 0),\n        )\n        json = deepcopy(access_code_json)\n        json[\"activationSecs\"] = 1671957000\n        json[\"expirationSecs\"] = 1671958800\n        code = AccessCode(\n            _auth=mock_auth,\n            _json=json,\n            _device=wifi_device,\n            name=\"Friendly name\",\n            code=\"0123\",\n            schedule=sched,\n            device_id=wifi_device.device_id,\n            access_code_id=access_code_id,\n        )\n>       assert AccessCode.from_json(mock_auth, wifi_device, json) == code\nE       AssertionError: assert AccessCode(na...isabled=False) == AccessCode(na...isabled=False)\nE         \nE         Omitting 10 identical items, use -vv to show\nE         Differing attributes:\nE         ['schedule']\nE         \nE         Drill down into differing attribute schedule:\nE           schedule: TemporarySchedule(start=datetime.datetime(2022, 12, 25, 1, 30), end=datetime.datetime(2022, 12, 25, 2, 0)) != TemporarySchedule(start=datetime.datetime(2022, 12, 25, 8, 30), end=datetime.datetime(2022, 12, 25, 9, 0))...\nE         \nE         ...Full output truncated (9 lines hidden), use '-vv' to show\n\ntests\\test_code.py:75: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_code.py::TestAccessCode::test_save",
      "lineno": 77,
      "outcome": "failed",
      "keywords": [
        "test_save",
        "TestAccessCode",
        "test_code.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\code.py",
          "lineno": 253,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_code.py",
            "lineno": 100,
            "message": ""
          },
          {
            "path": "pyschlage\\code.py",
            "lineno": 253,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_code.TestAccessCode object at 0x0000021998AB6C30>\nmock_auth = <MagicMock spec_set='Auth' id='2308960929168'>\naccess_code_json = {'accessCode': 123, 'accessCodeLength': 4, 'accesscodeId': '__access_code_uuid__', 'activationSecs': 0, ...}\n\n    def test_save(\n        self,\n        mock_auth: Mock,\n        access_code_json: dict[str, Any],\n    ):\n        with pytest.raises(NotAuthenticatedError):\n            AccessCode().save()\n        mock_device = create_autospec(Device, spec_set=True, device_id=\"__wifi_uuid__\")\n        code = AccessCode.from_json(mock_auth, mock_device, access_code_json)\n        code.code = \"1122\"\n        old_json = code.to_json()\n    \n        new_json = {\"accesscodeId\": \"2211\"}\n    \n        with patch(\n            \"pyschlage.code.Notification\", autospec=True\n        ) as mock_notification_cls:\n            mock_notification = create_autospec(Notification, spec_set=True)\n            mock_notification_cls.return_value = mock_notification\n            mock_device.send_command.return_value = Mock(\n                json=Mock(return_value=new_json)\n            )\n>           code.save()\n\ntests\\test_code.py:100: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = AccessCode(name='Friendly name', code='1122', schedule=None, notify_on_use=False, disabled=False)\n\n    def save(self):\n        \"\"\"Commits changes to the access code.\n    \n        :raise pyschlage.exceptions.NotAuthenticatedError: When the user is not\n            authenticated.\n        :raise pyschlage.exceptions.NotAuthorizedError: When authentication fails.\n        :raise pyschlage.exceptions.UnknownError: On other errors.\n        \"\"\"\n        if not self._auth:\n            raise NotAuthenticatedError\n        assert self._device is not None\n    \n        command = \"updateaccesscode\" if self.access_code_id else \"addaccesscode\"\n        resp = self._device.send_command(command, self.to_json())\n    \n        # NOTE: We don't call self._update_with() here because the API only returns\n        # the accesscodeId field.\n>       resp_json = resp.json()\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\code.py:253: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_code.py::TestAccessCode::test_delete",
      "lineno": 107,
      "outcome": "passed",
      "keywords": [
        "test_delete",
        "TestAccessCode",
        "test_code.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_common.py::test_pickle_unpickle",
      "lineno": 10,
      "outcome": "passed",
      "keywords": [
        "test_pickle_unpickle",
        "test_common.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_common.py::test_redact_allow_asterisk",
      "lineno": 35,
      "outcome": "passed",
      "keywords": [
        "test_redact_allow_asterisk",
        "test_common.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_common.py::test_redact_allow_all",
      "lineno": 39,
      "outcome": "passed",
      "keywords": [
        "test_redact_allow_all",
        "test_common.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_common.py::test_redact_all",
      "lineno": 50,
      "outcome": "passed",
      "keywords": [
        "test_redact_all",
        "test_common.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_common.py::test_redact_partial",
      "lineno": 67,
      "outcome": "passed",
      "keywords": [
        "test_redact_partial",
        "test_common.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_from_json",
      "lineno": 18,
      "outcome": "passed",
      "keywords": [
        "test_from_json",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_from_json_cat_optional",
      "lineno": 40,
      "outcome": "passed",
      "keywords": [
        "test_from_json_cat_optional",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_from_json_no_connected",
      "lineno": 47,
      "outcome": "passed",
      "keywords": [
        "test_from_json_no_connected",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_from_json_is_jammed",
      "lineno": 54,
      "outcome": "passed",
      "keywords": [
        "test_from_json_is_jammed",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_from_json_wifi_lock_unavailable",
      "lineno": 60,
      "outcome": "passed",
      "keywords": [
        "test_from_json_wifi_lock_unavailable",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_from_json_no_model_name",
      "lineno": 69,
      "outcome": "passed",
      "keywords": [
        "test_from_json_no_model_name",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_diagnostics",
      "lineno": 76,
      "outcome": "passed",
      "keywords": [
        "test_diagnostics",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_refresh",
      "lineno": 142,
      "outcome": "failed",
      "keywords": [
        "test_refresh",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
          "lineno": 204,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 160,
            "message": ""
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 204,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AB7110>\nmock_auth = <MagicMock spec_set='Auth' id='2308962106400'>\nlock_json = {'CAT': '01234', 'SAT': '98765', 'attributes': {'CAT': '01234', 'SAT': '98765', 'accessCodeLength': 4, 'actAlarmBuzzerEnabled': 0, ...}, 'connected': True, ...}\naccess_code_json = {'accessCode': 123, 'accessCodeLength': 4, 'accesscodeId': '__access_code_uuid__', 'activationSecs': 0, ...}\nnotification_json = {'active': True, 'createdAt': '2023-03-01T17:26:47.366Z', 'deviceId': '__wifi_uuid__', 'devicetypeId': 'be489wifi', ...}\n\n    def test_refresh(\n        self,\n        mock_auth: Mock,\n        lock_json: dict[str, Any],\n        access_code_json: dict[str, Any],\n        notification_json: dict[str, Any],\n    ) -> None:\n        with pytest.raises(NotAuthenticatedError):\n            Lock().refresh()\n        lock = Lock.from_json(mock_auth, lock_json)\n        lock_json[\"name\"] = \"<NAME>\"\n    \n        mock_auth.request.side_effect = [\n            Mock(json=Mock(return_value=lock_json)),\n            Mock(json=Mock(return_value=[notification_json])),\n            Mock(json=Mock(return_value=[access_code_json])),\n        ]\n>       lock.refresh()\n\ntests\\test_lock.py:160: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ser(name='asdf', email='asdf@asdf.com'), 'foo-bar-uuid': User(name='Foo Bar', email='foo@bar.xyz')}, access_codes=None)\n\n    def refresh(self) -> None:\n        \"\"\"Refreshes the Lock state.\n    \n        :raise pyschlage.exceptions.NotAuthorizedError: When authentication fails.\n        :raise pyschlage.exceptions.UnknownError: On other errors.\n        \"\"\"\n        if not self._auth:\n            raise NotAuthenticatedError\n        path = self.request_path(self.device_id)\n>       self._update_with(self._auth.request(\"get\", path).json())\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\lock.py:204: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_send_command_unauthenticated",
      "lineno": 172,
      "outcome": "failed",
      "keywords": [
        "test_send_command_unauthenticated",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\tests\\test_lock.py",
          "lineno": 174,
          "message": "Failed: DID NOT RAISE <class 'pyschlage.exceptions.NotAuthenticatedError'>"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 174,
            "message": "Failed"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE1A90>\n\n    def test_send_command_unauthenticated(self):\n>       with pytest.raises(NotAuthenticatedError):\nE       Failed: DID NOT RAISE <class 'pyschlage.exceptions.NotAuthenticatedError'>\n\ntests\\test_lock.py:174: Failed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_lock_wifi",
      "lineno": 176,
      "outcome": "failed",
      "keywords": [
        "test_lock_wifi",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
          "lineno": 211,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 186,
            "message": ""
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 235,
            "message": "in lock"
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 217,
            "message": "in _toggle"
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 211,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE1370>\nmock_auth = <MagicMock spec_set='Auth' id='2308962009792'>\nwifi_lock_json = {'CAT': '01234', 'SAT': '98765', 'attributes': {'CAT': '01234', 'SAT': '98765', 'accessCodeLength': 4, 'actAlarmBuzzerEnabled': 0, ...}, 'connected': True, ...}\n\n    def test_lock_wifi(self, mock_auth, wifi_lock_json):\n        initial_json = deepcopy(wifi_lock_json)\n        initial_json[\"attributes\"][\"lockState\"] = 0\n        lock = Lock.from_json(mock_auth, initial_json)\n    \n        new_json = deepcopy(wifi_lock_json)\n        new_json[\"attributes\"][\"lockState\"] = 1\n    \n        mock_auth.request.return_value = Mock(json=Mock(return_value=new_json))\n>       lock.lock()\n\ntests\\test_lock.py:186: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\lock.py:235: in lock\n    self._toggle(1)\npyschlage\\lock.py:217: in _toggle\n    self._put_attributes({\"lockState\": lock_state})\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ser(name='asdf', email='asdf@asdf.com'), 'foo-bar-uuid': User(name='Foo Bar', email='foo@bar.xyz')}, access_codes=None)\nattributes = {'lockState': 1}\n\n    def _put_attributes(self, attributes):\n        path = self.request_path(self.device_id)\n        json = {\"attributes\": attributes}\n        resp = self._auth.request(\"put\", path, json=json)\n>       self._update_with(resp.json())\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\lock.py:211: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_unlock_wifi",
      "lineno": 192,
      "outcome": "failed",
      "keywords": [
        "test_unlock_wifi",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
          "lineno": 211,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 202,
            "message": ""
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 243,
            "message": "in unlock"
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 217,
            "message": "in _toggle"
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 211,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE1F70>\nmock_auth = <MagicMock spec_set='Auth' id='2308961929984'>\nwifi_lock_json = {'CAT': '01234', 'SAT': '98765', 'attributes': {'CAT': '01234', 'SAT': '98765', 'accessCodeLength': 4, 'actAlarmBuzzerEnabled': 0, ...}, 'connected': True, ...}\n\n    def test_unlock_wifi(self, mock_auth, wifi_lock_json):\n        initial_json = deepcopy(wifi_lock_json)\n        initial_json[\"attributes\"][\"lockState\"] = 1\n        lock = Lock.from_json(mock_auth, initial_json)\n    \n        new_json = deepcopy(wifi_lock_json)\n        new_json[\"attributes\"][\"lockState\"] = 0\n    \n        mock_auth.request.return_value = Mock(json=Mock(return_value=new_json))\n>       lock.unlock()\n\ntests\\test_lock.py:202: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\lock.py:243: in unlock\n    self._toggle(0)\npyschlage\\lock.py:217: in _toggle\n    self._put_attributes({\"lockState\": lock_state})\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ser(name='asdf', email='asdf@asdf.com'), 'foo-bar-uuid': User(name='Foo Bar', email='foo@bar.xyz')}, access_codes=None)\nattributes = {'lockState': 0}\n\n    def _put_attributes(self, attributes):\n        path = self.request_path(self.device_id)\n        json = {\"attributes\": attributes}\n        resp = self._auth.request(\"put\", path, json=json)\n>       self._update_with(resp.json())\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\lock.py:211: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_lock_ble",
      "lineno": 208,
      "outcome": "failed",
      "keywords": [
        "test_lock_ble",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py",
          "lineno": 955,
          "message": "AssertionError: Expected 'request' to be called once. Called 0 times."
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 225,
            "message": ""
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py",
            "lineno": 955,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE2180>\nmock_auth = <MagicMock spec_set='Auth' id='2308961887696'>\nble_lock_json = {'CAT': 'abcdef', 'SAT': 'ghijkl', 'attributes': {'CAT': 'abcdef', 'SAT': 'ghijkl', 'accessCodeLength': 4, 'adminOnlyEnabled': 0, ...}, 'connected': False, ...}\n\n    def test_lock_ble(self, mock_auth, ble_lock_json):\n        with pytest.raises(NotAuthenticatedError):\n            Lock().lock()\n    \n        lock = Lock.from_json(mock_auth, ble_lock_json)\n        lock.lock()\n    \n        command_json = {\n            \"data\": {\n                \"CAT\": \"abcdef\",\n                \"deviceId\": \"__ble_uuid__\",\n                \"state\": 1,\n                \"userId\": \"<user-id>\",\n            },\n            \"name\": \"changelockstate\",\n        }\n>       mock_auth.request.assert_called_once_with(\n            \"post\", \"devices/__ble_uuid__/commands\", json=command_json\n        )\n\ntests\\test_lock.py:225: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <AsyncMock name='mock.request' spec_set='function' id='2308960896400'>\nargs = ('post', 'devices/__ble_uuid__/commands')\nkwargs = {'json': {'data': {'CAT': 'abcdef', 'deviceId': '__ble_uuid__', 'state': 1, 'userId': '<user-id>'}, 'name': 'changelockstate'}}\nmsg = \"Expected 'request' to be called once. Called 0 times.\"\n\n    def assert_called_once_with(self, /, *args, **kwargs):\n        \"\"\"assert that the mock was called exactly once and that that call was\n        with the specified arguments.\"\"\"\n        if not self.call_count == 1:\n            msg = (\"Expected '%s' to be called once. Called %s times.%s\"\n                   % (self._mock_name or 'mock',\n                      self.call_count,\n                      self._calls_repr()))\n>           raise AssertionError(msg)\nE           AssertionError: Expected 'request' to be called once. Called 0 times.\n\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py:955: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_unlock_ble",
      "lineno": 229,
      "outcome": "failed",
      "keywords": [
        "test_unlock_ble",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py",
          "lineno": 955,
          "message": "AssertionError: Expected 'request' to be called once. Called 0 times."
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 246,
            "message": ""
          },
          {
            "path": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py",
            "lineno": 955,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE2390>\nmock_auth = <MagicMock spec_set='Auth' id='2308961887264'>\nble_lock_json = {'CAT': 'abcdef', 'SAT': 'ghijkl', 'attributes': {'CAT': 'abcdef', 'SAT': 'ghijkl', 'accessCodeLength': 4, 'adminOnlyEnabled': 0, ...}, 'connected': False, ...}\n\n    def test_unlock_ble(self, mock_auth, ble_lock_json):\n        with pytest.raises(NotAuthenticatedError):\n            Lock().unlock()\n    \n        lock = Lock.from_json(mock_auth, ble_lock_json)\n        lock.unlock()\n    \n        command_json = {\n            \"data\": {\n                \"CAT\": \"abcdef\",\n                \"deviceId\": \"__ble_uuid__\",\n                \"state\": 0,\n                \"userId\": \"<user-id>\",\n            },\n            \"name\": \"changelockstate\",\n        }\n>       mock_auth.request.assert_called_once_with(\n            \"post\", \"devices/__ble_uuid__/commands\", json=command_json\n        )\n\ntests\\test_lock.py:246: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <AsyncMock name='mock.request' spec_set='function' id='2308961930656'>\nargs = ('post', 'devices/__ble_uuid__/commands')\nkwargs = {'json': {'data': {'CAT': 'abcdef', 'deviceId': '__ble_uuid__', 'state': 0, 'userId': '<user-id>'}, 'name': 'changelockstate'}}\nmsg = \"Expected 'request' to be called once. Called 0 times.\"\n\n    def assert_called_once_with(self, /, *args, **kwargs):\n        \"\"\"assert that the mock was called exactly once and that that call was\n        with the specified arguments.\"\"\"\n        if not self.call_count == 1:\n            msg = (\"Expected '%s' to be called once. Called %s times.%s\"\n                   % (self._mock_name or 'mock',\n                      self.call_count,\n                      self._calls_repr()))\n>           raise AssertionError(msg)\nE           AssertionError: Expected 'request' to be called once. Called 0 times.\n\nC:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py:955: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_logs",
      "lineno": 250,
      "outcome": "failed",
      "keywords": [
        "test_logs",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
          "lineno": 310,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 262,
            "message": ""
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 310,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE26C0>\nmock_auth = <MagicMock spec_set='Auth' id='2308961930560'>\nwifi_lock = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ccess_code_uuid__': AccessCode(name='Friendly name', code='0123', schedule=None, notify_on_use=False, disabled=False)})\nlog_json = {'createdAt': '2023-03-01T17:26:47.366Z', 'deviceId': '__device_uuid__', 'logId': '__log_uuid__', 'message': {'accessorUuid': 'ffffffff-ffff-ffff-ffff-ffffffffffff', 'action': 2, 'clientId': None, 'eventCode': 9999, ...}, ...}\nlock_log = LockLog(created_at=datetime.datetime(2023, 3, 1, 10, 26, 47, 366000), message='Unknown', accessor_id=None, access_code_id=None)\n\n    def test_logs(\n        self,\n        mock_auth: Mock,\n        wifi_lock: Lock,\n        log_json: dict[str, Any],\n        lock_log: LockLog,\n    ):\n        with pytest.raises(NotAuthenticatedError):\n            Lock().logs()\n    \n        mock_auth.request.return_value = Mock(json=Mock(return_value=[log_json]))\n>       assert wifi_lock.logs(limit=10, sort_desc=True) == [lock_log]\n\ntests\\test_lock.py:262: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ccess_code_uuid__': AccessCode(name='Friendly name', code='0123', schedule=None, notify_on_use=False, disabled=False)})\nlimit = 10, sort_desc = True\n\n    def logs(self, limit: int | None = None, sort_desc: bool = False) -> list[LockLog]:\n        \"\"\"Fetches activity logs for the lock.\n    \n        :param limit: The number of log entries to return.\n        :type limit: int | None\n        :param sort_desc: Whether to sort entries in descending order.\n        :type sort_desc: bool (defaults to `False`)\n        :rtype: list[pyschlage.log.LockLog]\n        :raise pyschlage.exceptions.NotAuthorizedError: When authentication fails.\n        :raise pyschlage.exceptions.UnknownError: On other errors.\n        \"\"\"\n        if not self._auth:\n            raise NotAuthenticatedError\n        path = LockLog.request_path(self.device_id)\n        params: dict[str, Any] = {}\n        if limit:\n            params[\"limit\"] = limit\n        if sort_desc:\n            params[\"sort\"] = \"desc\"\n        resp = self._auth.request(\"get\", path, params=params)\n>       return [LockLog.from_json(lock_log) for lock_log in resp.json()]\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\lock.py:310: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_refresh_access_codes",
      "lineno": 273,
      "outcome": "failed",
      "keywords": [
        "test_refresh_access_codes",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
          "lineno": 357,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 290,
            "message": ""
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 319,
            "message": "in refresh_access_codes"
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 335,
            "message": "in _get_access_codes"
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 357,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE2990>\nmock_auth = <MagicMock spec_set='Auth' id='2308961214896'>\nlock_json = {'CAT': '01234', 'SAT': '98765', 'attributes': {'CAT': '01234', 'SAT': '98765', 'accessCodeLength': 4, 'actAlarmBuzzerEnabled': 0, ...}, 'connected': True, ...}\naccess_code_json = {'accessCode': 123, 'accessCodeLength': 4, 'accesscodeId': '__access_code_uuid__', 'activationSecs': 0, ...}\nnotification_json = {'active': True, 'createdAt': '2023-03-01T17:26:47.366Z', 'deviceId': '__wifi_uuid__', 'devicetypeId': 'be489wifi', ...}\nnotification = Notification(notification_id='<user-id>___access_code_uuid__', user_id='<user-id>', device_id='__wifi_uuid__', device_...nfo=datetime.timezone.utc), updated_at=datetime.datetime(2023, 3, 1, 17, 26, 47, 366000, tzinfo=datetime.timezone.utc))\n\n    def test_refresh_access_codes(\n        self,\n        mock_auth: Mock,\n        lock_json: dict[str, Any],\n        access_code_json: dict[str, Any],\n        notification_json: dict[str, Any],\n        notification: Notification,\n    ) -> None:\n        with pytest.raises(NotAuthenticatedError):\n            Lock().refresh_access_codes()\n        lock = Lock.from_json(mock_auth, lock_json)\n    \n        mock_auth.request.side_effect = [\n            Mock(json=Mock(return_value=[notification_json])),\n            Mock(json=Mock(return_value=[access_code_json])),\n        ]\n>       lock.refresh_access_codes()\n\ntests\\test_lock.py:290: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\lock.py:319: in refresh_access_codes\n    for code in self._get_access_codes():\npyschlage\\lock.py:335: in _get_access_codes\n    for notification in self._get_notifications():\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True... User(name='asdf', email='asdf@asdf.com'), 'foo-bar-uuid': User(name='Foo Bar', email='foo@bar.xyz')}, access_codes={})\n\n    def _get_notifications(self) -> Iterable[Notification]:\n        if not self._auth:\n            raise NotAuthenticatedError  # pragma: no cover\n        path = Notification.request_path()\n        params = {\"deviceId\": self.device_id}\n        resp = self._auth.request(\"get\", path, params=params)\n>       for notification_json in resp.json():\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\lock.py:357: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_add_access_code",
      "lineno": 305,
      "outcome": "failed",
      "keywords": [
        "test_add_access_code",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\code.py",
          "lineno": 253,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 327,
            "message": ""
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 372,
            "message": "in add_access_code"
          },
          {
            "path": "pyschlage\\code.py",
            "lineno": 253,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE29C0>\nmock_auth = <MagicMock spec_set='Auth' id='2308960737792'>\nlock_json = {'CAT': '01234', 'SAT': '98765', 'attributes': {'CAT': '01234', 'SAT': '98765', 'accessCodeLength': 4, 'actAlarmBuzzerEnabled': 0, ...}, 'connected': True, ...}\naccess_code_json = {'accessCode': 123, 'accessCodeLength': 4, 'accesscodeId': '__access_code_uuid__', 'activationSecs': 0, ...}\nnotification_json = {'active': False, 'createdAt': '2023-03-01T17:26:47.366Z', 'deviceId': '__wifi_uuid__', 'devicetypeId': 'be489wifi', ...}\n\n    def test_add_access_code(\n        self,\n        mock_auth: Mock,\n        lock_json: dict[str, Any],\n        access_code_json: dict[str, Any],\n        notification_json: dict[str, Any],\n    ):\n        lock = Lock.from_json(mock_auth, lock_json)\n        code = AccessCode.from_json(mock_auth, lock, access_code_json)\n        # Users should not set these.\n        code._auth = None\n        code._device = None\n        code.access_code_id = None\n        code.device_id = None\n        json = code.to_json()\n    \n        notification_json[\"active\"] = False\n        mock_auth.request.side_effect = [\n            Mock(json=Mock(return_value=access_code_json)),\n            Mock(json=Mock(return_value=notification_json)),\n        ]\n>       lock.add_access_code(code)\n\ntests\\test_lock.py:327: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\lock.py:372: in add_access_code\n    code.save()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = AccessCode(name='Friendly name', code='0123', schedule=None, notify_on_use=False, disabled=False)\n\n    def save(self):\n        \"\"\"Commits changes to the access code.\n    \n        :raise pyschlage.exceptions.NotAuthenticatedError: When the user is not\n            authenticated.\n        :raise pyschlage.exceptions.NotAuthorizedError: When authentication fails.\n        :raise pyschlage.exceptions.UnknownError: On other errors.\n        \"\"\"\n        if not self._auth:\n            raise NotAuthenticatedError\n        assert self._device is not None\n    \n        command = \"updateaccesscode\" if self.access_code_id else \"addaccesscode\"\n        resp = self._device.send_command(command, self.to_json())\n    \n        # NOTE: We don't call self._update_with() here because the API only returns\n        # the accesscodeId field.\n>       resp_json = resp.json()\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\code.py:253: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_set_beeper",
      "lineno": 348,
      "outcome": "failed",
      "keywords": [
        "test_set_beeper",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
          "lineno": 211,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 355,
            "message": ""
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 376,
            "message": "in set_beeper"
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 211,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE2F00>\nmock_auth = <MagicMock spec_set='Auth' id='2308960655536'>\nwifi_lock_json = {'CAT': '01234', 'SAT': '98765', 'attributes': {'CAT': '01234', 'SAT': '98765', 'accessCodeLength': 4, 'actAlarmBuzzerEnabled': 0, ...}, 'connected': True, ...}\nwifi_lock = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ccess_code_uuid__': AccessCode(name='Friendly name', code='0123', schedule=None, notify_on_use=False, disabled=False)})\n\n    def test_set_beeper(\n        self, mock_auth: Mock, wifi_lock_json: dict[str, Any], wifi_lock: Lock\n    ) -> None:\n        assert wifi_lock.beeper_enabled\n        wifi_lock_json[\"attributes\"][\"beeperEnabled\"] = 0\n        mock_auth.request.return_value = Mock(json=Mock(return_value=wifi_lock_json))\n>       wifi_lock.set_beeper(False)\n\ntests\\test_lock.py:355: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\lock.py:376: in set_beeper\n    self._put_attributes({\"beeperEnabled\": 1 if enabled else 0})\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ccess_code_uuid__': AccessCode(name='Friendly name', code='0123', schedule=None, notify_on_use=False, disabled=False)})\nattributes = {'beeperEnabled': 0}\n\n    def _put_attributes(self, attributes):\n        path = self.request_path(self.device_id)\n        json = {\"attributes\": attributes}\n        resp = self._auth.request(\"put\", path, json=json)\n>       self._update_with(resp.json())\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\lock.py:211: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_set_lock_and_leave",
      "lineno": 360,
      "outcome": "failed",
      "keywords": [
        "test_set_lock_and_leave",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
          "lineno": 211,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 367,
            "message": ""
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 380,
            "message": "in set_lock_and_leave"
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 211,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE31D0>\nmock_auth = <MagicMock spec_set='Auth' id='2308958988832'>\nwifi_lock_json = {'CAT': '01234', 'SAT': '98765', 'attributes': {'CAT': '01234', 'SAT': '98765', 'accessCodeLength': 4, 'actAlarmBuzzerEnabled': 0, ...}, 'connected': True, ...}\nwifi_lock = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ccess_code_uuid__': AccessCode(name='Friendly name', code='0123', schedule=None, notify_on_use=False, disabled=False)})\n\n    def test_set_lock_and_leave(\n        self, mock_auth: Mock, wifi_lock_json: dict[str, Any], wifi_lock: Lock\n    ) -> None:\n        assert wifi_lock.lock_and_leave_enabled\n        wifi_lock_json[\"attributes\"][\"lockAndLeaveEnabled\"] = 0\n        mock_auth.request.return_value = Mock(json=Mock(return_value=wifi_lock_json))\n>       wifi_lock.set_lock_and_leave(False)\n\ntests\\test_lock.py:367: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\lock.py:380: in set_lock_and_leave\n    self._put_attributes({\"lockAndLeaveEnabled\": 1 if enabled else 0})\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ccess_code_uuid__': AccessCode(name='Friendly name', code='0123', schedule=None, notify_on_use=False, disabled=False)})\nattributes = {'lockAndLeaveEnabled': 0}\n\n    def _put_attributes(self, attributes):\n        path = self.request_path(self.device_id)\n        json = {\"attributes\": attributes}\n        resp = self._auth.request(\"put\", path, json=json)\n>       self._update_with(resp.json())\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\lock.py:211: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestLock::test_set_auto_lock_time",
      "lineno": 374,
      "outcome": "failed",
      "keywords": [
        "test_set_auto_lock_time",
        "TestLock",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
          "lineno": 211,
          "message": "AttributeError: 'coroutine' object has no attribute 'json'"
        },
        "traceback": [
          {
            "path": "tests\\test_lock.py",
            "lineno": 384,
            "message": ""
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 389,
            "message": "in set_auto_lock_time"
          },
          {
            "path": "pyschlage\\lock.py",
            "lineno": 211,
            "message": "AttributeError"
          }
        ],
        "longrepr": "self = <tests.test_lock.TestLock object at 0x0000021998AE34A0>\nmock_auth = <MagicMock spec_set='Auth' id='2308961941744'>\nwifi_lock_json = {'CAT': '01234', 'SAT': '98765', 'attributes': {'CAT': '01234', 'SAT': '98765', 'accessCodeLength': 4, 'actAlarmBuzzerEnabled': 0, ...}, 'connected': True, ...}\nwifi_lock = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ccess_code_uuid__': AccessCode(name='Friendly name', code='0123', schedule=None, notify_on_use=False, disabled=False)})\n\n    def test_set_auto_lock_time(\n        self, mock_auth: Mock, wifi_lock_json: dict[str, Any], wifi_lock: Lock\n    ) -> None:\n        with pytest.raises(ValueError):\n            wifi_lock.set_auto_lock_time(1)\n    \n        assert wifi_lock.auto_lock_time == 0\n        wifi_lock_json[\"attributes\"][\"autoLockTime\"] = 15\n        mock_auth.request.return_value = Mock(json=Mock(return_value=wifi_lock_json))\n>       wifi_lock.set_auto_lock_time(15)\n\ntests\\test_lock.py:384: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npyschlage\\lock.py:389: in set_auto_lock_time\n    self._put_attributes({\"autoLockTime\": auto_lock_time})\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = Lock(device_id='__wifi_uuid__', device_type='be489wifi', name='Door Lock', model_name='__model_name__', connected=True...ccess_code_uuid__': AccessCode(name='Friendly name', code='0123', schedule=None, notify_on_use=False, disabled=False)})\nattributes = {'autoLockTime': 15}\n\n    def _put_attributes(self, attributes):\n        path = self.request_path(self.device_id)\n        json = {\"attributes\": attributes}\n        resp = self._auth.request(\"put\", path, json=json)\n>       self._update_with(resp.json())\nE       AttributeError: 'coroutine' object has no attribute 'json'\n\npyschlage\\lock.py:211: AttributeError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_true",
      "lineno": 393,
      "outcome": "passed",
      "keywords": [
        "test_true",
        "TestKeypadDisabled",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_true_unsorted",
      "lineno": 406,
      "outcome": "passed",
      "keywords": [
        "test_true_unsorted",
        "TestKeypadDisabled",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_false",
      "lineno": 419,
      "outcome": "passed",
      "keywords": [
        "test_false",
        "TestKeypadDisabled",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_fetches_logs",
      "lineno": 432,
      "outcome": "passed",
      "keywords": [
        "test_fetches_logs",
        "TestKeypadDisabled",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestKeypadDisabled::test_fetches_logs_no_logs",
      "lineno": 447,
      "outcome": "passed",
      "keywords": [
        "test_fetches_logs_no_logs",
        "TestKeypadDisabled",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestChangedBy::test_thumbturn",
      "lineno": 455,
      "outcome": "passed",
      "keywords": [
        "test_thumbturn",
        "TestChangedBy",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestChangedBy::test_one_touch_locking",
      "lineno": 460,
      "outcome": "passed",
      "keywords": [
        "test_one_touch_locking",
        "TestChangedBy",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestChangedBy::test_nfc_device",
      "lineno": 465,
      "outcome": "passed",
      "keywords": [
        "test_nfc_device",
        "TestChangedBy",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestChangedBy::test_nfc_device_no_uuid",
      "lineno": 471,
      "outcome": "passed",
      "keywords": [
        "test_nfc_device_no_uuid",
        "TestChangedBy",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestChangedBy::test_keypad",
      "lineno": 477,
      "outcome": "passed",
      "keywords": [
        "test_keypad",
        "TestChangedBy",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestChangedBy::test_mobile_device",
      "lineno": 483,
      "outcome": "passed",
      "keywords": [
        "test_mobile_device",
        "TestChangedBy",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestChangedBy::test_unknown",
      "lineno": 495,
      "outcome": "passed",
      "keywords": [
        "test_unknown",
        "TestChangedBy",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_lock.py::TestChangedBy::test_no_metadata",
      "lineno": 498,
      "outcome": "passed",
      "keywords": [
        "test_no_metadata",
        "TestChangedBy",
        "test_lock.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_log.py::TestFromJson::test_unlocked_by_thumbturn",
      "lineno": 8,
      "outcome": "failed",
      "keywords": [
        "test_unlocked_by_thumbturn",
        "TestFromJson",
        "test_log.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\tests\\test_log.py",
          "lineno": 17,
          "message": "AssertionError: assert LockLog(creat..._code_id=None) == LockLog(creat..._code_id=None)\n  \n  Omitting 3 identical items, use -vv to show\n  Differing attributes:\n  ['created_at']\n  \n  Drill down into differing attribute created_at:\n    created_at: datetime.datetime(2023, 3, 1, 10, 26, 47, 366000) != datetime.datetime(2023, 3, 1, 17, 26, 47, 366000)"
        },
        "traceback": [
          {
            "path": "tests\\test_log.py",
            "lineno": 17,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_log.TestFromJson object at 0x0000021998B117F0>\nlog_json = {'createdAt': '2023-03-01T17:26:47.366Z', 'deviceId': '__device_uuid__', 'logId': '__log_uuid__', 'message': {'accessorUuid': 'ffffffff-ffff-ffff-ffff-ffffffffffff', 'action': 2, 'clientId': None, 'eventCode': 4, ...}, ...}\n\n    def test_unlocked_by_thumbturn(self, log_json):\n        log_json[\"message\"][\"eventCode\"] = 4\n        lock_log = LockLog(\n            created_at=datetime(2023, 3, 1, 17, 26, 47, 366000),\n            accessor_id=None,\n            access_code_id=None,\n            message=\"Unlocked by thumbturn\",\n        )\n>       assert LockLog.from_json(log_json) == lock_log\nE       AssertionError: assert LockLog(creat..._code_id=None) == LockLog(creat..._code_id=None)\nE         \nE         Omitting 3 identical items, use -vv to show\nE         Differing attributes:\nE         ['created_at']\nE         \nE         Drill down into differing attribute created_at:\nE           created_at: datetime.datetime(2023, 3, 1, 10, 26, 47, 366000) != datetime.datetime(2023, 3, 1, 17, 26, 47, 366000)\n\ntests\\test_log.py:17: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_log.py::TestFromJson::test_unlocked_by_keypad",
      "lineno": 18,
      "outcome": "failed",
      "keywords": [
        "test_unlocked_by_keypad",
        "TestFromJson",
        "test_log.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\tests\\test_log.py",
          "lineno": 32,
          "message": "AssertionError: assert LockLog(creat...ss-code-id__') == LockLog(creat...ss-code-id__')\n  \n  Omitting 3 identical items, use -vv to show\n  Differing attributes:\n  ['created_at']\n  \n  Drill down into differing attribute created_at:\n    created_at: datetime.datetime(2023, 3, 1, 10, 26, 47, 366000) != datetime.datetime(2023, 3, 1, 17, 26, 47, 366000)"
        },
        "traceback": [
          {
            "path": "tests\\test_log.py",
            "lineno": 32,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_log.TestFromJson object at 0x0000021998B119A0>\nlog_json = {'createdAt': '2023-03-01T17:26:47.366Z', 'deviceId': '__device_uuid__', 'logId': '__log_uuid__', 'message': {'accessorUuid': 'ffffffff-ffff-ffff-ffff-ffffffffffff', 'action': 2, 'clientId': None, 'eventCode': 2, ...}, ...}\n\n    def test_unlocked_by_keypad(self, log_json):\n        log_json[\"message\"].update(\n            {\n                \"eventCode\": 2,\n                \"keypadUuid\": \"__access-code-id__\",\n            }\n        )\n        lock_log = LockLog(\n            created_at=datetime(2023, 3, 1, 17, 26, 47, 366000),\n            accessor_id=None,\n            access_code_id=\"__access-code-id__\",\n            message=\"Unlocked by keypad\",\n        )\n>       assert LockLog.from_json(log_json) == lock_log\nE       AssertionError: assert LockLog(creat...ss-code-id__') == LockLog(creat...ss-code-id__')\nE         \nE         Omitting 3 identical items, use -vv to show\nE         Differing attributes:\nE         ['created_at']\nE         \nE         Drill down into differing attribute created_at:\nE           created_at: datetime.datetime(2023, 3, 1, 10, 26, 47, 366000) != datetime.datetime(2023, 3, 1, 17, 26, 47, 366000)\n\ntests\\test_log.py:32: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_log.py::TestFromJson::test_unlocked_by_mobile_device",
      "lineno": 33,
      "outcome": "failed",
      "keywords": [
        "test_unlocked_by_mobile_device",
        "TestFromJson",
        "test_log.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "failed",
        "crash": {
          "path": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\tests\\test_log.py",
          "lineno": 47,
          "message": "AssertionError: assert LockLog(creat..._code_id=None) == LockLog(creat..._code_id=None)\n  \n  Omitting 3 identical items, use -vv to show\n  Differing attributes:\n  ['created_at']\n  \n  Drill down into differing attribute created_at:\n    created_at: datetime.datetime(2023, 3, 1, 10, 26, 47, 366000) != datetime.datetime(2023, 3, 1, 17, 26, 47, 366000)"
        },
        "traceback": [
          {
            "path": "tests\\test_log.py",
            "lineno": 47,
            "message": "AssertionError"
          }
        ],
        "longrepr": "self = <tests.test_log.TestFromJson object at 0x0000021998B11B80>\nlog_json = {'createdAt': '2023-03-01T17:26:47.366Z', 'deviceId': '__device_uuid__', 'logId': '__log_uuid__', 'message': {'accessorUuid': '__user-id__', 'action': 2, 'clientId': None, 'eventCode': 7, ...}, ...}\n\n    def test_unlocked_by_mobile_device(self, log_json):\n        log_json[\"message\"].update(\n            {\n                \"eventCode\": 7,\n                \"accessorUuid\": \"__user-id__\",\n            }\n        )\n        lock_log = LockLog(\n            created_at=datetime(2023, 3, 1, 17, 26, 47, 366000),\n            accessor_id=\"__user-id__\",\n            access_code_id=None,\n            message=\"Unlocked by mobile device\",\n        )\n>       assert LockLog.from_json(log_json) == lock_log\nE       AssertionError: assert LockLog(creat..._code_id=None) == LockLog(creat..._code_id=None)\nE         \nE         Omitting 3 identical items, use -vv to show\nE         Differing attributes:\nE         ['created_at']\nE         \nE         Drill down into differing attribute created_at:\nE           created_at: datetime.datetime(2023, 3, 1, 10, 26, 47, 366000) != datetime.datetime(2023, 3, 1, 17, 26, 47, 366000)\n\ntests\\test_log.py:47: AssertionError"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_notification.py::test_from_json",
      "lineno": 10,
      "outcome": "passed",
      "keywords": [
        "test_from_json",
        "test_notification.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_notification.py::test_save",
      "lineno": 18,
      "outcome": "passed",
      "keywords": [
        "test_save",
        "test_notification.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_notification.py::test_delete",
      "lineno": 23,
      "outcome": "passed",
      "keywords": [
        "test_delete",
        "test_notification.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_user.py::test_from_json",
      "lineno": 5,
      "outcome": "passed",
      "keywords": [
        "test_from_json",
        "test_user.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    },
    {
      "nodeid": "tests/test_user.py::test_from_json_no_name",
      "lineno": 14,
      "outcome": "passed",
      "keywords": [
        "test_from_json_no_name",
        "test_user.py",
        "tests",
        "dknowles2@pyschlage__5c48dcd0__requests__aiohttp",
        ""
      ],
      "setup": {
        "outcome": "passed"
      },
      "call": {
        "outcome": "passed"
      },
      "teardown": {
        "outcome": "passed"
      }
    }
  ],
  "warnings": [
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
      "lineno": 131
    },
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
      "lineno": 131
    },
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
      "lineno": 131
    },
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
      "lineno": 131
    },
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\auth.py",
      "lineno": 131
    },
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\inspect.py",
      "lineno": 3066
    },
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\code.py",
      "lineno": 282
    },
    {
      "message": "coroutine 'Device.send_command' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\tests\\test_lock.py",
      "lineno": 175
    },
    {
      "message": "coroutine 'Device.send_command' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
      "lineno": 225
    },
    {
      "message": "coroutine 'Device.send_command' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\lock.py",
      "lineno": 225
    },
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\enum.py",
      "lineno": 726
    },
    {
      "message": "coroutine 'Device.send_command' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py",
      "lineno": 767
    },
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "C:\\Users\\Mohay\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\unittest\\mock.py",
      "lineno": 767
    },
    {
      "message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited",
      "category": "RuntimeWarning",
      "when": "runtest",
      "filename": "D:\\repos\\dknowles2@pyschlage__5c48dcd0__requests__aiohttp\\pyschlage\\notification.py",
      "lineno": 89
    }
  ]
}